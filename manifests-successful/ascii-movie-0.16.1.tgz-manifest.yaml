---
# Source: ascii-movie/templates/common.yaml
apiVersion: v1
kind: Secret
metadata:
  name: my-release-ascii-movie-ssh
  labels:
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: ascii-movie
    app.kubernetes.io/version: 1.9.3
    helm.sh/chart: ascii-movie-0.16.1
stringData:
  ssh_host_ed25519_key: |
    -----BEGIN PRIVATE KEY-----
    MC4CAQAwBQYDK2VwBCIEIGzPlOnY87UaYOdzgBeXg91bnuO0xv2AZdffIaYFNyVb
    -----END PRIVATE KEY-----
  ssh_host_rsa_key: |
    -----BEGIN RSA PRIVATE KEY-----
    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
    -----END RSA PRIVATE KEY-----
---
# Source: ascii-movie/templates/common.yaml
apiVersion: v1
kind: Service
metadata:
  name: my-release-ascii-movie-api
  labels:
    app.kubernetes.io/service: my-release-ascii-movie-api
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: ascii-movie
    app.kubernetes.io/version: 1.9.3
    helm.sh/chart: ascii-movie-0.16.1
  annotations:
spec:
  type: ClusterIP
  ports:
    - port: 1977
      targetPort: http
      protocol: TCP
      name: http
  selector:
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/name: ascii-movie
---
# Source: ascii-movie/templates/common.yaml
apiVersion: v1
kind: Service
metadata:
  name: my-release-ascii-movie
  labels:
    app.kubernetes.io/service: my-release-ascii-movie
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: ascii-movie
    app.kubernetes.io/version: 1.9.3
    helm.sh/chart: ascii-movie-0.16.1
  annotations:
spec:
  type: LoadBalancer
  externalTrafficPolicy: Local
  ports:
    - port: 22
      targetPort: ssh
      protocol: TCP
      name: ssh
    - port: 23
      targetPort: telnet
      protocol: TCP
      name: telnet
  selector:
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/name: ascii-movie
---
# Source: ascii-movie/templates/common.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: my-release-ascii-movie
  labels:
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: ascii-movie
    app.kubernetes.io/version: 1.9.3
    helm.sh/chart: ascii-movie-0.16.1
spec:
  revisionHistoryLimit: 3
  replicas: 1
  strategy:
    type: RollingUpdate
  selector:
    matchLabels:
      app.kubernetes.io/name: ascii-movie
      app.kubernetes.io/instance: my-release
  template:
    metadata:
      annotations:
        
        checksum/secrets: c0946295e4094e120cd116e1a04138ea8780410474d7f3095268584661c55e0a
      labels:
        app.kubernetes.io/name: ascii-movie
        app.kubernetes.io/instance: my-release
    spec:
      
      serviceAccountName: default
      automountServiceAccountToken: true
      securityContext:
        runAsNonRoot: true
      dnsPolicy: ClusterFirst
      enableServiceLinks: true
      containers:
        - name: my-release-ascii-movie
          image: ghcr.io/gabe565/ascii-movie:1.9.3
          imagePullPolicy: Always
          securityContext:
            readOnlyRootFilesystem: true
          env:
            - name: ASCII_MOVIE_API_ADDRESS
              value: :1977
            - name: ASCII_MOVIE_CONCURRENT_STREAMS
              value: "10"
            - name: ASCII_MOVIE_SSH_ADDRESS
              value: :22
            - name: ASCII_MOVIE_SSH_ENABLED
              value: "true"
            - name: ASCII_MOVIE_SSH_HOST_KEY
              value: /etc/ssh/ssh_host_rsa_key,/etc/ssh/ssh_host_ed25519_key
            - name: ASCII_MOVIE_TELNET_ADDRESS
              value: :23
            - name: ASCII_MOVIE_TELNET_ENABLED
              value: "true"
          ports:
            - name: http
              containerPort: 1977
              protocol: TCP
            - name: ssh
              containerPort: 22
              protocol: TCP
            - name: telnet
              containerPort: 23
              protocol: TCP
          volumeMounts:
            - name: ssh
              mountPath: /etc/ssh
          livenessProbe:
            failureThreshold: 3
            httpGet:
              path: /health
              port: http
              scheme: HTTP
            initialDelaySeconds: 0
            periodSeconds: 10
            timeoutSeconds: 1
          readinessProbe:
            failureThreshold: 3
            httpGet:
              path: /health
              port: http
              scheme: HTTP
            initialDelaySeconds: 0
            periodSeconds: 10
            timeoutSeconds: 1
          startupProbe:
            failureThreshold: 30
            httpGet:
              path: /health
              port: http
              scheme: HTTP
            initialDelaySeconds: 0
            periodSeconds: 5
            timeoutSeconds: 1
      volumes:
        - name: ssh
          secret:
            secretName: my-release-ascii-movie-ssh
