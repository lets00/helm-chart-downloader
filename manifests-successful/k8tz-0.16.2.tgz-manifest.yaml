---
# Source: k8tz/templates/namespace.yaml
apiVersion: v1
kind: Namespace
metadata:
  name: k8tz
  labels:
    k8tz.io/controller-namespace: "true"
    helm.sh/chart: k8tz-0.16.2
    app.kubernetes.io/name: k8tz
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "0.16.2"
    app.kubernetes.io/managed-by: Helm
---
# Source: k8tz/templates/serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: my-release-k8tz
  namespace: k8tz
  labels:
    helm.sh/chart: k8tz-0.16.2
    app.kubernetes.io/name: k8tz
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "0.16.2"
    app.kubernetes.io/managed-by: Helm
---
# Source: k8tz/templates/admission-webhook.yaml
apiVersion: v1
data:
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURKakNDQWc2Z0F3SUJBZ0lSQUlmamY0bmJMTDZ1R3FjKy9qMkFVKzR3RFFZSktvWklodmNOQVFFTEJRQXcKSGpFY01Cb0dBMVVFQXhNVGJYa3RjbVZzWldGelpTNXJPSFI2TG5OMll6QWVGdzB5TkRBMk1qQXhORFUzTVRWYQpGdzB6T0RBMk1qRXhORFUzTVRWYU1CNHhIREFhQmdOVkJBTVRFMjE1TFhKbGJHVmhjMlV1YXpoMGVpNXpkbU13CmdnRWlNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0SUJEd0F3Z2dFS0FvSUJBUUM5d01RQWthdkhveENzeHdiSTRVd0sKdmlDbjZ0TERLL2lVaktldGZzSEV2SU5JcklqYWRUVjdHVGdsZlBtWGRRNTY4L3Z6blVkUHZ5TDVoOXB2SFBURgpLR0x6azF3NzM2NEVQTzloS2hMMTJtWG1KRmlaODBQVTlNVyt5eXkwbFJlZkFNTDM0TjZKcWFzeVRjNWJDM0lVCnptUENVb0FVdjJJSVdlbzYyZ3hDNllDb3FKN1c1SnVCVlV1UDZORWlUU1NIWlo1NUVFdXJQd1hRaWJpSkE0TnEKUmk0YXdQUklTa0t2c2paaktla1dqVDZOUzNyRHBseGFVb1NualZweFp0UjZUWElYWHVlYXZlNmd1VGNkSW03ZgpkQk0ycG5XcEtjK0JQMEZRN1RYZ0xIRmRmNmZ6QkoxVmdSbmtyNFRSYXVibHV2cURiYzU5Z1BGN0lEVHlldS9aCkFnTUJBQUdqWHpCZE1BNEdBMVVkRHdFQi93UUVBd0lGb0RBZEJnTlZIU1VFRmpBVUJnZ3JCZ0VGQlFjREFRWUkKS3dZQkJRVUhBd0l3REFZRFZSMFRBUUgvQkFJd0FEQWVCZ05WSFJFRUZ6QVZnaE50ZVMxeVpXeGxZWE5sTG1zNApkSG91YzNaak1BMEdDU3FHU0liM0RRRUJDd1VBQTRJQkFRQXR4aWRTUHVTQW9wN2NLMzhlRjIwczY0eDZIT0VRClpSaWtXM2ZtTWtBaTFKVjhSOTI0TW90RDVhV2RoM09ROWZucUdES043RTB3QlBCWEo3S0I0OGo3SWxDbS9ocmYKLzhydHZIK2tUUmhCVDJrRVk0NHY1bjRyaGxmYjUyOU90VkhGWTF4eERHWWRDV3RFbVlyblEzcDJMaW5HUDRIaQpUK1EreDZYNk1Vb1d0dEhrNVl3dWplUVRYOG1scEFVVmhTRWowMW1tWnFkcE5wT1hOUGpxaEZ2VmF6NlNLejdwCmVabUFPK3ZERVI1aENoU21malExWmREOWJidHBIbXd3a0I5MUs2ZUpEd2JPS1NFSXByN2I1MkpVKzRYRUZkUjIKcUFnL1E2NzZVSFNGL1JDUktNM1J5cDI2SjNBNURPUnpvQ2VlSTR4MCtYTEw4ckNWMHlJVjN0TUcKLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQ==
  tls.key: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFb3dJQkFBS0NBUUVBdmNERUFKR3J4Nk1Rck1jR3lPRk1DcjRncCtyU3d5djRsSXluclg3QnhMeURTS3lJCjJuVTFleGs0Slh6NWwzVU9ldlA3ODUxSFQ3OGkrWWZhYnh6MHhTaGk4NU5jTzkrdUJEenZZU29TOWRwbDVpUlkKbWZORDFQVEZ2c3NzdEpVWG53REM5K0RlaWFtck1rM09Xd3R5Rk01andsS0FGTDlpQ0ZucU90b01RdW1BcUtpZQoxdVNiZ1ZWTGoralJJazBraDJXZWVSQkxxejhGMEltNGlRT0Rha1l1R3NEMFNFcENyN0kyWXlucEZvMCtqVXQ2Cnc2WmNXbEtFcDQxYWNXYlVlazF5RjE3bm1yM3VvTGszSFNKdTMzUVROcVoxcVNuUGdUOUJVTzAxNEN4eFhYK24KOHdTZFZZRVo1SytFMFdybTVicjZnMjNPZllEeGV5QTA4bnJ2MlFJREFRQUJBb0lCQURoakZ4dWdMaTdXQ3pkOApzVXh5ZnRsV1pIZmh0UjNnYkM4Z21SZGFhcFJlL0poVkJSbjk2SldiQ2U5Qjh4Mko0SEt6SERUcGtPNW11eXJ4CnJ2eUQyMHpYVW9oVlN2eFQzTzlQZUVja2JKdjRlWDFwWVpibURrc3pMYXdqempZZmMvU0JFbTc4dU1TcDBjRFMKRkRkRDhITzBYVHE2cjJyNjhGUFEvR1RldFBRUTBVMklZaGFjaVRvVzBuY1UvcFJsMmpVU1JyYUpQUHVoRFFtcQpOcnkyT3RML1QwaTFkZjJyMm1QM1lzemRGTHU3NGlPWThaeFVSZlZqZzg3LzhmYVhvZkppNk1qVWNVeGFTd1RTCmVDaE1tYktPWXlRa0lCZW1IMHFNSm5oTlRBOXh5QXdVRjBDb0N1Q3dkN0Y1UEpkM3Rwb0kzK2ZSLzZGL3pXUlEKUUhGRWQ5MENnWUVBd09OcFRPT1FBeE94UThZdEtiWmpvTU9YYWtIcEEyQk1ma0hpeEFkSGYzY0JmTDBPMjdSTwo2eFVjZFFzeWR5Q3RYU3RpRUhvMk5QbWRZYTJiSThEZUNkUTUvZWNzUnl0TldSSTZIME15Qk04bW1UbFZDRTQyCmx2NGNiRko2S3JjSGNxSG5BeTREaHg1Mm54Y095TjhkOS9tY21pa1phZkxxUzd2V3RkQzJEVThDZ1lFQSs5YTgKQVlkME1zR1ZuYndsN0U5RGJwMlBabE90eWZoeTFHVFNQK2hsMUZLZTdoSFRaWG1UVDdnY21hNkQ1R3E1Mm5tWgpHL3BwV3FLQmFJSEcrdUs2UEhpMjI1cVhRM25sUGVDbzZHbnlSK3lGUzE3Rm83bm9PM1lKckJGRFZkNFRQaVY2ClZ3VVZJRCtLajJPZ2hlSi9BOXBDNjZEMWxhdkpoUzkxWkNObWRsY0NnWUFLaVdHckxaTWtWK01MREx4UzF2L0MKUEd6OUJQU3hsb1VYTUlvdW95Y29zMXVGY041cTZnS1ZuT1dkRHl1R2ptWnAvSUN5M2Jvd1VxSmlQNVdGOG5jdQpta1ZBdFd3Wnh5ZkdnZFJpK015MnJvb3hQSXlFazZFdnhsblBJUUpEYXhRaEV1OEhvVy9YNWJZZElxbFFGOEFQClY3ZFNSSVI2NFNZalZQTjVveGtPeVFLQmdRRHdOZmRvQWZxY3V6ZHBsK0FZVWRhQStQcWg0T2tnZjhHUHc0Y2oKL0JpODkvMnVHUVNwZ3RnM0x1YmcwNnZzUUx4N25vYWpRQ3dqam1PZStrS0FaYWk4SzJ4SGRXSVlzM2tzbDFDbApOd0VwQjNwdzFMbnhuRTdlQUkzak9TZ2dERTRRZGhFR1ZjdTcwYi9wVzE3dXRZYnZkczFrRVVpT2RhZ25TSWhSCmRzNnh5d0tCZ0JlQ3NYYmlSMmVYUUpzbHo3Y0Jyc1ZlNVJqVjFHQ3ZtVkY2VEo5V0NZTmwrWU1DOFJNallqaUIKbTJrZWlkcG41VWkySk4wS0NhZVNKeUlEUkgxQkViaEQ2am5qNjc1WVFDdFAwYzZ6eUdXSGNRT1pLaWw2aXpXTwpvMHVmNWxkRGZ3UXI1ZlIweDBNMWxWMjBjTkhJSXBUWUtJZ1FLTzFRcjZGa2o2d3Rlc3dECi0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0t
kind: Secret
metadata:
  namespace: k8tz
  creationTimestamp: null
  name: my-release-k8tz-tls
  labels:
    helm.sh/chart: k8tz-0.16.2
    app.kubernetes.io/name: k8tz
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "0.16.2"
    app.kubernetes.io/managed-by: Helm
---
# Source: k8tz/templates/rbac.yaml
kind: ClusterRole
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: my-release-k8tz-role
  labels:
    helm.sh/chart: k8tz-0.16.2
    app.kubernetes.io/name: k8tz
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "0.16.2"
    app.kubernetes.io/managed-by: Helm
rules:
  - apiGroups: [""]
    resources: ["namespaces"]
    verbs: ["get"]
  - apiGroups: [""]
    resources: ["secrets"]
    verbs: ["get", "list", "watch"]
---
# Source: k8tz/templates/rbac.yaml
kind: ClusterRoleBinding
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: my-release-k8tz-role-binding
  labels:
    helm.sh/chart: k8tz-0.16.2
    app.kubernetes.io/name: k8tz
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "0.16.2"
    app.kubernetes.io/managed-by: Helm
subjects:
  - kind: ServiceAccount
    name: my-release-k8tz
    namespace: k8tz
roleRef:
  kind: ClusterRole
  apiGroup: rbac.authorization.k8s.io
  name: my-release-k8tz-role
---
# Source: k8tz/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: my-release
  namespace: k8tz
  labels:
    helm.sh/chart: k8tz-0.16.2
    app.kubernetes.io/name: k8tz
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "0.16.2"
    app.kubernetes.io/managed-by: Helm
spec:
  type: ClusterIP
  ports:
    - port: 443
      targetPort: https
      protocol: TCP
      name: https
  selector:
    app.kubernetes.io/name: k8tz
    app.kubernetes.io/instance: my-release
---
# Source: k8tz/templates/controller.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: my-release-k8tz
  namespace: k8tz
  labels:
    helm.sh/chart: k8tz-0.16.2
    app.kubernetes.io/name: k8tz
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "0.16.2"
    app.kubernetes.io/managed-by: Helm
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: k8tz
      app.kubernetes.io/instance: my-release
  template:
    metadata:
      annotations:
        checksum/config: ec1936f8dc0a05371edd133781091bec198463e6c51b604eb827c557f3e18668
      labels:
        app.kubernetes.io/name: k8tz
        app.kubernetes.io/instance: my-release
    spec:
      volumes:
      - name: tls
        secret:
          secretName: my-release-k8tz-tls
      serviceAccountName: my-release-k8tz
      securityContext:
        runAsNonRoot: true
        seccompProfile:
          type: RuntimeDefault
      containers:
        - name: k8tz
          args:
          - "webhook"
          - "--timezone"
          - "UTC"
          - "--injection-strategy"
          - "initContainer"
          - "--inject=true"
          - "--container-name=k8tz"
          - "--bootstrap-image"
          - "quay.io/k8tz/k8tz:0.16.2"
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            runAsNonRoot: true
            seccompProfile:
              type: RuntimeDefault
          image: "quay.io/k8tz/k8tz:0.16.2"
          imagePullPolicy: IfNotPresent
          volumeMounts:
            - name: tls
              mountPath: /run/secrets/tls
              readOnly: true
          ports:
            - name: https
              containerPort: 8443
              protocol: TCP
          livenessProbe:
            httpGet:
              path: /health
              port: https
              scheme: HTTPS
          readinessProbe:
            httpGet:
              path: /health
              port: https
              scheme: HTTPS
          resources:
            {}
---
# Source: k8tz/templates/admission-webhook.yaml
apiVersion: admissionregistration.k8s.io/v1
kind: MutatingWebhookConfiguration
metadata:
  name: my-release-k8tz
  labels:
    helm.sh/chart: k8tz-0.16.2
    app.kubernetes.io/name: k8tz
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "0.16.2"
    app.kubernetes.io/managed-by: Helm
webhooks:
  - name: admission-controller.k8tz.io
    namespaceSelector:
      matchExpressions:
      - key: k8tz.io/controller-namespace
        operator: NotIn
        values: ["true"]
      - key: kubernetes.io/metadata.name
        operator: NotIn
        values:
        - k8tz
        - kube-system
    sideEffects: None
    failurePolicy: Fail
    admissionReviewVersions: ["v1", "v1beta1"]
    clientConfig:
      service:
        name: my-release
        namespace: k8tz
        path: "/"
        port: 443
      caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURKakNDQWc2Z0F3SUJBZ0lSQUlmamY0bmJMTDZ1R3FjKy9qMkFVKzR3RFFZSktvWklodmNOQVFFTEJRQXcKSGpFY01Cb0dBMVVFQXhNVGJYa3RjbVZzWldGelpTNXJPSFI2TG5OMll6QWVGdzB5TkRBMk1qQXhORFUzTVRWYQpGdzB6T0RBMk1qRXhORFUzTVRWYU1CNHhIREFhQmdOVkJBTVRFMjE1TFhKbGJHVmhjMlV1YXpoMGVpNXpkbU13CmdnRWlNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0SUJEd0F3Z2dFS0FvSUJBUUM5d01RQWthdkhveENzeHdiSTRVd0sKdmlDbjZ0TERLL2lVaktldGZzSEV2SU5JcklqYWRUVjdHVGdsZlBtWGRRNTY4L3Z6blVkUHZ5TDVoOXB2SFBURgpLR0x6azF3NzM2NEVQTzloS2hMMTJtWG1KRmlaODBQVTlNVyt5eXkwbFJlZkFNTDM0TjZKcWFzeVRjNWJDM0lVCnptUENVb0FVdjJJSVdlbzYyZ3hDNllDb3FKN1c1SnVCVlV1UDZORWlUU1NIWlo1NUVFdXJQd1hRaWJpSkE0TnEKUmk0YXdQUklTa0t2c2paaktla1dqVDZOUzNyRHBseGFVb1NualZweFp0UjZUWElYWHVlYXZlNmd1VGNkSW03ZgpkQk0ycG5XcEtjK0JQMEZRN1RYZ0xIRmRmNmZ6QkoxVmdSbmtyNFRSYXVibHV2cURiYzU5Z1BGN0lEVHlldS9aCkFnTUJBQUdqWHpCZE1BNEdBMVVkRHdFQi93UUVBd0lGb0RBZEJnTlZIU1VFRmpBVUJnZ3JCZ0VGQlFjREFRWUkKS3dZQkJRVUhBd0l3REFZRFZSMFRBUUgvQkFJd0FEQWVCZ05WSFJFRUZ6QVZnaE50ZVMxeVpXeGxZWE5sTG1zNApkSG91YzNaak1BMEdDU3FHU0liM0RRRUJDd1VBQTRJQkFRQXR4aWRTUHVTQW9wN2NLMzhlRjIwczY0eDZIT0VRClpSaWtXM2ZtTWtBaTFKVjhSOTI0TW90RDVhV2RoM09ROWZucUdES043RTB3QlBCWEo3S0I0OGo3SWxDbS9ocmYKLzhydHZIK2tUUmhCVDJrRVk0NHY1bjRyaGxmYjUyOU90VkhGWTF4eERHWWRDV3RFbVlyblEzcDJMaW5HUDRIaQpUK1EreDZYNk1Vb1d0dEhrNVl3dWplUVRYOG1scEFVVmhTRWowMW1tWnFkcE5wT1hOUGpxaEZ2VmF6NlNLejdwCmVabUFPK3ZERVI1aENoU21malExWmREOWJidHBIbXd3a0I5MUs2ZUpEd2JPS1NFSXByN2I1MkpVKzRYRUZkUjIKcUFnL1E2NzZVSFNGL1JDUktNM1J5cDI2SjNBNURPUnpvQ2VlSTR4MCtYTEw4ckNWMHlJVjN0TUcKLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQ==
    rules:
      - operations: [ "CREATE" ]
        apiGroups: [""]
        apiVersions: ["v1"]
        resources: ["pods"]
      - operations: [ "CREATE" ]
        apiGroups: ["batch"]
        apiVersions: ["v1"]
        resources: ["cronjobs"]
---
# Source: k8tz/templates/tests/test-connection.yaml
apiVersion: v1
kind: Pod
metadata:
  name: "my-release-k8tz-health-test"
  namespace: k8tz
  labels:
    helm.sh/chart: k8tz-0.16.2
    app.kubernetes.io/name: k8tz
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "0.16.2"
    app.kubernetes.io/managed-by: Helm
  annotations:
    "helm.sh/hook": test
spec:
  containers:
    - name: curl
      image: curlimages/curl:7.78.0
      args: ['--insecure', 'https://my-release:443/health']
  restartPolicy: Never
