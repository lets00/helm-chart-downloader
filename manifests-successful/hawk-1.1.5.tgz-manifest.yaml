---
# Source: hawk/templates/serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: my-release-hawk
  labels:
    helm.sh/chart: hawk-1.1.5
    app.kubernetes.io/name: hawk
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm
---
# Source: hawk/templates/grafana-config.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: my-release-hawk-grafana-providers
  labels:
    helm.sh/chart: hawk-1.1.5
    app.kubernetes.io/name: hawk
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm
data:
  dashboards.yaml: |-
    apiVersion: 1
    providers: 
      - name: 'Hawk'
        updateIntervalSeconds: 10
        allowUiUpdates: true
        options:
          path: /var/lib/grafana/dashboards
          foldersFromFilesStructure: true
        type: file
---
# Source: hawk/templates/grafana-config.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: my-release-hawk-grafana-config
  labels:
    helm.sh/chart: hawk-1.1.5
    app.kubernetes.io/name: hawk
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm
data:
  grafana.ini: |-
    [server]
    root_url = %(protocol)s://%(domain)s:%(http_port)s/grafana/
    serve_from_sub_path = true
---
# Source: hawk/templates/grafana-config.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: my-release-hawk-grafana-datasource
  labels:
    helm.sh/chart: hawk-1.1.5
    app.kubernetes.io/name: hawk
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm
data:
  HAWK-JSON.yaml : |-
    apiVersion: 1

    providers: 
      - name: 'Hawk Dashboards'
        updateIntervalSeconds: 10
        allowUiUpdates: true
        options:
          path: /var/lib/grafana/dashboards
          foldersFromFilesStructure: true
        type: file

    deleteDatasources:
      - name: HAWK-JSON
        orgId: 1

    datasources:
      - name: HAWK-JSON
        type: simpod-json-datasource
        access: proxy
        orgid: 1
        isDefault: true
        url: http://my-release-hawk-service.hawk-1.1.5.tgz.svc.cluster.local
        editable: true
---
# Source: hawk/templates/grafana-config.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: my-release-hawk-grafana-dashboards
  labels:
    helm.sh/chart: hawk-1.1.5
    app.kubernetes.io/name: hawk
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm
data:
  overview-dashboard.json : |-
    {
      "annotations": {
        "list": [
          {
            "builtIn": 1,
            "datasource": {
              "type": "grafana",
              "uid": "-- Grafana --"
            },
            "enable": true,
            "hide": true,
            "iconColor": "rgba(0, 211, 255, 1)",
            "name": "Annotations & Alerts",
            "target": {
              "limit": 100,
              "matchAny": false,
              "tags": [],
              "type": "dashboard"
            },
            "type": "dashboard"
          }
        ]
      },
      "description": "This dashboard acts as a general overview over all hawk information.",
      "editable": true,
      "fiscalYearStartMonth": 0,
      "graphTooltip": 0,
      "id": 6,
      "links": [],
      "liveNow": false,
      "panels": [
        {
          "datasource": {
            "type": "simpod-json-datasource",
            "uid": "PB1F47CFFDA9F0787"
          },
          "description": "",
          "gridPos": {
            "h": 2,
            "w": 24,
            "x": 0,
            "y": 0
          },
          "id": 18,
          "options": {
            "content": "This dashboard acts as a general overview over all hawk information.",
            "mode": "markdown"
          },
          "pluginVersion": "8.5.0",
          "title": "Description",
          "transparent": true,
          "type": "text"
        },
        {
          "collapsed": false,
          "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 2
          },
          "id": 14,
          "panels": [],
          "title": "Endpoint & Service Requests Charts",
          "type": "row"
        },
        {
          "datasource": {
            "type": "simpod-json-datasource",
            "uid": "PB1F47CFFDA9F0787"
          },
          "description": "A Chart that shows how often different services were requested in the specified time span. This is an aggregated count over all service endpoints.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                }
              },
              "mappings": [],
              "unit": "short"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 15,
            "w": 12,
            "x": 0,
            "y": 3
          },
          "id": 1,
          "options": {
            "legend": {
              "displayMode": "table",
              "placement": "bottom",
              "values": [
                "value",
                "percent"
              ]
            },
            "pieType": "pie",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "/^requests$/",
              "values": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "9.5.6",
          "targets": [
            {
              "datasource": {
                "type": "simpod-json-datasource",
                "uid": "e2346306-6a7c-4608-84c8-2dd1a3b7bc14"
              },
              "payload": "",
              "refId": "A",
              "target": "service_requests_table"
            }
          ],
          "title": "Service Requests",
          "type": "piechart"
        },
        {
          "datasource": {
            "type": "simpod-json-datasource",
            "uid": "PB1F47CFFDA9F0787"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                }
              },
              "mappings": []
            },
            "overrides": []
          },
          "gridPos": {
            "h": 15,
            "w": 12,
            "x": 12,
            "y": 3
          },
          "id": 12,
          "options": {
            "displayLabels": [
              "percent"
            ],
            "legend": {
              "displayMode": "table",
              "placement": "bottom",
              "sortBy": "Percent",
              "sortDesc": true,
              "values": [
                "percent",
                "value"
              ]
            },
            "pieType": "pie",
            "reduceOptions": {
              "calcs": [
                "firstNotNull"
              ],
              "fields": "/^requests$/",
              "limit": 1000,
              "values": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "desc"
            }
          },
          "pluginVersion": "8.5.0",
          "targets": [
            {
              "datasource": {
                "type": "simpod-json-datasource",
                "uid": "PB1F47CFFDA9F0787"
              },
              "payload": "",
              "refId": "A",
              "target": "endpoint_requests_table"
            }
          ],
          "title": "Endpoint Requests",
          "type": "piechart"
        },
        {
          "collapsed": false,
          "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 18
          },
          "id": 16,
          "panels": [],
          "title": "Endpoint & Service Requests Tables",
          "type": "row"
        },
        {
          "datasource": {
            "type": "simpod-json-datasource",
            "uid": "PB1F47CFFDA9F0787"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "custom": {
                "align": "auto",
                "displayMode": "auto",
                "inspect": false
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 19
          },
          "id": 6,
          "links": [
            {
              "title": "Show Details",
              "url": "/d/sg/"
            }
          ],
          "options": {
            "footer": {
              "fields": "",
              "reducer": [
                "sum"
              ],
              "show": false
            },
            "showHeader": true,
            "sortBy": [
              {
                "desc": false,
                "displayName": "service"
              }
            ]
          },
          "pluginVersion": "8.5.0",
          "targets": [
            {
              "datasource": {
                "type": "simpod-json-datasource",
                "uid": "PB1F47CFFDA9F0787"
              },
              "payload": "",
              "refId": "A",
              "target": "service_requests_table"
            }
          ],
          "title": "Service Requests",
          "type": "table"
        },
        {
          "datasource": {
            "type": "simpod-json-datasource",
            "uid": "PB1F47CFFDA9F0787"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "custom": {
                "align": "auto",
                "displayMode": "auto",
                "inspect": false
              },
              "links": [
                {
                  "title": "Show Details",
                  "url": "/d/ed/?var-endpoints=${__value.text}"
                }
              ],
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byType",
                  "options": "number"
                },
                "properties": [
                  {
                    "id": "links"
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 19
          },
          "id": 10,
          "options": {
            "footer": {
              "fields": "",
              "reducer": [
                "sum"
              ],
              "show": false
            },
            "showHeader": true,
            "sortBy": [
              {
                "desc": true,
                "displayName": "requests"
              }
            ]
          },
          "pluginVersion": "8.5.0",
          "targets": [
            {
              "datasource": {
                "type": "simpod-json-datasource",
                "uid": "PB1F47CFFDA9F0787"
              },
              "hide": false,
              "payload": "",
              "refId": "A",
              "target": "endpoint_requests_table"
            }
          ],
          "title": "Endpoint Requests",
          "type": "table"
        },
        {
          "datasource": {
            "type": "simpod-json-datasource",
            "uid": "PB1F47CFFDA9F0787"
          },
          "description": "A Table that shows the amount of requests of a service drilled down by\nthe initiator service. ",
          "fieldConfig": {
            "defaults": {
              "custom": {
                "align": "auto",
                "displayMode": "auto",
                "inspect": false
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 27
          },
          "id": 2,
          "links": [
            {
              "title": "Show Details",
              "url": "/d/sg/"
            }
          ],
          "options": {
            "cellHeight": "sm",
            "footer": {
              "countRows": false,
              "fields": "",
              "reducer": [
                "sum"
              ],
              "show": false
            },
            "showHeader": true
          },
          "pluginVersion": "8.5.0",
          "targets": [
            {
              "datasource": {
                "type": "simpod-json-datasource",
                "uid": "e2346306-6a7c-4608-84c8-2dd1a3b7bc14"
              },
              "payload": "",
              "refId": "A",
              "target": "service_initiator_requests_table"
            }
          ],
          "title": "Service Initiator Requests",
          "type": "table"
        },
        {
          "datasource": {
            "type": "simpod-json-datasource",
            "uid": "PB1F47CFFDA9F0787"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "custom": {
                "align": "auto",
                "displayMode": "auto",
                "inspect": false
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 27
          },
          "id": 8,
          "options": {
            "footer": {
              "fields": "",
              "reducer": [
                "sum"
              ],
              "show": false
            },
            "showHeader": true,
            "sortBy": [
              {
                "desc": true,
                "displayName": "requests"
              }
            ]
          },
          "pluginVersion": "8.5.0",
          "targets": [
            {
              "datasource": {
                "type": "simpod-json-datasource",
                "uid": "PB1F47CFFDA9F0787"
              },
              "hide": false,
              "payload": "",
              "refId": "A",
              "target": "endpoint_initiator_requests_table"
            }
          ],
          "title": "Endpoint Initiator Requests",
          "type": "table"
        }
      ],
      "refresh": "",
      "schemaVersion": 36,
      "style": "dark",
      "tags": [
        "Service Requests",
        "Endpoint Requests"
      ],
      "templating": {
        "list": []
      },
      "time": {
        "from": "now-6h",
        "to": "now"
      },
      "timepicker": {},
      "timezone": "",
      "title": "Overview",
      "uid": "overview",
      "version": 7,
      "weekStart": ""
    }
  ed-dashboard.json : |-
    {
      "annotations": {
        "list": [
          {
            "builtIn": 1,
            "datasource": {
              "type": "grafana",
              "uid": "-- Grafana --"
            },
            "enable": true,
            "hide": true,
            "iconColor": "rgba(0, 211, 255, 1)",
            "name": "Annotations & Alerts",
            "target": {
              "limit": 100,
              "matchAny": false,
              "tags": [],
              "type": "dashboard"
            },
            "type": "dashboard"
          }
        ]
      },
      "description": "This dashboard shows the requests of a specific endpoint over time",
      "editable": true,
      "fiscalYearStartMonth": 0,
      "graphTooltip": 0,
      "id": 12,
      "iteration": 1693500188496,
      "links": [],
      "liveNow": false,
      "panels": [
        {
          "datasource": {
            "type": "simpod-json-datasource",
            "uid": "PB1F47CFFDA9F0787"
          },
          "gridPos": {
            "h": 4,
            "w": 24,
            "x": 0,
            "y": 0
          },
          "id": 6,
          "options": {
            "content": "This dashboard shows the amount of requests of a specific endpoint over time.\\\nOn the top right hand side, the time frame for this analysis is specified.\\\nOn the top left, the graph can be updated for each existing endpoint.",
            "mode": "markdown"
          },
          "pluginVersion": "8.5.0",
          "title": "Description",
          "transparent": true,
          "type": "text"
        },
        {
          "datasource": {
            "type": "simpod-json-datasource",
            "uid": "PB1F47CFFDA9F0787"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "custom": {
                "align": "left",
                "displayMode": "auto",
                "inspect": false
              },
              "links": [
                {
                  "title": "Show this endpoint requests time series",
                  "url": "/d/ed/?var-endpoints=${__value.text}"
                }
              ],
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byType",
                  "options": "number"
                },
                "properties": [
                  {
                    "id": "links"
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "endpoint"
                },
                "properties": [
                  {
                    "id": "custom.width",
                    "value": 700
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 10,
            "w": 12,
            "x": 0,
            "y": 4
          },
          "id": 4,
          "links": [],
          "options": {
            "footer": {
              "enablePagination": false,
              "fields": "",
              "reducer": [
                "sum"
              ],
              "show": true
            },
            "showHeader": true,
            "sortBy": []
          },
          "pluginVersion": "8.5.0",
          "targets": [
            {
              "datasource": {
                "type": "simpod-json-datasource",
                "uid": "PB1F47CFFDA9F0787"
              },
              "payload": "",
              "refId": "A",
              "target": "endpoint_requests_table"
            }
          ],
          "title": "Endpoint Requests",
          "type": "table"
        },
        {
          "datasource": {
            "type": "simpod-json-datasource",
            "uid": "PB1F47CFFDA9F0787"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 10,
            "w": 12,
            "x": 12,
            "y": 4
          },
          "id": 2,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom"
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "8.5.0",
          "targets": [
            {
              "datasource": {
                "type": "simpod-json-datasource",
                "uid": "PB1F47CFFDA9F0787"
              },
              "payload": "{\"endpoint\":\"$endpoints\"}",
              "refId": "A",
              "target": "requests_time"
            }
          ],
          "title": "Endpoint Requests",
          "type": "timeseries"
        }
      ],
      "refresh": "",
      "schemaVersion": 36,
      "style": "dark",
      "tags": [
        "Endpoint Requests",
        "Endpoint Requests Over Time"
      ],
      "templating": {
        "list": [
          {
            "current": {
              "selected": false,
              "text": "http:DELETE:front-end.sock-shop.svc.cluster.local:/cart",
              "value": "http:DELETE:front-end.sock-shop.svc.cluster.local:/cart"
            },
            "datasource": {
              "type": "simpod-json-datasource",
              "uid": "PB1F47CFFDA9F0787"
            },
            "definition": "{   \"target\": \"endpoints\" } (JSON)",
            "hide": 0,
            "includeAll": false,
            "label": "Endpoint",
            "multi": false,
            "name": "endpoints",
            "options": [],
            "query": {
              "format": "json",
              "query": "{   \"target\": \"endpoints\" }"
            },
            "refresh": 1,
            "regex": "",
            "skipUrlSync": false,
            "sort": 0,
            "type": "query"
          }
        ]
      },
      "time": {
        "from": "now-6h",
        "to": "now"
      },
      "timepicker": {},
      "timezone": "",
      "title": "Endpoint Details",
      "uid": "ed",
      "version": 6,
      "weekStart": ""
    }
  fd-dashboard.json : |-
    {
      "annotations": {
        "list": [
          {
            "builtIn": 1,
            "datasource": {
              "type": "grafana",
              "uid": "-- Grafana --"
            },
            "enable": true,
            "hide": true,
            "iconColor": "rgba(0, 211, 255, 1)",
            "name": "Annotations & Alerts",
            "target": {
              "limit": 100,
              "matchAny": false,
              "tags": [],
              "type": "dashboard"
            },
            "type": "dashboard"
          }
        ]
      },
      "description": "This Dashboard shows detailed information on a specified field.",
      "editable": true,
      "fiscalYearStartMonth": 0,
      "graphTooltip": 0,
      "id": 8,
      "iteration": 1693500322118,
      "links": [],
      "liveNow": false,
      "panels": [
        {
          "datasource": {
            "type": "simpod-json-datasource",
            "uid": "PB1F47CFFDA9F0787"
          },
          "description": "",
          "gridPos": {
            "h": 4,
            "w": 24,
            "x": 0,
            "y": 0
          },
          "id": 8,
          "options": {
            "content": "This Dashboard shows detailed information on a specified field.\\\nSelect a privacy related field on the top left.\\\nClick on an endpoint to open a detailed endpoint overview dashboard.",
            "mode": "markdown"
          },
          "pluginVersion": "8.5.0",
          "title": "Description",
          "transparent": true,
          "type": "text"
        },
        {
          "datasource": {
            "type": "simpod-json-datasource",
            "uid": "PB1F47CFFDA9F0787"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "custom": {
                "align": "auto",
                "displayMode": "auto",
                "inspect": false
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 3,
            "w": 12,
            "x": 0,
            "y": 4
          },
          "id": 6,
          "options": {
            "footer": {
              "fields": "",
              "reducer": [
                "sum"
              ],
              "show": false
            },
            "showHeader": true
          },
          "pluginVersion": "8.5.0",
          "targets": [
            {
              "datasource": {
                "type": "simpod-json-datasource",
                "uid": "PB1F47CFFDA9F0787"
              },
              "payload": "{\"fields\":[\"$fields\"]}",
              "refId": "A",
              "target": "field_requests"
            }
          ],
          "title": "Total requests",
          "type": "table"
        },
        {
          "datasource": {
            "type": "simpod-json-datasource",
            "uid": "PB1F47CFFDA9F0787"
          },
          "description": "The Field Endpoints table is perhaps the most useful overview that hawk core monitor currently provides for the data controller in terms of privacy preserving\ninsights. On the top left can the privacy related field get selected. The Field Endpoints\npanel provides a list of all endpoints that include the selected field in their usages. The\nlist has the endpoint rows overwritten with links to the corresponding endpoint requests\ndashboards.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "custom": {
                "align": "auto",
                "displayMode": "auto",
                "inspect": false
              },
              "links": [
                {
                  "title": "Show Endpoint Details",
                  "url": "/d/ed/?var-endpoints=${__value.text}"
                }
              ],
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 11,
            "w": 12,
            "x": 12,
            "y": 4
          },
          "id": 2,
          "options": {
            "footer": {
              "fields": "",
              "reducer": [
                "sum"
              ],
              "show": false
            },
            "showHeader": true
          },
          "pluginVersion": "8.5.0",
          "targets": [
            {
              "datasource": {
                "type": "simpod-json-datasource",
                "uid": "PB1F47CFFDA9F0787"
              },
              "payload": "{\"field\":\"$fields\"}",
              "refId": "A",
              "target": "field_endpoints"
            }
          ],
          "title": "Field Endpoints",
          "type": "table"
        },
        {
          "datasource": {
            "type": "simpod-json-datasource",
            "uid": "PB1F47CFFDA9F0787"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 7
          },
          "id": 4,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom"
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "simpod-json-datasource",
                "uid": "PB1F47CFFDA9F0787"
              },
              "payload": "{\"fields\":[\"$fields\"]}",
              "refId": "A",
              "target": "field_requests_time"
            }
          ],
          "title": "Requests over time",
          "type": "timeseries"
        }
      ],
      "refresh": "",
      "schemaVersion": 36,
      "style": "dark",
      "tags": [
        "Field Endpoints",
        "Field Requests",
        "Field Requests Over Time"
      ],
      "templating": {
        "list": [
          {
            "current": {
              "selected": false,
              "text": "user.name",
              "value": "user.name"
            },
            "datasource": {
              "type": "simpod-json-datasource",
              "uid": "PB1F47CFFDA9F0787"
            },
            "definition": "{\"target\":\"fields\"} (JSON)",
            "description": "The selected field, defined in the Configuration dashboard.",
            "hide": 0,
            "includeAll": false,
            "label": "Field",
            "multi": false,
            "name": "fields",
            "options": [],
            "query": {
              "format": "json",
              "query": "{\"target\":\"fields\"}"
            },
            "refresh": 1,
            "regex": "",
            "skipUrlSync": false,
            "sort": 0,
            "type": "query"
          }
        ]
      },
      "time": {
        "from": "now-6h",
        "to": "now"
      },
      "timepicker": {},
      "timezone": "",
      "title": "Field Details",
      "uid": "fd",
      "version": 33,
      "weekStart": ""
    }
  sg-dashboard.json : |-
    {
      "annotations": {
        "list": [
          {
            "builtIn": 1,
            "datasource": {
              "type": "grafana",
              "uid": "-- Grafana --"
            },
            "enable": true,
            "hide": true,
            "iconColor": "rgba(0, 211, 255, 1)",
            "name": "Annotations & Alerts",
            "target": {
              "limit": 100,
              "matchAny": false,
              "tags": [],
              "type": "dashboard"
            },
            "type": "dashboard"
          }
        ]
      },
      "description": "This service graph shows all observed services and the amount of API Requests between them.",
      "editable": true,
      "fiscalYearStartMonth": 0,
      "graphTooltip": 0,
      "id": 3,
      "links": [],
      "liveNow": false,
      "panels": [
        {
          "datasource": {
            "type": "simpod-json-datasource",
            "uid": "PB1F47CFFDA9F0787"
          },
          "gridPos": {
            "h": 2,
            "w": 24,
            "x": 0,
            "y": 0
          },
          "id": 10,
          "options": {
            "content": "This service graph shows all observed services and the amount of API Requests between them.",
            "mode": "markdown"
          },
          "pluginVersion": "8.5.0",
          "title": "Description",
          "transparent": true,
          "type": "text"
        },
        {
          "datasource": {
            "type": "simpod-json-datasource",
            "uid": "PB1F47CFFDA9F0787"
          },
          "description": "This service graph shows all observed services and the amount of API Requests between them.",
          "gridPos": {
            "h": 21,
            "w": 12,
            "x": 0,
            "y": 2
          },
          "id": 4,
          "options": {
            "dataMapping": {
              "aggregationType": "service",
              "baselineRtUpper": "",
              "errorRateColumn": "",
              "errorRateOutgoingColumn": "",
              "extOrigin": "",
              "extTarget": "",
              "requestRateColumn": "requests",
              "requestRateOutgoingColumn": "",
              "responseTimeColumn": "",
              "responseTimeOutgoingColumn": "",
              "showDummyData": false,
              "sourceColumn": "initiator",
              "targetColumn": "",
              "type": ""
            },
            "drillDownLink": "",
            "externalIcons": [
              {
                "filename": "web",
                "pattern": "web"
              },
              {
                "filename": "message",
                "pattern": "jms"
              },
              {
                "filename": "database",
                "pattern": "jdbc"
              },
              {
                "filename": "http",
                "pattern": "http"
              }
            ],
            "filterEmptyConnections": true,
            "icons": [
              {
                "filename": "java",
                "pattern": "java"
              },
              {
                "filename": "star_trek",
                "pattern": "spok|star trek"
              }
            ],
            "showBaselines": false,
            "showConnectionStats": true,
            "showDebugInformation": false,
            "style": {
              "dangerColor": "rgb(196, 22, 42)",
              "healthyColor": "rgb(87, 148, 242)",
              "noDataColor": "rgb(123, 123, 138)"
            },
            "sumTimings": true,
            "timeFormat": "m"
          },
          "pluginVersion": "4.0.3",
          "targets": [
            {
              "datasource": {
                "type": "simpod-json-datasource",
                "uid": "PB1F47CFFDA9F0787"
              },
              "payload": "",
              "refId": "A",
              "target": "service_initiator_requests_table"
            }
          ],
          "title": "Service Graph",
          "type": "novatec-sdg-panel"
        },
        {
          "datasource": {
            "type": "simpod-json-datasource",
            "uid": "PB1F47CFFDA9F0787"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 11,
            "w": 12,
            "x": 12,
            "y": 2
          },
          "id": 8,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom"
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "simpod-json-datasource",
                "uid": "PB1F47CFFDA9F0787"
              },
              "payload": "",
              "refId": "A",
              "target": "requests_time"
            }
          ],
          "title": "Combined Requests / Second",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "simpod-json-datasource",
            "uid": "PB1F47CFFDA9F0787"
          },
          "description": "This shows the amount of requests on a per service drilled down by the initiator service. This overview provides all necessary information to construct the Service Graph panel.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "custom": {
                "align": "auto",
                "displayMode": "auto",
                "inspect": false
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 10,
            "w": 12,
            "x": 12,
            "y": 13
          },
          "id": 6,
          "options": {
            "footer": {
              "fields": "",
              "reducer": [
                "sum"
              ],
              "show": false
            },
            "showHeader": true
          },
          "pluginVersion": "8.5.0",
          "targets": [
            {
              "datasource": {
                "type": "simpod-json-datasource",
                "uid": "PB1F47CFFDA9F0787"
              },
              "payload": "",
              "refId": "A",
              "target": "service_initiator_requests_table"
            }
          ],
          "title": "Service Initiator Requests ",
          "type": "table"
        }
      ],
      "refresh": "",
      "schemaVersion": 36,
      "style": "dark",
      "tags": [
        "Service Graph",
        "Service Initiator Requests"
      ],
      "templating": {
        "list": []
      },
      "time": {
        "from": "now-6h",
        "to": "now"
      },
      "timepicker": {},
      "timezone": "",
      "title": "Service Requests Graph",
      "uid": "sg",
      "version": 14,
      "weekStart": ""
    }
---
# Source: hawk/templates/grafana-deployment.yaml
apiVersion: v1
kind: Service
metadata:
  name: "my-release-hawk-grafana"
  labels:
    helm.sh/chart: hawk-1.1.5
    app.kubernetes.io/name: hawk
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm
spec:
  type: ClusterIP
  ports:
    - port: 80
      targetPort: 3000
      protocol: TCP
      name: http
  selector:
    app: "my-release-hawk-grafana"
---
# Source: hawk/templates/monitor-service.yaml
apiVersion: v1
kind: Service
metadata:
  name: "my-release-hawk-monitor"
  labels:
    helm.sh/chart: hawk-1.1.5
    app.kubernetes.io/name: hawk
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm
spec:
  type: ClusterIP
  ports:
    - port: 80
      targetPort: http
      protocol: TCP
      name: http
  selector:
    app: "my-release-hawk-monitor"
---
# Source: hawk/templates/postgres-service.yaml
apiVersion: v1
kind: Service
metadata:
  name: "my-release-hawk-postgres"
  labels:
    helm.sh/chart: hawk-1.1.5
    app.kubernetes.io/name: hawk
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm
spec:
  type: ClusterIP
  ports:
    - port: 5432
      targetPort: postgres
      protocol: TCP
      name: http
  selector:
    app: "my-release-hawk-postgres"
---
# Source: hawk/templates/service-service.yaml
apiVersion: v1
kind: Service
metadata:
  name: "my-release-hawk-service"
  labels:
    helm.sh/chart: hawk-1.1.5
    app.kubernetes.io/name: hawk
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm
spec:
  type: ClusterIP
  ports:
    - port: 80
      targetPort: 8080
      protocol: TCP
      name: http
  selector:
    app: "my-release-hawk-service"
---
# Source: hawk/templates/grafana-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: "my-release-hawk-grafana"
  labels:
    helm.sh/chart: hawk-1.1.5
    app.kubernetes.io/name: hawk
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm
spec:
  replicas: 1
  selector:
    matchLabels:
      app: "my-release-hawk-grafana"
  template:
    metadata:
      labels:
        app: "my-release-hawk-grafana"
        sidecar.istio.io/inject: "false"
    spec:
      serviceAccountName: my-release-hawk
      securityContext:
        fsGroup: 472
        runAsUser: 472
        supplementalGroups:
        - 0
      containers:
        - name: "my-release-hawk-grafana"
          securityContext:
            {}
          image: "grafana/grafana:8.5.0"
          imagePullPolicy: IfNotPresent
          env:
          - name: GF_INSTALL_PLUGINS
            value: simpod-json-datasource 0.3.0 , novatec-sdg-panel 4.0.3
          ports:
            - name: http
              containerPort: 3000
              protocol: TCP
          livenessProbe:
            httpGet:
              path: /
              port: http
          readinessProbe:
            httpGet:
              path: /
              port: http
          volumeMounts:
            - mountPath: /etc/grafana/provisioning/datasources
              name: my-release-hawk-grafana-datasources
              readOnly: false
            - mountPath: /var/lib/grafana/dashboards/Hawk
              name: my-release-hawk-grafana-dashboards
              readOnly: false
            - mountPath: /etc/grafana/provisioning/dashboards
              name: my-release-hawk-grafana-providers
            - mountPath: /etc/grafana/grafana.ini
              subPath: grafana.ini
              name: my-release-hawk-grafana-config
              readOnly: true
          resources:
            {}
      volumes:
        - name: my-release-hawk-grafana-config
          configMap:
              defaultMode: 420
              name: my-release-hawk-grafana-config
        - name: my-release-hawk-grafana-datasources
          configMap:
              defaultMode: 420
              name: my-release-hawk-grafana-datasource
        - name: my-release-hawk-grafana-dashboards
          configMap:
              defaultMode: 420
              name: my-release-hawk-grafana-dashboards
        - name: my-release-hawk-grafana-providers
          configMap:
              defaultMode: 420
              name: my-release-hawk-grafana-providers
---
# Source: hawk/templates/monitor-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: "my-release-hawk-monitor"
  labels:
    helm.sh/chart: hawk-1.1.5
    app.kubernetes.io/name: hawk
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm
spec:
  replicas: 1
  selector:
    matchLabels:
      app: "my-release-hawk-monitor"
  template:
    metadata:
      labels:
        app: "my-release-hawk-monitor"
    spec:
      serviceAccountName: my-release-hawk
      securityContext:
        {}
      containers:
        - name: hawk
          securityContext:
            {}
          image: "ghcr.io/privacyengineering/hawk-monitor:master"
          imagePullPolicy: IfNotPresent
          env:
            - name: API_URL
              value: "http://hawk.example.com"
          ports:
            - name: http
              containerPort: 80
              protocol: TCP
          livenessProbe:
            httpGet:
              path: /
              port: http
          readinessProbe:
            httpGet:
              path: /
              port: http
          resources:
            {}
---
# Source: hawk/templates/postgres-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: "my-release-hawk-postgres"
  labels:
    helm.sh/chart: hawk-1.1.5
    app.kubernetes.io/name: hawk
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm
spec:
  replicas: 
  selector:
    matchLabels:
      app: "my-release-hawk-postgres"
  template:
    metadata:
      labels:
        app: "my-release-hawk-postgres"
    spec:
      serviceAccountName: my-release-hawk
      securityContext:
        {}
      containers:
        - name: "my-release-hawk-postgres"
          securityContext:
            {}
          image: "postgres:16.1"
          imagePullPolicy: IfNotPresent
          env:
            - name: POSTGRES_USER
              value: myuser
            - name: POSTGRES_PASSWORD
              value: mysecretpassword
            - name: POSTGRES_DB
              value: mydb
          ports:
            - name: postgres
              containerPort: 5432
              protocol: TCP
          resources:
            {}
---
# Source: hawk/templates/service-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: "my-release-hawk-service"
  labels:
    helm.sh/chart: hawk-1.1.5
    app.kubernetes.io/name: hawk
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm
spec:
  replicas: 1
  selector:
    matchLabels:
      app: "my-release-hawk-service"
  template:
    metadata:
      labels:
        app: "my-release-hawk-service"
    spec:
      serviceAccountName: my-release-hawk
      securityContext:
        {}
      containers:
        - name: "my-release-hawk-service"
          securityContext:
            {}
          image: "ghcr.io/privacyengineering/hawk-service:latest"
          imagePullPolicy: IfNotPresent
          env:
          - name: SPRING_DATASOURCE_URL
            value: "jdbc:postgresql://my-release-postgres.hawk-1.1.5.tgz.svc/mydb"
          - name: SPRING_DATASOURCE_USERNAME
            value: myuser
          - name: SPRING_DATASOURCE_PASSWORD
            value: mysecretpassword
          - name: SPRING_PROFILES_ACTIVE
            value: 
          ports:
            - name: http
              containerPort: 8080
              protocol: TCP
          resources:
            {}
---
# Source: hawk/templates/hawk-ingress.yaml
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: my-release-ingress
  annotations:
    nginx.ingress.kubernetes.io/proxy-body-size: 50m
    nginx.ingress.kubernetes.io/use-regex: "true"
spec:
  ingressClassName: nginx
  rules:
  - host: "hawk.example.com"
    http:
      paths:
      
      - pathType: ImplementationSpecific
        path: "/api/*"
        backend:
          service:
            name: my-release-hawk-service
            port:
              number: 80
      
      - pathType: ImplementationSpecific
        path: "/webjars/*"
        backend:
          service:
            name: my-release-hawk-service
            port:
              number: 80
      
      - pathType: ImplementationSpecific
        path: "/v3/*"
        backend:
          service:
            name: my-release-hawk-service
            port:
              number: 80
      
      - pathType: ImplementationSpecific
        path: "/swagger-ui.html"
        backend:
          service:
            name: my-release-hawk-service
            port:
              number: 80
      
      - pathType: ImplementationSpecific
        path: /grafana/*
        backend:
          service:
            name: my-release-hawk-grafana
            port:
              number: 80
      - pathType: ImplementationSpecific
        path: /*
        backend:
          service:
            name: my-release-hawk-monitor
            port:
              number: 80
