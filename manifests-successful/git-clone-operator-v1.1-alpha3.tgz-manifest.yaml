---
# Source: git-clone-operator/templates/serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
    name: git-clone-operator-sa
    labels:
        helm.sh/chart: git-clone-operator-v1.1-alpha3
        app.kubernetes.io/name: git-clone-operator
        app.kubernetes.io/instance: my-release
        app.kubernetes.io/version: "v1.1-alpha3"
        app.kubernetes.io/managed-by: Helm
---
# Source: git-clone-operator/templates/mutatingwebhookconfiguration.yaml
apiVersion: v1
kind: Secret
metadata:
    name: my-release-git-clone-operator
data:
    tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUQxVENDQXIyZ0F3SUJBZ0lRQ2ZyVFdPYkhVUjBEQWFab3BXcThFekFOQmdrcWhraUc5dzBCQVFzRkFEQXEKTVNnd0pnWURWUVFERXg5bmFYUXRZMnh2Ym1VdGIzQmxjbUYwYjNJdFlXUnRhWE56YVc5dUxXTmhNQjRYRFRJMApNRFl5TURFME5UWTBNbG9YRFRNME1EWXhPREUwTlRZME1sb3dUekZOTUVzR0ExVUVBeE5FYlhrdGNtVnNaV0Z6ClpTMW5hWFF0WTJ4dmJtVXRiM0JsY21GMGIzSXVaMmwwTFdOc2IyNWxMVzl3WlhKaGRHOXlMWFl4TGpFdFlXeHcKYUdFekxuUm5laTV6ZG1Nd2dnRWlNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0SUJEd0F3Z2dFS0FvSUJBUUNvckkvMwpHazh3akI0Z3kvMHRySHFZNVlVb0dEdGhTNUl6bERRT20wZ1JJMFRMUFZjMFhtMEFGTVQvbEtSVURON1pySi9PCmhZNzBFTTNERVU0V0Z1N0VVK2dWVElLeTFxdWJCcTVKWmllaGNTTlVjUXozbVZyV2ZwT3JKR09hU0Z4ZG5yMmgKMkF4SlNFSHpZYnBvMFlZZU9CM0pnN1hvQzJQb1Q1OExIcUYvYXR5dkdnSFJNd09wMXYrZkU5WmVLU05sMkdKOApwUWNLb1cyaXlvQXNGTUZLV1A1VjVMTGQ0ZEJQZjExRzFNMlhJNnFqRDNFc25KVFdCejNCeWZiYitmNlloLzMzCmNtaUxKa1l2WWhidHNNNlhKenZqZXhRRFhIQzcvZjlDbXJZbVprZ3VxYnFjVjVJdVBBTzgrMGpRQnFOK3k5TUEKeDRvcTh3OFRhVGVqd1YzbEFnTUJBQUdqZ2RFd2djNHdEZ1lEVlIwUEFRSC9CQVFEQWdXZ01CMEdBMVVkSlFRVwpNQlFHQ0NzR0FRVUZCd01CQmdnckJnRUZCUWNEQWpBTUJnTlZIUk1CQWY4RUFqQUFNQjhHQTFVZEl3UVlNQmFBCkZISjc1MzNJM2c1cjdWVEJDM1RldlE3K29uUm5NRzRHQTFVZEVRUm5NR1dDUkcxNUxYSmxiR1ZoYzJVdFoybDAKTFdOc2IyNWxMVzl3WlhKaGRHOXlMbWRwZEMxamJHOXVaUzF2Y0dWeVlYUnZjaTEyTVM0eExXRnNjR2hoTXk1MApaM291YzNaamdoMXRlUzF5Wld4bFlYTmxMV2RwZEMxamJHOXVaUzF2Y0dWeVlYUnZjakFOQmdrcWhraUc5dzBCCkFRc0ZBQU9DQVFFQXAzZEFYUkxNeU5RcTdrTnFvbS9UaUhNOGp4SEJQczQrZ2RVZEljRDU4TnBzWFgzd2pTd0UKbWkrUFF0ZUhvbytRbGcvcU9zZ25BYVZoUisxdWYxVmJOUlJVT04yNUoyOEVxUkxzVW5wcGdhM1RQc0hZdzM0NwplaGVlSDFHa1FMNGljMlZQQmRSOGl6TEpUMEtvdytjS2l6dXd5OE1FN3pBek9uUVBhRXlrbGdPUWJkQWNUS2xXCjBSTW1ocUNLYi9MZUR1WTczekFtUHFPTlBmdEFaNnMrSHp4dUJoeEJxNTFMcHFRVmdwMzBOcFYybUVzaUdoYkMKMHVWa0lodDlmQWpSM01mdWNhcHBYbVRyU29UQXZSQzNsYTBVdU00UkFQeGV0MmZZTVg3ZlNyMFJITkdjaFRjcgpmcHRqd0x5Qi9URndwQnRKOFJpRGx1YVhEeGhvVmZRQlRnPT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=
    tls.key: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcEFJQkFBS0NBUUVBcUt5UDl4cFBNSXdlSU12OUxheDZtT1dGS0JnN1lVdVNNNVEwRHB0SUVTTkV5ejFYCk5GNXRBQlRFLzVTa1ZBemUyYXlmem9XTzlCRE53eEZPRmhidXhGUG9GVXlDc3Rhcm13YXVTV1lub1hFalZIRU0KOTVsYTFuNlRxeVJqbWtoY1haNjlvZGdNU1VoQjgyRzZhTkdHSGpnZHlZTzE2QXRqNkUrZkN4NmhmMnJjcnhvQgowVE1EcWRiL254UFdYaWtqWmRoaWZLVUhDcUZ0b3NxQUxCVEJTbGorVmVTeTNlSFFUMzlkUnRUTmx5T3Fvdzl4CkxKeVUxZ2M5d2NuMjIvbittSWY5OTNKb2l5WkdMMklXN2JET2x5Yzc0M3NVQTF4d3UvMy9RcHEySm1aSUxxbTYKbkZlU0xqd0R2UHRJMEFhamZzdlRBTWVLS3ZNUEUyazNvOEZkNVFJREFRQUJBb0lCQVFDb21DTW1HRFFERUdxawoyWUJzZ0xQaDA3aHV4Um5GUEdZY0RBeWtkTzFwdzlqbFZLQ3ZoWnBwdEZqY0pkVEM5a0poVEx4SER4UStPL1dPCi91TVFEVWdIRU44dk90U0FzVFhCdE1ITU44RnhDc2NIaGlBeDlDVHB0SWNoVHpRSGFFQjZpMHA4VkppalB3ZzgKbnZoV0FPZVBtUU9kQW50MlByeFQzaEhZYVh0L0FNK0s4N3NSc1RvaTYxWWQxTzg5Q1BYUGJ3RVpTNzcxMVVUaApENWRlMUtDRC9ZSkIxWXBuSEorTWhmbTV0UkxzV2lzNHNSSFMweHpacUlvZHNFdkt4QW1Ick5jZ1J2ZnNxSzhaCmpaQVJPZ3pHd09IT2ZITFhTWkNVK0QzNk90WFVPOVVteXprQnRGWkhPdGxEbXY5TjNQMzhKeEJYdTB3NjJyNE8KTHYyOElJMVpBb0dCQU1sWW9ER1RtcFZJVXpxaVRvTTk3TUFwakJYZE12QzIzQUhmd0JRbUE3N0FFS1R0cldjTwp2M0pQck5xeldGK0kwK2JuRG9rZ0tKbG05MytWWjZsTzArbkxYSW1HTzNRdjZmNUN0VXdwVWtlbTJ5UGhlVWpjCnZRVEdPRnNtdThpTExldU4yLzlsczNiZkFhSGxab0tkZjUyYkh6ZGZWMXAzbFhJc3RSM0RHTG5YQW9HQkFOWjEKbEM5UFVEWVd4WW1vcG1wdS8ycysxOGh2cDZSWTFjajNvaDFlYlY0RVlxSTlhSHRXRFNiYU5wUU4yZmhqR0p1eQpjMzcyUG5GOEgrSktZMmd6TmJaV1l5b3JaSzJEVGw1SkR2U21mT2grN1NaU1VQTVprWHgxSzc4Z2tLcGdSY3JSCkZ3UUFQbU5vSEN2T3kzdXk3OFpSRkdGTHpvTEs4MmVMaGw2Wm1BYWpBb0dBSVpxekVkTXF4Nk9Na0lxcVEray8KN0VxQzROdE1OelN0djNwU21vcEZzYjVvaUw1S1pKcm5oUEtiVE4wRjhOdnJVZXhhVnJTUlVoa0hVYm5qMVRRYwoxalprdVdjMzRRcG1LVk9FNHJNNjBrNmM0SDR2T2VQdGdEQjlFMm1CaWRVQTB3R1lLQ1lYTDgzRWZmckZneU02Ck8xbTZlZ2xsa09uSWZZZk1xcXozSVgwQ2dZRUFsdFhQeVk2UkxkbktTYzNTYmgxdmkvQ0JPRG8vd0hteXMweG8KT3h2RTlGRkZSakxHbjZpZ1MybEM1ZEx3TWFFUkY4RGxOckRlcmxiTTNnM1A2T1BMclZrSkdnbTNIOHF3ZmVRSQpuczNTSUh2Vk5CVEZWcFh2RzRnVm9yRzJ6ZjQwV0RmRFprNzlrbEVSTDBhZEczMTQ0eFQzcm83d3lsRVA3UTNYCkRnWWRSTjBDZ1lCN04vUXFqelZPM1RHMDBia1BFdGY5eXc1ajR6OTV0RURlcSs1Wk8rVFJsOXlhRkY2c0ZLNFMKRks1eGY5L05OMTFJTlMwZDJ2WVpNVXRFSVh1cEM3RHlXOVIrRWlNNHphOG5ZSllKbGVxSm8yRml1b1QxSHhseAptditqNEgyTFErcDhXZUlDVVh4V1N1d3dWZnZGRmlIZGFpTUcrdWdLcmJMQTA0UDBuUEJYamc9PQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo=
type: kubernetes.io/tls
---
# Source: git-clone-operator/templates/role.yaml
kind: ClusterRole
apiVersion: rbac.authorization.k8s.io/v1
metadata:
    name: my-release-git-clone-operator
rules:
    # parsing incoming requests
    - apiGroups:
          - ""
      resources:
          - pods
      verbs:
          - get
          - list
          #- update

    # injecting secrets into target namespace
    - apiGroups:
          - ""
      resources:
          - secrets
      verbs:
          - get
          - list
          - create
          - update
          - delete
          #- update
---
# Source: git-clone-operator/templates/role.yaml
kind: ClusterRoleBinding
apiVersion: rbac.authorization.k8s.io/v1
metadata:
    name: my-release-git-clone-operator
roleRef:
    apiGroup: rbac.authorization.k8s.io
    kind: ClusterRole
    name: my-release-git-clone-operator
subjects:
    - kind: ServiceAccount
      name: git-clone-operator-sa
      namespace: git-clone-operator-v1.1-alpha3.tgz
---
# Source: git-clone-operator/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
    name: my-release-git-clone-operator
    labels:
        helm.sh/chart: git-clone-operator-v1.1-alpha3
        app.kubernetes.io/name: git-clone-operator
        app.kubernetes.io/instance: my-release
        app.kubernetes.io/version: "v1.1-alpha3"
        app.kubernetes.io/managed-by: Helm
spec:
    type: ClusterIP
    ports:
        - port: 8080
          targetPort: http
          protocol: TCP
          name: http

        - port: 4443
          targetPort: https
          protocol: TCP
          name: https
    selector:
        app.kubernetes.io/name: git-clone-operator
        app.kubernetes.io/instance: my-release
---
# Source: git-clone-operator/templates/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
    name: my-release-git-clone-operator
    labels:
        helm.sh/chart: git-clone-operator-v1.1-alpha3
        app.kubernetes.io/name: git-clone-operator
        app.kubernetes.io/instance: my-release
        app.kubernetes.io/version: "v1.1-alpha3"
        app.kubernetes.io/managed-by: Helm
spec:
    replicas: 1
    selector:
        matchLabels:
          app.kubernetes.io/name: git-clone-operator
          app.kubernetes.io/instance: my-release
    template:
        metadata:
            labels:
                app.kubernetes.io/name: git-clone-operator
                app.kubernetes.io/instance: my-release
        spec:
            terminationGracePeriodSeconds: 5
            serviceAccountName: git-clone-operator-sa
            securityContext:
              fsGroup: 65161
              runAsGroup: 65161
              runAsNonRoot: true
              runAsUser: 65161
            containers:
                - name: webhook-handler
                  image: ghcr.io/riotkit-org/git-clone-operator:v1.1-alpha3
                  imagePullPolicy: Always
                  args: ["serve", "--tls", "--default-image", "ghcr.io/riotkit-org/git-clone-operator:v1.1-alpha3"]
                  env:
                      - name: LOG_JSON
                        value: "false"
                      - name: LOG_LEVEL
                        value: "debug"
                  volumeMounts:
                      - name: tls
                        mountPath: "/etc/admission-webhook/tls"
                        readOnly: true
                  ports:
                      - name: http
                        containerPort: 8080
                        protocol: TCP
                      - name: https
                        containerPort: 4443
                        protocol: TCP
                  livenessProbe:
                      failureThreshold: 1
                      httpGet:
                          path: /health
                          scheme: HTTPS
                          port: https
                  readinessProbe:
                      httpGet:
                          path: /health
                          scheme: HTTPS
                          port: https
                  resources:
                    limits:
                      cpu: 1
                      memory: 128Mi
                    requests:
                      cpu: 0
                      memory: 16Mi
            volumes:
                - name: tls
                  secret:
                      secretName: my-release-git-clone-operator
---
# Source: git-clone-operator/templates/mutatingwebhookconfiguration.yaml
apiVersion: admissionregistration.k8s.io/v1
kind: MutatingWebhookConfiguration
metadata:
    name: my-release-git-clone-operator
    namespace: git-clone-operator-v1.1-alpha3.tgz
    labels:
        helm.sh/chart: git-clone-operator-v1.1-alpha3
        app.kubernetes.io/name: git-clone-operator
        app.kubernetes.io/instance: my-release
        app.kubernetes.io/version: "v1.1-alpha3"
        app.kubernetes.io/managed-by: Helm
webhooks:
    - name: my-release-git-clone-operator.git-clone-operator-v1.1-alpha3.tgz.svc.cluster.local
      failurePolicy: Fail
      objectSelector:
          matchLabels:
              riotkit.org/git-clone-operator: "true"
      rules:
          - apiGroups: [""]
            apiVersions: ["v1"]
            operations: ["CREATE"]
            resources: ["pods"]
            scope: "*"
      clientConfig:
          service:
              namespace: git-clone-operator-v1.1-alpha3.tgz
              name: my-release-git-clone-operator
              path: /mutate-pods
              port: 4443
          caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURQekNDQWllZ0F3SUJBZ0lRS0R2THE0Q3ZCd3VHUjgxdWhUNnJXakFOQmdrcWhraUc5dzBCQVFzRkFEQXEKTVNnd0pnWURWUVFERXg5bmFYUXRZMnh2Ym1VdGIzQmxjbUYwYjNJdFlXUnRhWE56YVc5dUxXTmhNQjRYRFRJMApNRFl5TURFME5UWTBNVm9YRFRNME1EWXhPREUwTlRZME1Wb3dLakVvTUNZR0ExVUVBeE1mWjJsMExXTnNiMjVsCkxXOXdaWEpoZEc5eUxXRmtiV2x6YzJsdmJpMWpZVENDQVNJd0RRWUpLb1pJaHZjTkFRRUJCUUFEZ2dFUEFEQ0MKQVFvQ2dnRUJBT2V1cWQ3V2Q5UFR5VXBhRHlkRzVpYm1QMjdBUUgvRHV0WE1RYjVKNlN2blFWejBlcFNsbVJiMQpkY2ZLNHBnK0I5MTlUN2UxdTZINWtTMk4wRDNQWk9iTElrSUt0d040Z0g3UWROdFVHcVBlRlhhL1dLOG9mUXJxClBhd3NaS0lLWXdQQ0FBMG5EUjc4RDJBRDl5V3Jad3VObFR2NXFYczQva3JEbnNYOE1sMUxJRHYvcXJMMGlpL0UKZytNeFl4MnRDOHpWSVczWmVxNE51ZmhGcFdwZjRjYzh2cDhCWSsvS0hwQVN1Z1lmYjhWalZZWUpGUnRnb3o1Rgo0S1h6ekwyd3NBS0QrL0ZnZWE4M0FWUXBHTmFuQXpWQUlrakhOUWJhUWs4N2JVWE9hUEM2UU9xNEtPYWV2blNWCm9PUVpTOGk3a0hqQ1RPbEZjcTBkL3RNZzVnaVJiWUVDQXdFQUFhTmhNRjh3RGdZRFZSMFBBUUgvQkFRREFnS2sKTUIwR0ExVWRKUVFXTUJRR0NDc0dBUVVGQndNQkJnZ3JCZ0VGQlFjREFqQVBCZ05WSFJNQkFmOEVCVEFEQVFILwpNQjBHQTFVZERnUVdCQlJ5ZStkOXlONE9hKzFVd1F0MDNyME8vcUowWnpBTkJna3Foa2lHOXcwQkFRc0ZBQU9DCkFRRUFLajR4cjdmNjkxZzdBL2ZxTW5jVXVhTzRzVnUyakFDdUNCSXhOeEs2VlZQaTRFM0NxdWNKRlNjbURkb0gKUUR0aG9aODVXSXlLcmZzdUtiOGxxU1lmYUx1dWtSN1BDZFRPVnhEb0FkZ05jRllnb2h6WGRIanlCUnUrRXVORAoxMFdoS05VdWhoMW95Z1M0NHkwNmZ2L3FQTnpjeDRWdGhBMEhrWFFIdU42QmorWWxhaGFHZDhVVUJ0S1ZObEtvCmFuMndSQ3ltR2lsK2w0eFp5cGZQOUI0Ui8rSVNqcmIzV2dzWkVOZU8wV1p1YVN4T1RKclRTMDROUW5VRWtWMFoKU1lqWDdoSzhuU05sWC9FUVpXSStSNUt3QVMzUjViQWhIQit6SDBpWE1RZ0pRNzdQaXlTb2RiZU4xKzZDaTZmdApMYWp6YjRFQ1VhZ013NittVGp0SXF5TlAzQT09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
      admissionReviewVersions: ["v1"]
      sideEffects: NoneOnDryRun
      timeoutSeconds: 2
