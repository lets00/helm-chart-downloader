---
# Source: fargate-sidecar-injector/templates/serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: fargate-sidecar-injector
  labels:
    helm.sh/chart: fargate-sidecar-injector-0.1.5
    app.kubernetes.io/name: fargate-sidecar-injector
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm
---
# Source: fargate-sidecar-injector/templates/mutatingwebhook.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: fargate-sidecar-injector
  labels:
    helm.sh/chart: fargate-sidecar-injector-0.1.5
    app.kubernetes.io/name: fargate-sidecar-injector
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm
data:
  fargatesidecarinjector.conf: |-
    serve:
        port: 8443
        host: ""
        tls:
          enabled: true
          cert: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUVFakNDQXZxZ0F3SUJBZ0lRY0svcXlYaVdzWXJwbzRzSTNWT3QxekFOQmdrcWhraUc5dzBCQVFzRkFEQW0KTVNRd0lnWURWUVFERXh0bVlYSm5ZWFJsTFhOcFpHVmpZWEl0YVc1cVpXTjBiM0l0WTJFd0hoY05NalF3TmpJdwpNVFExTmpJNVdoY05NelF3TmpFNE1UUTFOakk1V2pBak1TRXdId1lEVlFRREV4aG1ZWEpuWVhSbExYTnBaR1ZqCllYSXRhVzVxWldOMGIzSXdnZ0VpTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElCRHdBd2dnRUtBb0lCQVFDcGJ3ZW0KdnpwTlJsaE12aWQ3UDdtNGRDaU5aYXp4a3dtTVZMUC9vRzNHcmZZS3FHaVlYU1pqZm8xOU8vRU1VYVFaUXArNwpKVGhFUkhwVGpaWWdvMktJUTQwWEpVaERoU3cxaHVLbWhWT0ZvcnNVdDhmbXZmZWFLaUZySGsvUVk2U0w0YTM5CnRvamhMZzlqYjl5YmMrUDc4bEFMZytXVVhvQVFSZG5FSC9JN1hFRXg3Y2hpNlQyRi9MT3JZTHREdVV1MzlPcm0KYzMzWThaZXFwN3pmYnJuZVI0Q0wvak9RSklqbkZ6a2k2VDNjR3MrTnZESHBNcDZEU2VQMDF4RzFyaGdXbkRTZgp4eVQyTTk2eTI5dGl0eFlMbStSVWhUb0ZudmxSL1BVZmZtWjU4OVlsZm9BeERmY21GVVpaMFYwV1gyUFBUMHZmCk1hLzBWZkNxR2FmL2tNTVBBZ01CQUFHamdnRTlNSUlCT1RBT0JnTlZIUThCQWY4RUJBTUNCYUF3SFFZRFZSMGwKQkJZd0ZBWUlLd1lCQlFVSEF3RUdDQ3NHQVFVRkJ3TUNNQXdHQTFVZEV3RUIvd1FDTUFBd0h3WURWUjBqQkJndwpGb0FVYVlQb3UzRUlFQTJxNkV6YTM2bitlVnI1NWJZd2dkZ0dBMVVkRVFTQjBEQ0J6WUk3Wm1GeVoyRjBaUzF6CmFXUmxZMkZ5TFdsdWFtVmpkRzl5TG1aaGNtZGhkR1V0YzJsa1pXTmhjaTFwYm1wbFkzUnZjaTB3TGpFdU5TNTAKWjNxQ1AyWmhjbWRoZEdVdGMybGtaV05oY2kxcGJtcGxZM1J2Y2k1bVlYSm5ZWFJsTFhOcFpHVmpZWEl0YVc1cQpaV04wYjNJdE1DNHhMalV1ZEdkNkxuTjJZNEpOWm1GeVoyRjBaUzF6YVdSbFkyRnlMV2x1YW1WamRHOXlMbVpoCmNtZGhkR1V0YzJsa1pXTmhjaTFwYm1wbFkzUnZjaTB3TGpFdU5TNTBaM291YzNaakxtTnNkWE4wWlhJdWJHOWoKWVd3d0RRWUpLb1pJaHZjTkFRRUxCUUFEZ2dFQkFMcFRJb0I5QXdDV3pDdVNXazdxVU9OR29ydzFGM2NmWFVMbApIRmUwdFB4eUdwRXRyZ1p2OFhyQmUrWEtiWXd5RGhxem90UURrS1luM0ZHNGtJU1RLK0k0QSsyYjdpOUg3V3FSCmNnRE12YUowa2svN215Qy9DWmRzeUhXbnhWWnFkcHRnYU15T1Vtd29XL3VUeldLZ2J0RFNLUFBxbXVncnJUK0sKNHg0K2ZXYllTNTZlYUtjTjJ4WDQwS3lLOEdzTktJRGZGUnhuSytzMUxwZmtjZm4yVkdRNWZTTFNNdzg4ZGdCVAo4d09uamw2OW5DYTF1dU0zR01ZRnJ3KzR1WFhqckFYRVl4aFo2K21vS05QR0puUmcvNFpqcjVxaGlQTlJxajI5CjNoSkIwT1JTYmtTMDF3RGNGQXRudEloTkJ5SDQvWU1zZXBkYjR4K3g2eGpnOUE2bGxmOD0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=
          certKey: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFb3dJQkFBS0NBUUVBcVc4SHByODZUVVpZVEw0bmV6KzV1SFFvaldXczhaTUpqRlN6LzZCdHhxMzJDcWhvCm1GMG1ZMzZOZlR2eERGR2tHVUtmdXlVNFJFUjZVNDJXSUtOaWlFT05GeVZJUTRVc05ZYmlwb1ZUaGFLN0ZMZkgKNXIzM21pb2hheDVQMEdPa2krR3QvYmFJNFM0UFkyL2NtM1BqKy9KUUM0UGxsRjZBRUVYWnhCL3lPMXhCTWUzSQpZdWs5aGZ5enEyQzdRN2xMdC9UcTVuTjkyUEdYcXFlODMyNjUza2VBaS80emtDU0k1eGM1SXVrOTNCclBqYnd4CjZUS2VnMG5qOU5jUnRhNFlGcHcwbjhjazlqUGVzdHZiWXJjV0M1dmtWSVU2Qlo3NVVmejFIMzVtZWZQV0pYNkEKTVEzM0poVkdXZEZkRmw5anowOUwzekd2OUZYd3FobW4vNURERHdJREFRQUJBb0lCQUZLMDd5QTNZb2RNR2xoRAp6bFA4ZEhVVXhxTFhDZ2ZXUmFmcHhQKzRXVDNOdHpmV28xQVUwR05xNkRoRXBWTGxHMXgxU0RGN1pxNzBXbDRrCjFDN1Vjb21mcCtTdmYwbnVYUGs0QWJWVmljTEcvOW1LS0p0N0NiMklhVTIzdXpBM0k2QmdwcVVka0UyVFJWRzkKemd0WUUrYnRqcU5BWERZRHR6RzZWeVhFam1Mb3gxQUlON0xTaEw0UFhpTmJmUUs3dTUvODJyZ3hTS0ljTHp2RApNM1R6a1JabnJWcGV6bVA1clR2ZnM1ZkV0KzJNa2Z1eEZiLzRxS3VHc3JtdXE3VEVETkkvYzhDbHdrblV4ZjBFClJtc1IwUGNZem9QNkxsbFJCd0ZqSjYyYUxrVlc1a256d1FYQ3FFVXlWdVZTZVMvMVNSOGNaNVdma3AwWUQ3NWgKR3ZrZWRURUNnWUVBMUhCTnp1eUVDbkt1SnJTSXVURVVlZkxia1M3a3FKdU90WjllUTJseTN0eDQ4bENITUMwTgpjdkdUNXdaV01HZ0ZLNWRWSFA1Nnh1UUZxcFhzRC9nMXYyWkJSS0VaRDZkOHAyOTdvZ0pLRzd6S20zR2N4MGhBCnpPUUUzNXFWSERvL1JibC9uMGJacUh2K3ZBSVFrajJxM2dNZ3ZhTnpiaFJqRml3dzUzdElqQWNDZ1lFQXpDMDgKSS9wbUVUYVlpNzM1aXViTEpiYzhQQTl3U2k1NHRkc29jb21uTlJhdnhkc0ZQMFVJZnZubUVxSk9PRGt0RFFHRwpkb2NpaGV6NU1XZk9LZUE3M0ZqMzdQWVF4SHJqT3MxR3pDakFqWkRrMkdhRDlBMVczM2YyYlZSdlRnT0UzNnRaClhrUVlub2N0WnU5L0w1Tk1RSy9kbllKcTljS1RNaVVjQXZrL1hya0NnWUVBc3dGNm51enZDanErQWtGSG4vejYKU3hQWDdnczhnOUtvT3VSeU1vMk5UTHNzY3NwbVQ3TDJ6UzlBdUgrL2FvU01Mc0lTNXg2TDZFSEZnSXRaNGM3OQp3eXp2dkZ1ZTJYRUErYmxYelJqdXgxYWF4c2JDRzY0SFpGNlN1TFB5QjFvUmJMZzFFTXBMcDh2cnh4SmFVbEFDClJaY1BKSnl4TEVXamhOQngyT3dxSWtzQ2dZQUVCenh4aFVZd1BzQ0J1VXpNRmNPYVNlUXhWeWlpL2dtNXBNcEcKZ0RyQlRHSkphQW5SZHI0MUt4OEQ3Um5YK0NEUWFlQktSRjVGQUNqbWRhTFdwcXJuclFXdk1pZWdpTUFrNzluZQp1MHNaUCt1VDdXbmJEY3hSK2w3dFIwWXU1dGpmUk5VdGkvQmthRXhZQkkrZzA2b2tlSlBKd01IMWVWSklJZjFNCmZiaG5XUUtCZ0FpekYzMWtaeElRYmR5ajRWWDJtaEZJNVg0ZUJzVkZ6VTd2ZW9QNUIzU0ZDOVVXcjJJNlJTeDYKS1hKdjMzQ1g3RjJubUNDWFZQZW01dkc2S29tMjZnV1RkUjRJQnArenBuMlJ4cmFpZjZoTHY4SUZXRm5VL3lreAptekpJNUw1ZlpPb0NJVXZaTDZnMFdMdW5uOVFvTWpSYUM4ME8wWDhBcmhROEptRERqazBkCi0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0tCg==
          ca: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURPRENDQWlDZ0F3SUJBZ0lSQUthWDNqaWtHUW92QlBuWTM2aTV1Zm93RFFZSktvWklodmNOQVFFTEJRQXcKSmpFa01DSUdBMVVFQXhNYlptRnlaMkYwWlMxemFXUmxZMkZ5TFdsdWFtVmpkRzl5TFdOaE1CNFhEVEkwTURZeQpNREUwTlRZeU9Wb1hEVE0wTURZeE9ERTBOVFl5T1Zvd0pqRWtNQ0lHQTFVRUF4TWJabUZ5WjJGMFpTMXphV1JsClkyRnlMV2x1YW1WamRHOXlMV05oTUlJQklqQU5CZ2txaGtpRzl3MEJBUUVGQUFPQ0FROEFNSUlCQ2dLQ0FRRUEKeG9QSzNCb0Q2OFpHL1BFMzZ5WDFaZmRQVEhISGF3UjJyZWNNTFRnTzdMS3BFVFJETTFyL25QVzZ2WGhoNGxDQQo4UzVHSnlEMGdvbHBJaG5DeVRhNUI3UHRTOHNtbUN3NFpBaGRiMjY3ZEM4ZDdDT3pPNDZxeGRKaXFza2dOcnZaCmp6MVhlOTRMMzVDZkFXSkRsZ3B6b24zenhZSXBmZE1aT0o3M2YzUjNFMEs2Q1pwLzNvOFlEWU5ZbmErYWQ2c0QKSWlUVXBhWVhQUnhodW9XRjBQNTRPTG1mdHNUNWxQMFBWMXIrSGpPRUpGMHM1U0hiRlZLNWoxb01GYmRKYk5hagptZDh0YzAyaHVMZ1g1ZUpzRHFwcG4zSitnQnpWakRFV3V4VWpkZDBrNGxxbmNzVGhaak1LSktZSjZ5a1praEY4CmpZUElsZWVkM0ZJSUFXRHVvTitSWlFJREFRQUJvMkV3WHpBT0JnTlZIUThCQWY4RUJBTUNBcVF3SFFZRFZSMGwKQkJZd0ZBWUlLd1lCQlFVSEF3RUdDQ3NHQVFVRkJ3TUNNQThHQTFVZEV3RUIvd1FGTUFNQkFmOHdIUVlEVlIwTwpCQllFRkdtRDZMdHhDQkFOcXVoTTJ0K3AvbmxhK2VXMk1BMEdDU3FHU0liM0RRRUJDd1VBQTRJQkFRQXlYanNlCm9KZ0xBTEpucGwvVTRkVXM0a28yYWZ1eG03dk9iSmFqZVp6aFd5dFVtcDVOcG50aVp1cGQ0b3phSXBmQ1pnQVkKeng2eHNHc05tOFlqamwwdmJzemxCb2lSZ2xwTXcyaG1KclNVSkFWWlBWVVdZcFF0aENWUGY2aUJha2tQeGUzRApuMDg2aDU2aXQ1UDdqVWZNSlczUkgyNm9OSkVkZk9MOXpwWkR0SDZNd1dFVEpWZ0F1UGhOQi9QWE1GMXNQalpQClA1dVBQWTlIQ0dmdmRRSzdKbXJFWTlOaS96NUNUWGJibXlNeFFDQm93MnB6M2ZlYS9WNkp6SlppaExwa3c2ODEKSmFOZGJ0dUNRVzVBOCtmTXl3WlpVelhrQ3d3NnF3aGw0b0Nza1Awb1gxR3BWWFdkL2hwcDUrTEhzUDREL1NIcAppU0EwQ1piM2RuaFVsd2thCi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
---
# Source: fargate-sidecar-injector/templates/clusterrolebinding.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  annotations:
  labels:
    helm.sh/chart: fargate-sidecar-injector-0.1.5
    app.kubernetes.io/name: fargate-sidecar-injector
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm
  name: fargate-sidecar-injector
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: cluster-admin
subjects:
- kind: ServiceAccount
  name: fargate-sidecar-injector
  namespace: fargate-sidecar-injector-0.1.5.tgz
---
# Source: fargate-sidecar-injector/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: fargate-sidecar-injector
  labels:
    helm.sh/chart: fargate-sidecar-injector-0.1.5
    app.kubernetes.io/name: fargate-sidecar-injector
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm
spec:
  type: ClusterIP
  ports:
    - port: 8443
      targetPort: 8443
      protocol: TCP
      name: http
    - name: https
      port: 443
      protocol: TCP
      targetPort: 8443
  selector:
    app.kubernetes.io/name: fargate-sidecar-injector
    app.kubernetes.io/instance: my-release
---
# Source: fargate-sidecar-injector/templates/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: fargate-sidecar-injector
  labels:
    helm.sh/chart: fargate-sidecar-injector-0.1.5
    app.kubernetes.io/name: fargate-sidecar-injector
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: fargate-sidecar-injector
      app.kubernetes.io/instance: my-release
  template:
    metadata:
      labels:
        app.kubernetes.io/name: fargate-sidecar-injector
        app.kubernetes.io/instance: my-release
    spec:
      serviceAccountName: fargate-sidecar-injector
      securityContext:
        {}
      containers:
        - name: fargate-sidecar-injector
          securityContext:
            {}
          image: "mziyabo/fargate-eks-sidecar-injector:latest"
          imagePullPolicy: Always
          ports:
            - name: http
              containerPort: 8443
              protocol: TCP
          # livenessProbe:
          #   httpGet:
          #     path: /
          #     port: 8443
          # readinessProbe:
          #   httpGet:
          #     path: /
          #     port: 8443
          resources:
            limits:
              cpu: 1
              memory: 1Gi
            requests:
              cpu: 500m
              memory: 512Mi
          env:
          - name: WEBHOOK_NAMESPACE
            valueFrom:
              fieldRef:
                fieldPath: metadata.namespace
          volumeMounts:
          - name: "config"
            mountPath: "/etc/fargatesidecarinjector/"
      volumes:
      - name: config
        configMap:
          name: fargate-sidecar-injector
---
# Source: fargate-sidecar-injector/templates/tests/test-connection.yaml
apiVersion: v1
kind: Pod
metadata:
  name: "my-release-fargate-sidecar-injector-test-connection"
  labels:
    helm.sh/chart: fargate-sidecar-injector-0.1.5
    app.kubernetes.io/name: fargate-sidecar-injector
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm
  annotations:
    "helm.sh/hook": test
spec:
  containers:
    - name: wget
      image: busybox
      command: ['wget']
      args: ['my-release-fargate-sidecar-injector:8443']
  restartPolicy: Never
---
# Source: fargate-sidecar-injector/templates/mutatingwebhook.yaml
apiVersion: admissionregistration.k8s.io/v1
kind: MutatingWebhookConfiguration
metadata:
  name: fargate-sidecar-injector
  annotations:
    "helm.sh/hook": post-install
    "helm.sh/hook-weight": -5"
  labels:
    helm.sh/chart: fargate-sidecar-injector-0.1.5
    app.kubernetes.io/name: fargate-sidecar-injector
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm
webhooks:
  - name: "fargate-sidecar-injector.default.svc"
    failurePolicy: Fail
    sideEffects: None
    admissionReviewVersions: ["v1","v1beta1"]
    clientConfig:
      service:
        namespace: fargate-sidecar-injector-0.1.5.tgz
        name: fargate-sidecar-injector
        path: /mutate
      caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURPRENDQWlDZ0F3SUJBZ0lSQUthWDNqaWtHUW92QlBuWTM2aTV1Zm93RFFZSktvWklodmNOQVFFTEJRQXcKSmpFa01DSUdBMVVFQXhNYlptRnlaMkYwWlMxemFXUmxZMkZ5TFdsdWFtVmpkRzl5TFdOaE1CNFhEVEkwTURZeQpNREUwTlRZeU9Wb1hEVE0wTURZeE9ERTBOVFl5T1Zvd0pqRWtNQ0lHQTFVRUF4TWJabUZ5WjJGMFpTMXphV1JsClkyRnlMV2x1YW1WamRHOXlMV05oTUlJQklqQU5CZ2txaGtpRzl3MEJBUUVGQUFPQ0FROEFNSUlCQ2dLQ0FRRUEKeG9QSzNCb0Q2OFpHL1BFMzZ5WDFaZmRQVEhISGF3UjJyZWNNTFRnTzdMS3BFVFJETTFyL25QVzZ2WGhoNGxDQQo4UzVHSnlEMGdvbHBJaG5DeVRhNUI3UHRTOHNtbUN3NFpBaGRiMjY3ZEM4ZDdDT3pPNDZxeGRKaXFza2dOcnZaCmp6MVhlOTRMMzVDZkFXSkRsZ3B6b24zenhZSXBmZE1aT0o3M2YzUjNFMEs2Q1pwLzNvOFlEWU5ZbmErYWQ2c0QKSWlUVXBhWVhQUnhodW9XRjBQNTRPTG1mdHNUNWxQMFBWMXIrSGpPRUpGMHM1U0hiRlZLNWoxb01GYmRKYk5hagptZDh0YzAyaHVMZ1g1ZUpzRHFwcG4zSitnQnpWakRFV3V4VWpkZDBrNGxxbmNzVGhaak1LSktZSjZ5a1praEY4CmpZUElsZWVkM0ZJSUFXRHVvTitSWlFJREFRQUJvMkV3WHpBT0JnTlZIUThCQWY4RUJBTUNBcVF3SFFZRFZSMGwKQkJZd0ZBWUlLd1lCQlFVSEF3RUdDQ3NHQVFVRkJ3TUNNQThHQTFVZEV3RUIvd1FGTUFNQkFmOHdIUVlEVlIwTwpCQllFRkdtRDZMdHhDQkFOcXVoTTJ0K3AvbmxhK2VXMk1BMEdDU3FHU0liM0RRRUJDd1VBQTRJQkFRQXlYanNlCm9KZ0xBTEpucGwvVTRkVXM0a28yYWZ1eG03dk9iSmFqZVp6aFd5dFVtcDVOcG50aVp1cGQ0b3phSXBmQ1pnQVkKeng2eHNHc05tOFlqamwwdmJzemxCb2lSZ2xwTXcyaG1KclNVSkFWWlBWVVdZcFF0aENWUGY2aUJha2tQeGUzRApuMDg2aDU2aXQ1UDdqVWZNSlczUkgyNm9OSkVkZk9MOXpwWkR0SDZNd1dFVEpWZ0F1UGhOQi9QWE1GMXNQalpQClA1dVBQWTlIQ0dmdmRRSzdKbXJFWTlOaS96NUNUWGJibXlNeFFDQm93MnB6M2ZlYS9WNkp6SlppaExwa3c2ODEKSmFOZGJ0dUNRVzVBOCtmTXl3WlpVelhrQ3d3NnF3aGw0b0Nza1Awb1gxR3BWWFdkL2hwcDUrTEhzUDREL1NIcAppU0EwQ1piM2RuaFVsd2thCi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
    rules:
      - apiGroups: [""]
        resources:
          - "pods"
        apiVersions:
          - "*"
        operations:
          - CREATE
          - UPDATE
