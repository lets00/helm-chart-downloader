---
# Source: inbox-agent/templates/rbac/serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: my-release-inbox-agent
  namespace: inbox-agent-v2024.5.3.tgz
  labels:
    helm.sh/chart: inbox-agent-v2024.5.3
    app.kubernetes.io/name: inbox-agent
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "v0.0.1"
    app.kubernetes.io/managed-by: Helm
---
# Source: inbox-agent/templates/operator/config.yaml
apiVersion: v1
kind: Secret
metadata:
  name: my-release-inbox-agent-config
  namespace: inbox-agent-v2024.5.3.tgz
  labels:
    helm.sh/chart: inbox-agent-v2024.5.3
    app.kubernetes.io/name: inbox-agent
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "v0.0.1"
    app.kubernetes.io/managed-by: Helm
type: Opaque
stringData:
  endpoint: http://james.appscode.ninja/jmap/session
  token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ0ZXN0dXNlcjEub3JnQG15ZG9tYWluIiwiaWF0IjoxNjE2MjM5MDIyLCJleHAiOjE5NDYyMzkwMjJ9.ZQuDcCFyccpSvAtp0M88TeATePlx4Gvs97_asg75cn46Xkoe-ENVYM-N_ZeWs8G7joxCQS2R2BOQ1LPXY7rFYubEA1Ne8xMMJvS6LW8NktdYrSUZm3J7oyeC6K42cHqYlspK2RaiUl-XKaxy0J38p9MhIKvzOETTEpaABFNp5MplNqkVoAnYnOnF8Ez7AfoCnieBuxmR_qmZpRNdl6XXpoyoihv0azY2RxAyk6uRrnNbzirICuthnkFdllPrbffTcRk9NXkV9PyGlmdAVczxeUADIpd2WMWyoB3yFVe4s1dl9UQp7QsJqpBUUuY3LhE295PwzGDq5WKMWzdII55N2BnVe9LS33GXMU9oGgWqpBmxrTzSwc-jiewhorcc32keXkrxhtxL1uNXuYzg2lqFv7he7aTKWowkI2MJVXLhUN-xpIuaKgAgWY99VBYcf5gfhLfwSYVVZUKIQmYI7Jh0bWNoTHyXoHj0wyFnzNe3SsPECip2WohIDD7_CNLydGDvFmdVp7_aIDAHpiA2BrLysm2Go9GHy-ESdVsma6aG95EeICp1ngLSFHx4IOQ3Oisr4t4DStv7INQQQDkuI6hjhVctbt75rcTa-541a237N3RuBKhOPhEbf3eipUD2t-x28Wi_EHDQpFb0D0nZjvI8Q0AoNm0K9rDzVKvUiyNSIr8
---
# Source: inbox-agent/templates/webhook/cert.yaml
apiVersion: v1
kind: Secret
metadata:
  name: my-release-inbox-agent-webhook-cert
  namespace: inbox-agent-v2024.5.3.tgz
  labels:
    helm.sh/chart: inbox-agent-v2024.5.3
    app.kubernetes.io/name: inbox-agent
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "v0.0.1"
    app.kubernetes.io/managed-by: Helm
type: Opaque
data:
  ca.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURCVENDQWUyZ0F3SUJBZ0lRTFFBTmMxMzhrNDNJWGFLakZad2VqREFOQmdrcWhraUc5dzBCQVFzRkFEQU4KTVFzd0NRWURWUVFERXdKallUQWVGdzB5TkRBMk1qQXhORFUzTURaYUZ3MHpOREEyTVRneE5EVTNNRFphTUEweApDekFKQmdOVkJBTVRBbU5oTUlJQklqQU5CZ2txaGtpRzl3MEJBUUVGQUFPQ0FROEFNSUlCQ2dLQ0FRRUF4MlZFCldsVk5EN2dTRlB1enlEU3l4R3EyYURYQVpsWkZxZFBYaXVPZlc0R09pdVNJTFE5emxobHVNc0hndHRMUm5OUVMKM3FFQzVTVnk5NW80Ym95b2Vmb3JEM2Vld05nK1JGV2FWN3BmOEV1c0hHZzdWRkQrc095UW45UGJnTHZ1aFk5TAp4VEd5Ujg0U2gvd1I4TTBocUVCZmJqNGgxTGwwMUZXMEZ6UFArdmthRXgyNGlvVG4zK01VYWszcFc5ZlNiOGoxCjhydFRnbUgxdTB5aTVpNDY4blE2Wk5qcHRIUEwvMDgrWDZ5K29CTmhOblIyR3B1TDNoM1Q3UDlRMDBmV3hFbkgKRkw5RzZnSmVaNUpzVzhtK0pvd2ZHc0diV0JHcnZqdEJ1SUJVTkxCZ0M3a2R1dHFVQktESmpyc1E4ei9nNjFnSgo0OHg5Mm8rKzZZa055SUdlaFFJREFRQUJvMkV3WHpBT0JnTlZIUThCQWY4RUJBTUNBcVF3SFFZRFZSMGxCQll3CkZBWUlLd1lCQlFVSEF3RUdDQ3NHQVFVRkJ3TUNNQThHQTFVZEV3RUIvd1FGTUFNQkFmOHdIUVlEVlIwT0JCWUUKRkdjR2NTSk5EUzNSZ1NaNU5SRWMzODlKY3lpbk1BMEdDU3FHU0liM0RRRUJDd1VBQTRJQkFRQ2FyWU9ZSHRIegpEZUpXcGplR2tYUDNCaTlHV0N1VTBDNFlRRDRaUlU2WDg3Y0p6a05BS200V3VGYStwejY3NlFTK1dPMGUwcFhoCjJuemo0UkZVTGF2RHNVZmdINFo4SHZCMkhNSGJxYWhTYnV1N0JkS01nKzZtYkpiOSt6MVhyVWJKRTY5elhVYmoKc2FMc3ZWODlNWm5MaFVsTWYzb21JMnBNUUJBTHVCTGNpRHV1NGlDY1dGdm4xQ1FBeFFHK2NXR2MxVlFSNEFrKwpXZVJBM0EyQzBQWkdxQTRHUS9Bb3VyZGZLem5HR0YvdXp0alF6c2dTK0xPZFJxUFRDZGRpeXdJbkYvUXRDSUFpCnY5b2V5RHAxTWZOU1hDcWhKS2dseDBLdzZ5Q2huQkQzdFdscUR1a3BFWXBaYjlIMTg0RzMxblQ4VjdWcHRpQmwKV08rRVdmcU1Tb3hXCi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURwakNDQW82Z0F3SUJBZ0lRWitwMGNIZWJXeVBCMGlnY3B1S2RQakFOQmdrcWhraUc5dzBCQVFzRkFEQU4KTVFzd0NRWURWUVFERXdKallUQWVGdzB5TkRBMk1qQXhORFUzTURaYUZ3MHpOREEyTVRneE5EVTNNRFphTUNreApKekFsQmdOVkJBTVRIbTE1TFhKbGJHVmhjMlV0YVc1aWIzZ3RZV2RsYm5RdGQyVmlhRzl2YXpDQ0FTSXdEUVlKCktvWklodmNOQVFFQkJRQURnZ0VQQURDQ0FRb0NnZ0VCQU51UmtIeVc3YUZ1ak82NXNUSmk3cDIxRjZON1Jia0wKV09yY3R0ZlRkWmtHR2psdjNnVThycVlDbDVKRDA1WlhpMHFGaFY3WFdLeTQrQStoQ1ErRGRHRGpwdHRGcHdiOApuR2xia0FmNVlPWlVtNytlODZYSjQ0UWpoQTBZS1g5a3Q2bGJxaUpMam84SVZFYlFxeUZaeExMR0Jka0szUXVCCnY3UWwxVkRnUXE2cktyOHBsdWFrUFpJamkvL1BnVmVLWHl0NUtTdEpvdnJ4NTMrTzN3a05ZYUpMc2JNdHV0UXMKeGZQVFA0YUw2eVp1aVhpZGVQQjFpWFRtdGplMTd5aHZnMHkzNlhLL0dTN2tpYkR3SzZKaFRJWUNEZHhwMWdDRwphR2l0VDBMcnpON0VITWJzSWZ1S3hWd1pPcDIvRmNJN1Vma0VBenpMT3ZVOUhBQVFvUWdkN2MwQ0F3RUFBYU9CCjVUQ0I0akFPQmdOVkhROEJBZjhFQkFNQ0JhQXdIUVlEVlIwbEJCWXdGQVlJS3dZQkJRVUhBd0VHQ0NzR0FRVUYKQndNQ01Bd0dBMVVkRXdFQi93UUNNQUF3SHdZRFZSMGpCQmd3Rm9BVVp3WnhJazBOTGRHQkpuazFFUnpmejBsegpLS2N3Z1lFR0ExVWRFUVI2TUhpQ09HMTVMWEpsYkdWaGMyVXRhVzVpYjNndFlXZGxiblF0ZDJWaWFHOXZheTVwCmJtSnZlQzFoWjJWdWRDMTJNakF5TkM0MUxqTXVkR2Q2Z2p4dGVTMXlaV3hsWVhObExXbHVZbTk0TFdGblpXNTAKTFhkbFltaHZiMnN1YVc1aWIzZ3RZV2RsYm5RdGRqSXdNalF1TlM0ekxuUm5laTV6ZG1Nd0RRWUpLb1pJaHZjTgpBUUVMQlFBRGdnRUJBRlJhcnVoaUFXQS8xb0M2NlE0cHFsNndtWFFsNC9tWnRuMWtPT0pFMTJWdG1mdXZVN0luCk1WZ0Nsc1ZOVEFFUGUxOXdnMWw5d2FRZDQ3Si9xVk96cEFsODBoN3piSjJWdmRVYXBFd0R4SENwK08wVUFxdzQKcXQwSnBZU3l3YXMwZWlDYitwNksxQTM4ZTZLdG9KTXNvTGxjbWFod2FDYzJzVUV3QnM3TnhkZ0NNU3F4Nk9BNApaYS9MZFFHKzFpTWdLZis0OFlkY0lGYk5zUFJZKzhLQlRsYTU1Y1ZoUkxFSHF6cjVjTEF5dVJVNld0dzFHVkNECk1mWC9IZjJybmVaRmJLSzdGSWVLNzlMWi9pd2psQ1g0M043VzhUSEIwWnY0UE9DV2NaWlo3V2ZmZXR2Y1F6VzUKN1RDZVRhMzJNanY4bEh3Q29mOC95RUNvMVgvaXRVVFVBUW89Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
  tls.key: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcEFJQkFBS0NBUUVBMjVHUWZKYnRvVzZNN3JteE1tTHVuYlVYbzN0RnVRdFk2dHkyMTlOMW1RWWFPVy9lCkJUeXVwZ0tYa2tQVGxsZUxTb1dGWHRkWXJMajRENkVKRDROMFlPT20yMFduQnZ5Y2FWdVFCL2xnNWxTYnY1N3oKcGNuamhDT0VEUmdwZjJTM3FWdXFJa3VPandoVVJ0Q3JJVm5Fc3NZRjJRcmRDNEcvdENYVlVPQkNycXNxdnltVwo1cVE5a2lPTC84K0JWNHBmSzNrcEswbWkrdkhuZjQ3ZkNRMWhva3V4c3kyNjFDekY4OU0vaG92ckptNkplSjE0CjhIV0pkT2EyTjdYdktHK0RUTGZwY3I4Wkx1U0pzUEFyb21GTWhnSU4zR25XQUlab2FLMVBRdXZNM3NRY3h1d2gKKzRyRlhCazZuYjhWd2p0UitRUURQTXM2OVQwY0FCQ2hDQjN0elFJREFRQUJBb0lCQUVVSlNjTEN1Y2l1TjhXLwp3UVUwc2c0SUtIeVFmK1drdWJwdTExYVkrRHE2L25mY3dwUW05a3JnT2NRVmEydXo3dW5wZlh2S2Zla2c1MjRTCmxnUzRzbGpjZTFRcVhGQUlFUzNYU2p3WG51NE00RU9wdUxZQituVkxyWE5vaTNPd3VVYVl1YSs2emdJTy9tQ2QKcjVEMjVxL0hMNE9FdE9ldlRoVllaKy9iODF0emhQc0JnTktYUVNWTWp2LzZvS213Q0hsZDl0THQ5ZFhJVzQ3NApxNXA2ZWR6elRTa2o1dm95Yk4yR1BUWlVyVHpnVThBNGlIeDlPbmY1SnFFUnI0NXNkQ0hKbU5wMGpLNHdLTUJMCmhSYjFjS016QlN0R3hVeEk2OU5BZVprQUt5U1QzNmtUUlF4QTEzWWZmTWF5Z3pWb05QOEJqMHRoWWV2TEhtUk0KVS9Oblg4a0NnWUVBNVZGRUQ4QU5TK0tKZWRYVk1pdFFIR0VoVnlNd25uSENJa2l5SEN0YkNIYjBRclZCdEFJeApIcUlTSTdYcDE3UVZRbXlPSmlhVDBDbHp5Qmptc3pJS3VUeHJQWUpEYTVsT0dKajk0Q0g2S2duVzBqbHFlKzlaCjBaN1FjWmhUWUtkNWlUV0lGcThxQTlOYURhYUN4aTc5cDNLVno4bXl2QzViVGhXREgzTmRPQk1DZ1lFQTlSM28KWE5XOGNSSUFDalRLZUhiNzVJREQ1ekMyaWY0MjFjdXhucE10Mi9KbS9JcGVuc0pja2EyWnQ0QUJhM1gwL0prcAp4dHlZWFBrQ3laMy9nU0t5TG1TMVpQTlN0MFA2c0RNWjIvVDBSWHlZZE5URVc0dDRFcityOU1mZVJDY3ozUHE3CktCb2piOU1tODNFK2JJeEVIeEZrd1YxZThnMlBLUlpzZ1k4K3ZwOENnWUVBcklWVUdDbGJsNENwL3VBeDBkbW0KSG9Pd2lwYnQ1L1lib0tGaVpqRHovczFIZkx4UzN2TmJNdm1wZmZaSkpEL1dVcS9LemNidUk0aGNFK2t2L3hhaAozTFFvMWhDZldsN3UwekNlcHpYSXVFSEl2VVgyNTZDdHlUZWJDQ3NhWnpmNEJwTWdmRGh4K29qU1VqeTRYQk5VClA5ckQvSng0L0h3L3N1SWFVTm9CQXNNQ2dZRUEwTW40ODVyY09UUXI5SVdqTVptb1ZxdVlNNFc2OXpBalpWbHMKb3JhYmlZNmhTdHhTWE1rU01NUysreDkrRmhzVDQxWlR6NkIzNkRuenRlbHZpb0FUWnBGQ01ndFJtZW05ei9pMwpQalVaSFZkVVJiQTIwZ09xODgxd204RGtBd21oazhtL1FobUJ0ZThXYnFjM2xSNmxxQkVZMGR6RzAwZlplaFl2CnR1eGRkZUVDZ1lCR0tHaFpZeGZvSFhqRzJKSWI4SjlRaXdXelIxR0hLZWdGSmFFWHoyaUc5UFpoRTFkS3dVdWgKUjlnQVNqaVN4a1pBUERDYldJZlExUnpSMVZXTFJGdkJVSUt4Yzg3ZHYvVnFOb3V1a050eGxOcktGNjJrdDFQVgpDakUyVWJDWDNvb01PV3N6NEJhVzAzN3prTXRIRUo3dWQvVzFCc3BaWG82TkVyY0FXSXFIYkE9PQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo=
---
# Source: inbox-agent/templates/rbac/auth_proxy.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: my-release-inbox-agent-auth-proxy
rules:
  - apiGroups:
      - authentication.k8s.io
    resources:
      - tokenreviews
    verbs:
      - create
  - apiGroups:
      - authorization.k8s.io
    resources:
      - subjectaccessreviews
    verbs:
      - create
---
# Source: inbox-agent/templates/rbac/cluster_role.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: my-release-inbox-agent
  labels:
    helm.sh/chart: inbox-agent-v2024.5.3
    app.kubernetes.io/name: inbox-agent
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "v0.0.1"
    app.kubernetes.io/managed-by: Helm
rules:
  - apiGroups:
      - apiextensions.k8s.io
    resources:
      - customresourcedefinitions
    verbs: ["get", "create", "patch", "update"]
  - apiGroups:
      - admissionregistration.k8s.io
    resources:
      - mutatingwebhookconfigurations
      - validatingwebhookconfigurations
    verbs: ["*"]
  - apiGroups:
      - monitoring.appscode.com
    resources:
      - "*"
    verbs: ["*"]
  - apiGroups:
      - ""
    resources:
      - events
    verbs: ["create", "patch"]
  - apiGroups:
    - '*'
    resources:
    - '*'
    verbs: ["get", "list", "watch"]
  - nonResourceURLs:
    - '*'
    verbs: ["get"]
---
# Source: inbox-agent/templates/rbac/auth_proxy.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: my-release-inbox-agent-auth-proxy
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: my-release-inbox-agent-auth-proxy
subjects:
  - kind: ServiceAccount
    name: my-release-inbox-agent
    namespace: inbox-agent-v2024.5.3.tgz
---
# Source: inbox-agent/templates/rbac/cluster_role_binding.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: my-release-inbox-agent
  labels:
    helm.sh/chart: inbox-agent-v2024.5.3
    app.kubernetes.io/name: inbox-agent
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "v0.0.1"
    app.kubernetes.io/managed-by: Helm
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: my-release-inbox-agent
subjects:
- kind: ServiceAccount
  name: my-release-inbox-agent
  namespace: inbox-agent-v2024.5.3.tgz
---
# Source: inbox-agent/templates/webhook/monitoring/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: my-release-inbox-agent
  namespace: inbox-agent-v2024.5.3.tgz
  labels:
    helm.sh/chart: inbox-agent-v2024.5.3
    app.kubernetes.io/name: inbox-agent
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "v0.0.1"
    app.kubernetes.io/managed-by: Helm
spec:
  ports:
  - name: https
    port: 8443
    protocol: TCP
    targetPort: https
  selector:
    app.kubernetes.io/component: webhook-server
    app.kubernetes.io/name: inbox-agent
    app.kubernetes.io/instance: my-release
---
# Source: inbox-agent/templates/webhook/webhook_service.yaml
apiVersion: v1
kind: Service
metadata:
  name: my-release-inbox-agent-webhook
  namespace: inbox-agent-v2024.5.3.tgz
  labels:
    helm.sh/chart: inbox-agent-v2024.5.3
    app.kubernetes.io/name: inbox-agent
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "v0.0.1"
    app.kubernetes.io/managed-by: Helm
spec:
  selector:
    app.kubernetes.io/component: webhook-server
    app.kubernetes.io/name: inbox-agent
    app.kubernetes.io/instance: my-release
  ports:
  - port: 443
    protocol: TCP
    targetPort: 9443
---
# Source: inbox-agent/templates/operator/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: my-release-inbox-agent-operator
  namespace: inbox-agent-v2024.5.3.tgz
  labels:
    app.kubernetes.io/component: operator
    helm.sh/chart: inbox-agent-v2024.5.3
    app.kubernetes.io/name: inbox-agent
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "v0.0.1"
    app.kubernetes.io/managed-by: Helm
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/component: operator
      app.kubernetes.io/name: inbox-agent
      app.kubernetes.io/instance: my-release
  template:
    metadata:
      labels:
        app.kubernetes.io/component: operator
        app.kubernetes.io/name: inbox-agent
        app.kubernetes.io/instance: my-release
      annotations:
    spec:
      
      serviceAccountName: my-release-inbox-agent
      containers:
      - name: operator
        image: "ghcr.io/appscode/inbox-agent:v0.0.1"
        imagePullPolicy: IfNotPresent
        securityContext:
          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
          readOnlyRootFilesystem: true
          runAsNonRoot: true
          runAsUser: 65534
          seccompProfile:
            type: RuntimeDefault
        args:
          - operator
        env:
        - name: INBOX_SERVER_JMAP_ENDPOINT
          valueFrom:
            secretKeyRef:
              name: my-release-inbox-agent-config
              key: endpoint
        - name: INBOX_SERVER_TOKEN
          valueFrom:
            secretKeyRef:
              name: my-release-inbox-agent-config
              key: token
        resources:
          requests:
            cpu: 100m
      securityContext:
        fsGroup: 65535
      nodeSelector:
        kubernetes.io/os: linux
---
# Source: inbox-agent/templates/webhook/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: my-release-inbox-agent-webhook-server
  namespace: inbox-agent-v2024.5.3.tgz
  labels:
    app.kubernetes.io/component: webhook-server
    helm.sh/chart: inbox-agent-v2024.5.3
    app.kubernetes.io/name: inbox-agent
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "v0.0.1"
    app.kubernetes.io/managed-by: Helm
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/component: webhook-server
      app.kubernetes.io/name: inbox-agent
      app.kubernetes.io/instance: my-release
  template:
    metadata:
      labels:
        app.kubernetes.io/component: webhook-server
        app.kubernetes.io/name: inbox-agent
        app.kubernetes.io/instance: my-release
      annotations:
        checksum/apiregistration.yaml: 00ab55135f9e8b3493b7601dc67cce1f65da7ba65ebc49602a59868a20159dfa
    spec:
      
      serviceAccountName: my-release-inbox-agent
      containers:
      - name: webhook-server
        image: "ghcr.io/appscode/inbox-agent:v0.0.1"
        imagePullPolicy: IfNotPresent
        securityContext:
          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
          readOnlyRootFilesystem: true
          runAsNonRoot: true
          runAsUser: 65534
          seccompProfile:
            type: RuntimeDefault
        args:
          - webhook
          - --webhook-name=my-release-inbox-agent
        env:
        - name: INBOX_SERVER_JMAP_ENDPOINT
          valueFrom:
            secretKeyRef:
              name: my-release-inbox-agent-config
              key: endpoint
        - name: INBOX_SERVER_TOKEN
          valueFrom:
            secretKeyRef:
              name: my-release-inbox-agent-config
              key: token
        ports:
        - name: webhook-server
          containerPort: 9443
          protocol: TCP
        env:
        - name: POD_NAME
          valueFrom:
            fieldRef:
              fieldPath: metadata.name
        - name: POD_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        resources:
          requests:
            cpu: 100m
        volumeMounts:
        - name: serving-cert
          mountPath: /var/serving-cert
          readOnly: true
      - name: kube-rbac-proxy
        image: "ghcr.io/appscode/kube-rbac-proxy:v0.11.0"
        securityContext:
          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
          readOnlyRootFilesystem: true
          runAsNonRoot: true
          runAsUser: 65534
          seccompProfile:
            type: RuntimeDefault
        args:
        - --secure-listen-address=0.0.0.0:8443
        - --upstream=http://127.0.0.1:8080/
        - --logtostderr=true
        - --v=10
        ports:
        - containerPort: 8443
          name: https
          protocol: TCP
        resources:
          requests:
            cpu: 100m
      volumes:
      - name: serving-cert
        secret:
          defaultMode: 420
          secretName: my-release-inbox-agent-webhook-cert
      securityContext:
        fsGroup: 65535
      nodeSelector:
        kubernetes.io/os: linux
---
# Source: inbox-agent/templates/rbac/user_roles.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: appscode:my-release-inbox-agent:edit
  labels:
    rbac.authorization.k8s.io/aggregate-to-admin: "true"
    rbac.authorization.k8s.io/aggregate-to-edit: "true"
  annotations:
    "helm.sh/hook": pre-install,pre-upgrade
    "helm.sh/hook-delete-policy": before-hook-creation
rules:
- apiGroups:
  - monitoring.appscode.com
  resources:
  - "*"
  verbs: ["*"]
---
# Source: inbox-agent/templates/rbac/user_roles.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: appscode:my-release-inbox-agent:view
  labels:
    rbac.authorization.k8s.io/aggregate-to-view: "true"
  annotations:
    "helm.sh/hook": pre-install,pre-upgrade
    "helm.sh/hook-delete-policy": before-hook-creation
rules:
- apiGroups:
  - monitoring.appscode.com
  resources:
  - "*"
  verbs: ["get", "list", "watch"]
