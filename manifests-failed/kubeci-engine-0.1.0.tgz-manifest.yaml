---
# Source: kubeci-engine/templates/service-account.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: my-release-kubeci-engine
  namespace: kubeci-engine-0.1.0.tgz
  labels:
    chart: "kubeci-engine-0.1.0"
    app: "kubeci-engine"
    heritage: "Helm"
    release: "my-release"
---
# Source: kubeci-engine/templates/apiregistration.yaml
apiVersion: v1
kind: Secret
metadata:
  name: my-release-kubeci-engine-apiserver-cert
  namespace: kubeci-engine-0.1.0.tgz
  labels:
    chart: "kubeci-engine-0.1.0"
    app: "kubeci-engine"
    heritage: "Helm"
    release: "my-release"
type: Opaque
data:
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURqekNDQW5lZ0F3SUJBZ0lRZXlwYnhmeDFpVTNFK3gvMEk0djFGekFOQmdrcWhraUc5dzBCQVFzRkFEQU4KTVFzd0NRWURWUVFERXdKallUQWVGdzB5TkRBMk1qQXhORFUzTWpsYUZ3MHpOREEyTVRneE5EVTNNamxhTUNNeApJVEFmQmdOVkJBTVRHRzE1TFhKbGJHVmhjMlV0YTNWaVpXTnBMV1Z1WjJsdVpUQ0NBU0l3RFFZSktvWklodmNOCkFRRUJCUUFEZ2dFUEFEQ0NBUW9DZ2dFQkFNNS8reUVtZFhMSkFXN0d1MlJGaldTYmF3VWxvTHlVQWc2Ym9Nd3AKdncvQXFtbWRES29nM1JKcVd0Q0xtYzU2RmtlOHRZb3J1UVd0ZFgyRjRsalR0Y082OHNZN1UwY1h0Y05QZ0E0cgpNbFNGeDNxbitlaG0yVUJVbkc1cit3d0ladjAybHF1QU1JWWk5NUxJakN0d3JBMm5WV2tZampnN2E2MUR6R2djCnhQbFRZdFRqbWlyT0IwanJTcEZZNnQwWVZFK2JudmxhRDc5MXR6elo3NkE2aGJ6OGozTldESGc3OGhqZFMzdHEKdmVXRFFrdjF2aDAvU1dDSUFlMkxlM3poSnRjcnZzVlI3M3lqUzVyL3VRRWN1Ti9vby9WZGJvUnk5V3ZpZGlZQQo0OFh3cUVRZjQwdmcvcmhwOTdWaC9tcjVvTGdpRW1GeEx2K1RQOXdmNkNsWkxJMENBd0VBQWFPQjFEQ0IwVEFPCkJnTlZIUThCQWY4RUJBTUNCYUF3SFFZRFZSMGxCQll3RkFZSUt3WUJCUVVIQXdFR0NDc0dBUVVGQndNQ01Bd0cKQTFVZEV3RUIvd1FDTUFBd0h3WURWUjBqQkJnd0ZvQVVFY1R5RDlybXY1aCtQV1RQRWJoUldWTHBxeEF3Y1FZRApWUjBSQkdvd2FJSXdiWGt0Y21Wc1pXRnpaUzFyZFdKbFkya3RaVzVuYVc1bExtdDFZbVZqYVMxbGJtZHBibVV0Ck1DNHhMakF1ZEdkNmdqUnRlUzF5Wld4bFlYTmxMV3QxWW1WamFTMWxibWRwYm1VdWEzVmlaV05wTFdWdVoybHUKWlMwd0xqRXVNQzUwWjNvdWMzWmpNQTBHQ1NxR1NJYjNEUUVCQ3dVQUE0SUJBUUJLZy9OcVlsdUhmUXVqUERndgphM2JsRWlzdGFPcTUrQ1FIVjlETVhieFErb1N1TEVjTnlZMDJHTUp6NjFjTkRXTTI2dkQ4V09sNHhsMTA5Smw0CkQwdVI2VXlEYWk1U2F4MDRveDU3Q1JWV2pXZVo1VDJDQ1NxWXQ4NXNYbDJxYUc3MStqY3dnU1k5VlAwOXZXVG4KbVJDc1BvemZpZ0F6eGxEVzZYZ2kyYzdYSHJCTHNmRDdva2tFWE1xVFhxaFVoM3FiaFZyNU4zTTRTNkMveFBxSwoxQkNCc0xoQ0gzL1hoRTcrZXlPeXIyMngrKzBSTnhVeGx2SnBDRkZpQ0UrTjBBYXpNV0NKYXpGY3JSVWNHRm5lCnQ4RTREWjY3Ry9Id2xTQ0NmOHFjZTlZZ05OelJKV3lFWWlXTUVLVHpya3ozT0o5QWRQTUFPeFpHUnpDYnJ5V08KZklGYQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
  tls.key: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcEFJQkFBS0NBUUVBem4vN0lTWjFjc2tCYnNhN1pFV05aSnRyQlNXZ3ZKUUNEcHVnekNtL0Q4Q3FhWjBNCnFpRGRFbXBhMEl1Wnpub1dSN3kxaWl1NUJhMTFmWVhpV05PMXc3cnl4anRUUnhlMXcwK0FEaXN5VklYSGVxZjUKNkdiWlFGU2NibXY3REFobS9UYVdxNEF3aGlMM2tzaU1LM0NzRGFkVmFSaU9PRHRyclVQTWFCekUrVk5pMU9PYQpLczRIU090S2tWanEzUmhVVDV1ZStWb1B2M1czUE5udm9EcUZ2UHlQYzFZTWVEdnlHTjFMZTJxOTVZTkNTL1crCkhUOUpZSWdCN1l0N2ZPRW0xeXUreFZIdmZLTkxtdis1QVJ5NDMraWo5VjF1aEhMMWErSjJKZ0RqeGZDb1JCL2oKUytEK3VHbjN0V0grYXZtZ3VDSVNZWEV1LzVNLzNCL29LVmtzalFJREFRQUJBb0lCQVFETEsyQUozYXp3b3BPbQpTaUZWSnBsV3d4TW9uVHpvVFRjNDZDWHN1YVloK1kyeEc3TzZMMXRUSXhEMjNtTVZvMGtJaThLUmp6TWJRdTYxCjhXUWh3U3EweU5yVDdzcWd4OU10dHFwblJsamVrRUVUalBGMGxyeHBidFg2VG9OUjgzSmc3N1NPU0RGMXlER04KV1lPUHVldU9BM1VsVWVPYnI5cmhQak4rdTgrUS9aT2xPUFFybW5iaDRzS1hUYzRQTlBQck5pQzFNMlhRUmFKZAp1VktSN1FmcVo4OTIvVmpwZjYvMnN0NWcxNUlDZFlNM01KdlJjQmhtQ2MwOVFUWEQ5Rk5qbFZiNUErRitMY0h2CmdQMUxMK2ErUnRCZTJ0NWdVQzF2SFplNWg5R2ZVYk9HbmViUkg1dCtwcHBMeFIxQlZ0WEwvLzJPVEZqb3ZQcWQKQTIySWQvU0JBb0dCQU5KVi9OWDFIUWdwS3lxWkZxUjhHcERkMHJodkhGN1RBVWhhYW5peG5HTmFxOTlsZHoyVApENEZEcy9oenNzNVdVZXBxaW83dGNseHBvbTI1MXBuYUpDS0hnNnpiRTZzNEs1b0Zzc1Z0ZURBOVpCcnAzcGhBCm91TjN6SUEyeFUxNGRlTTYwck1UeGlmVTdqdVJVQ1kxMnloWUVjclJvdzlMb3N6RUJnSnpCTjZQQW9HQkFQdFUKekg1eFdHOVNOcVJnWDFqd2l1YUNRdEdJUVdVd1lTek9nWkZRTVFaM3VVV1g2M01qMWxRb2ZqdzE0R09UdkpCKwpQa0xlODRKSXROZmozUlJ2SGZ6NWUrRVNhUnAxOUpTZ21KN3FQSW00MHY0SVp0WUhxV1NwK1RpSzNnbEFnZS9CCk1sUDhud3VldmhUZnVINmRGME9ESzAxNTZlc21FVmRyOWNZb1JORWpBb0dCQU1RMVFHRWFnUldPeWR5MzZCNVMKUXJubW8xNDNFQUVJMXNaMnlhR0RGWDY5STEyR21tQVBJa1NVTW50TytucHVuWVdPRTJqVzZYcDVjL0xsaStJRApVdmYrNy84OGNqR2plVkQ1aGRXVGs2MTBaMENQNzN5WnR4bDROSVZhRWwxOVJJTk82U1B5QzBRMjVuRWMwZWFECkVNaW10eG82eXVCR3p6d3lrK1NQQlBqVEFvR0FWUU5pQ0lNZWZzazRZbkdXenViT2xSb0tzQVYrMlZOOEMwUHUKMzlCWVJPL0tZNWYzdElLeXhOVE5ubUE2L25QQ25MMlhJZGQ0VnVGeENuV3hHbkJibkc1blVNS0Jlc25iYVVySgpWVGUyTW4rcUh2T0lsVzBTQjFMWFVpRG02Z28vNlhGWUxNQ09xOGVPVkZFNGZ0dDBPd25yWTlHUkpsRkNIR2dRClFtN3NtREVDZ1lBbGl6azRZTkc4aDM1Tjdaa2pOTHVSU1NCY2Q1ZFdiTUp2UEdMeW9qYzAwOG9EcXIxdGJWZEoKRUZpL0YvZkZhTnFUZHVxbjFuekJ0QzFiOVNsSXFNUk85VFcyUnMxUzgwNklqYjNuUjE3RWR3ekYxd0dhd3pjTwo0V2FENHowY3p3TzYrSUNjcHI5eUs5eDNLM2NVRnNOZlhEL284dno2VncxbWdNSVE0S1JhT0E9PQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo=
---
# Source: kubeci-engine/templates/cluster-role.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: my-release-kubeci-engine
  labels:
    chart: "kubeci-engine-0.1.0"
    app: "kubeci-engine"
    heritage: "Helm"
    release: "my-release"
rules:
- apiGroups:
  - admissionregistration.k8s.io
  resources:
  - validatingwebhookconfigurations
  verbs: ["delete", "list", "watch", "patch"]
- apiGroups:
  - apiextensions.k8s.io
  resources:
  - customresourcedefinitions
  verbs:
  - "*"
- apiGroups:
  - extensions
  resources:
  - thirdpartyresources
  verbs:
  - "*"
- apiGroups:
  - engine.kube.ci
  - extensions.kube.ci
  resources: ["*"]
  verbs: ["*"]
- apiGroups:
  - apps
  resources:
  - deployments
  - statefulsets
  verbs: ["get", "list", "watch", "patch"]
- apiGroups:
  - batch
  resources:
  - jobs
  - cronjobs
  verbs: ["get", "list", "watch", "create", "delete", "patch"]
- apiGroups:
  - extensions
  resources:
  - replicasets
  - daemonsets
  verbs: ["get", "list", "watch", "patch"]
- apiGroups: [""]
  resources:
  - namespaces
  - replicationcontrollers
  verbs: ["get", "list", "watch", "patch"]
- apiGroups: [""]
  resources:
  - configmaps
  verbs: ["create", "update", "get", "delete"]
- apiGroups: [""]
  resources:
  - secrets
  verbs: ["get"]
- apiGroups: [""]
  resources:
  - events
  verbs: ["create"]
- apiGroups: [""]
  resources:
  - nodes
  verbs: ["list"]
- apiGroups: [""]
  resources:
  - pods
  - pods/exec
  - pods/log
  verbs: ["get", "create", "list", "delete", "deletecollection"]
- apiGroups: [""]
  resources:
  - serviceaccounts
  verbs: ["get", "create", "patch", "delete"]
- apiGroups:
  - rbac.authorization.k8s.io
  resources:
  - clusterroles
  - roles
  - rolebindings
  verbs: ["get", "create", "delete", "patch"]
---
# Source: kubeci-engine/templates/apiregistration.yaml
# to delegate authentication and authorization
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: my-release-kubeci-engine-apiserver-auth-delegator
  labels:
    chart: "kubeci-engine-0.1.0"
    app: "kubeci-engine"
    heritage: "Helm"
    release: "my-release"
roleRef:
  kind: ClusterRole
  apiGroup: rbac.authorization.k8s.io
  name: system:auth-delegator
subjects:
- kind: ServiceAccount
  name: my-release-kubeci-engine
  namespace: kubeci-engine-0.1.0.tgz
---
# Source: kubeci-engine/templates/cluster-role-binding.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: my-release-kubeci-engine
  labels:
    chart: "kubeci-engine-0.1.0"
    app: "kubeci-engine"
    heritage: "Helm"
    release: "my-release"
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: my-release-kubeci-engine
subjects:
- kind: ServiceAccount
  name: my-release-kubeci-engine
  namespace: kubeci-engine-0.1.0.tgz
---
# Source: kubeci-engine/templates/apiregistration.yaml
# to read the config for terminating authentication
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: my-release-kubeci-engine-apiserver-extension-server-authentication-reader
  namespace: kube-system
  labels:
    chart: "kubeci-engine-0.1.0"
    app: "kubeci-engine"
    heritage: "Helm"
    release: "my-release"
roleRef:
  kind: Role
  apiGroup: rbac.authorization.k8s.io
  name: extension-apiserver-authentication-reader
subjects:
- kind: ServiceAccount
  name: my-release-kubeci-engine
  namespace: kubeci-engine-0.1.0.tgz
---
# Source: kubeci-engine/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: my-release-kubeci-engine
  namespace: kubeci-engine-0.1.0.tgz
  labels:
    app: "kubeci-engine"
    chart: "kubeci-engine-0.1.0"
    release: "my-release"
    heritage: "Helm"
spec:
  ports:
  # Port used to expose admission webhook apiserver
  - name: admission
    port: 443
    targetPort: 8443
  selector:
    app: "kubeci-engine"
    release: "my-release"
---
# Source: kubeci-engine/templates/deployment.yaml
# GKE returns Major:"1", Minor:"10+"
apiVersion: apps/v1
kind: Deployment
metadata:
  name: my-release-kubeci-engine
  namespace: kubeci-engine-0.1.0.tgz
  labels:
    chart: "kubeci-engine-0.1.0"
    app: "kubeci-engine"
    heritage: "Helm"
    release: "my-release"
spec:
  replicas: 1
  selector:
    matchLabels:
      app: "kubeci-engine"
      release: "my-release"
  template:
    metadata:
      labels:
        app: "kubeci-engine"
        release: "my-release"
    spec:
      serviceAccountName: my-release-kubeci-engine
      containers:
      - name: operator
        image: kubeci/kubeci-engine:0.1.0
        imagePullPolicy: IfNotPresent
        args:
        - run
        - --v=3
        - --rbac=true
        - --docker-registry=kubeci
        - --secure-port=8443
        - --audit-log-path=-
        - --tls-cert-file=/var/serving-cert/tls.crt
        - --tls-private-key-file=/var/serving-cert/tls.key
        - --enable-status-subresource=true
        - --enable-analytics=true
        ports:
        - containerPort: 8443
        resources:
          requests:
            cpu: "100m"
        volumeMounts:
        - mountPath: /var/serving-cert
          name: serving-cert
      - name: web-ui
        image: kubeci/kubeci-engine:0.1.0
        imagePullPolicy: IfNotPresent
        args:
        - workplan-viewer
        ports:
        - containerPort: 9090
        resources:
          requests:
            cpu: "100m"
      volumes:
      - name: serving-cert
        secret:
          defaultMode: 420
          secretName: my-release-kubeci-engine-apiserver-cert
---
# Source: kubeci-engine/templates/apiregistration.yaml
apiVersion: apiregistration.k8s.io/v1beta1
kind: APIService
metadata:
  name: v1alpha1.validators.engine.kube.ci
  labels:
    chart: "kubeci-engine-0.1.0"
    app: "kubeci-engine"
    heritage: "Helm"
    release: "my-release"
spec:
  group: validators.engine.kube.ci
  version: v1alpha1
  service:
    namespace: kubeci-engine-0.1.0.tgz
    name: my-release-kubeci-engine
  caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURCVENDQWUyZ0F3SUJBZ0lRZk56OEQwaXBRSXRWZFNNYmprSzQ3akFOQmdrcWhraUc5dzBCQVFzRkFEQU4KTVFzd0NRWURWUVFERXdKallUQWVGdzB5TkRBMk1qQXhORFUzTWpsYUZ3MHpOREEyTVRneE5EVTNNamxhTUEweApDekFKQmdOVkJBTVRBbU5oTUlJQklqQU5CZ2txaGtpRzl3MEJBUUVGQUFPQ0FROEFNSUlCQ2dLQ0FRRUF6Y2RHCkNYbmZQM1YyeWN0MHFVNTFJL3VrQVBnRmlyVGxsT1RzUTJIUWxkenVtTGhrUWhLelhkQjdzMTNKSDV0clZzclYKL21GOGxLc1lRZktkb1VjZ2JFUVJYK21JVFFaNnovOG1wdWxmN0pNY1BKaWtaaEI2ZThCQThZUUNLQ3lCdGt0QgpXUy9ISmtSZGc2UnlIN1NCNk5wZkFNTFRVMXJpQzI1b2ZDcHFkSCtNZTF5ZFl5ODU0RTBIY2ZXVXltczdFYVlYCi91WTZKSUlBTmFBZjAySGtFbHRhMStBRGNYUVk3dldrWW0zcU9oU09YQW1BMVN0SUNFOEJabGtXY0lhQlBQNW0KVkgySXBVY3NxbEtBTDNVVTh1UUVoSGh1NDN4VWpmejRpcitabjVFL3NLYzd6NTRkRndwdm1WWmtXdzArcG9RMwpuZjlvVzhTRko0SGkveDhlRHdJREFRQUJvMkV3WHpBT0JnTlZIUThCQWY4RUJBTUNBcVF3SFFZRFZSMGxCQll3CkZBWUlLd1lCQlFVSEF3RUdDQ3NHQVFVRkJ3TUNNQThHQTFVZEV3RUIvd1FGTUFNQkFmOHdIUVlEVlIwT0JCWUUKRkJIRThnL2E1citZZmoxa3p4RzRVVmxTNmFzUU1BMEdDU3FHU0liM0RRRUJDd1VBQTRJQkFRQkhsMDRjRFlDVApCSE9WY1NLTnVJVkRuZGFhMjRIbW5XYkJHZ0FxOUFFeUl5cStKcUdTSXF1S1JEdVp6ZUU5ektHNWJjTTI1Q3BjCklJMmJmeE81bXpKMC9VdjViTldrZVcyelRTMEFvZDErNjYrcW9lNWllOXFabXRET09sRU5Za1JDNFduVW50VTUKYlNiZTY0MjlCOTZpSGQ3ZS9yaEVYZkkrbU5Eem1peFM5cVpoNWVxY2NHcHBBb0pycVd3SHdSd244cm1FM3l5MAo2QXdUMmJNSDRoSjBpM0VqekRxNlgrK1ZrM3A0NU1heWhXTnZpclc5Q21GalBSejFBRDFKWExaV2YyMnk4WGFqCm5keEg1alhwSkE1b2ZxaEhZdFFHclhMZHlIUkw5YWZtbjFRenhzeVpCbzZ2N1FLY0RuMVNoS05Zekd0RTliU0wKc0Y1RjNnR1ZncFVaCi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
  groupPriorityMinimum: 10000
  versionPriority: 15
---
# Source: kubeci-engine/templates/apiregistration.yaml
apiVersion: apiregistration.k8s.io/v1beta1
kind: APIService
metadata:
  name: v1alpha1.mutators.engine.kube.ci
  labels:
    chart: "kubeci-engine-0.1.0"
    app: "kubeci-engine"
    heritage: "Helm"
    release: "my-release"
spec:
  group: mutators.engine.kube.ci
  version: v1alpha1
  service:
    namespace: kubeci-engine-0.1.0.tgz
    name: my-release-kubeci-engine
  caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURCVENDQWUyZ0F3SUJBZ0lRZk56OEQwaXBRSXRWZFNNYmprSzQ3akFOQmdrcWhraUc5dzBCQVFzRkFEQU4KTVFzd0NRWURWUVFERXdKallUQWVGdzB5TkRBMk1qQXhORFUzTWpsYUZ3MHpOREEyTVRneE5EVTNNamxhTUEweApDekFKQmdOVkJBTVRBbU5oTUlJQklqQU5CZ2txaGtpRzl3MEJBUUVGQUFPQ0FROEFNSUlCQ2dLQ0FRRUF6Y2RHCkNYbmZQM1YyeWN0MHFVNTFJL3VrQVBnRmlyVGxsT1RzUTJIUWxkenVtTGhrUWhLelhkQjdzMTNKSDV0clZzclYKL21GOGxLc1lRZktkb1VjZ2JFUVJYK21JVFFaNnovOG1wdWxmN0pNY1BKaWtaaEI2ZThCQThZUUNLQ3lCdGt0QgpXUy9ISmtSZGc2UnlIN1NCNk5wZkFNTFRVMXJpQzI1b2ZDcHFkSCtNZTF5ZFl5ODU0RTBIY2ZXVXltczdFYVlYCi91WTZKSUlBTmFBZjAySGtFbHRhMStBRGNYUVk3dldrWW0zcU9oU09YQW1BMVN0SUNFOEJabGtXY0lhQlBQNW0KVkgySXBVY3NxbEtBTDNVVTh1UUVoSGh1NDN4VWpmejRpcitabjVFL3NLYzd6NTRkRndwdm1WWmtXdzArcG9RMwpuZjlvVzhTRko0SGkveDhlRHdJREFRQUJvMkV3WHpBT0JnTlZIUThCQWY4RUJBTUNBcVF3SFFZRFZSMGxCQll3CkZBWUlLd1lCQlFVSEF3RUdDQ3NHQVFVRkJ3TUNNQThHQTFVZEV3RUIvd1FGTUFNQkFmOHdIUVlEVlIwT0JCWUUKRkJIRThnL2E1citZZmoxa3p4RzRVVmxTNmFzUU1BMEdDU3FHU0liM0RRRUJDd1VBQTRJQkFRQkhsMDRjRFlDVApCSE9WY1NLTnVJVkRuZGFhMjRIbW5XYkJHZ0FxOUFFeUl5cStKcUdTSXF1S1JEdVp6ZUU5ektHNWJjTTI1Q3BjCklJMmJmeE81bXpKMC9VdjViTldrZVcyelRTMEFvZDErNjYrcW9lNWllOXFabXRET09sRU5Za1JDNFduVW50VTUKYlNiZTY0MjlCOTZpSGQ3ZS9yaEVYZkkrbU5Eem1peFM5cVpoNWVxY2NHcHBBb0pycVd3SHdSd244cm1FM3l5MAo2QXdUMmJNSDRoSjBpM0VqekRxNlgrK1ZrM3A0NU1heWhXTnZpclc5Q21GalBSejFBRDFKWExaV2YyMnk4WGFqCm5keEg1alhwSkE1b2ZxaEhZdFFHclhMZHlIUkw5YWZtbjFRenhzeVpCbzZ2N1FLY0RuMVNoS05Zekd0RTliU0wKc0Y1RjNnR1ZncFVaCi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
  groupPriorityMinimum: 10000
  versionPriority: 15
---
# Source: kubeci-engine/templates/apiregistration.yaml
apiVersion: apiregistration.k8s.io/v1beta1
kind: APIService
metadata:
  name: v1alpha1.extensions.kube.ci
  labels:
    chart: "kubeci-engine-0.1.0"
    app: "kubeci-engine"
    heritage: "Helm"
    release: "my-release"
spec:
  group: extensions.kube.ci
  version: v1alpha1
  service:
    namespace: kubeci-engine-0.1.0.tgz
    name: my-release-kubeci-engine
  caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURCVENDQWUyZ0F3SUJBZ0lRZk56OEQwaXBRSXRWZFNNYmprSzQ3akFOQmdrcWhraUc5dzBCQVFzRkFEQU4KTVFzd0NRWURWUVFERXdKallUQWVGdzB5TkRBMk1qQXhORFUzTWpsYUZ3MHpOREEyTVRneE5EVTNNamxhTUEweApDekFKQmdOVkJBTVRBbU5oTUlJQklqQU5CZ2txaGtpRzl3MEJBUUVGQUFPQ0FROEFNSUlCQ2dLQ0FRRUF6Y2RHCkNYbmZQM1YyeWN0MHFVNTFJL3VrQVBnRmlyVGxsT1RzUTJIUWxkenVtTGhrUWhLelhkQjdzMTNKSDV0clZzclYKL21GOGxLc1lRZktkb1VjZ2JFUVJYK21JVFFaNnovOG1wdWxmN0pNY1BKaWtaaEI2ZThCQThZUUNLQ3lCdGt0QgpXUy9ISmtSZGc2UnlIN1NCNk5wZkFNTFRVMXJpQzI1b2ZDcHFkSCtNZTF5ZFl5ODU0RTBIY2ZXVXltczdFYVlYCi91WTZKSUlBTmFBZjAySGtFbHRhMStBRGNYUVk3dldrWW0zcU9oU09YQW1BMVN0SUNFOEJabGtXY0lhQlBQNW0KVkgySXBVY3NxbEtBTDNVVTh1UUVoSGh1NDN4VWpmejRpcitabjVFL3NLYzd6NTRkRndwdm1WWmtXdzArcG9RMwpuZjlvVzhTRko0SGkveDhlRHdJREFRQUJvMkV3WHpBT0JnTlZIUThCQWY4RUJBTUNBcVF3SFFZRFZSMGxCQll3CkZBWUlLd1lCQlFVSEF3RUdDQ3NHQVFVRkJ3TUNNQThHQTFVZEV3RUIvd1FGTUFNQkFmOHdIUVlEVlIwT0JCWUUKRkJIRThnL2E1citZZmoxa3p4RzRVVmxTNmFzUU1BMEdDU3FHU0liM0RRRUJDd1VBQTRJQkFRQkhsMDRjRFlDVApCSE9WY1NLTnVJVkRuZGFhMjRIbW5XYkJHZ0FxOUFFeUl5cStKcUdTSXF1S1JEdVp6ZUU5ektHNWJjTTI1Q3BjCklJMmJmeE81bXpKMC9VdjViTldrZVcyelRTMEFvZDErNjYrcW9lNWllOXFabXRET09sRU5Za1JDNFduVW50VTUKYlNiZTY0MjlCOTZpSGQ3ZS9yaEVYZkkrbU5Eem1peFM5cVpoNWVxY2NHcHBBb0pycVd3SHdSd244cm1FM3l5MAo2QXdUMmJNSDRoSjBpM0VqekRxNlgrK1ZrM3A0NU1heWhXTnZpclc5Q21GalBSejFBRDFKWExaV2YyMnk4WGFqCm5keEg1alhwSkE1b2ZxaEhZdFFHclhMZHlIUkw5YWZtbjFRenhzeVpCbzZ2N1FLY0RuMVNoS05Zekd0RTliU0wKc0Y1RjNnR1ZncFVaCi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
  groupPriorityMinimum: 10000
  versionPriority: 15
---
# Source: kubeci-engine/templates/user-roles.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: appscode:kubeci-engine:edit
  labels:
    rbac.authorization.k8s.io/aggregate-to-admin: "true"
    rbac.authorization.k8s.io/aggregate-to-edit: "true"
  annotations:
    "helm.sh/hook": post-install,post-upgrade
    "helm.sh/hook-delete-policy": before-hook-creation
rules:
- apiGroups:
  - engine.kube.ci
  resources:
  - workflows
  - workplans
  verbs:
  - create
  - delete
  - deletecollection
  - get
  - list
  - patch
  - update
  - watch
---
# Source: kubeci-engine/templates/user-roles.yaml
kind: ClusterRole
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: appscode:kubeci-engine:view
  labels:
    rbac.authorization.k8s.io/aggregate-to-view: "true"
  annotations:
    "helm.sh/hook": post-install,post-upgrade
    "helm.sh/hook-delete-policy": before-hook-creation
rules:
- apiGroups:
  - engine.kube.ci
  resources:
  - workflows
  - workplans
  verbs:
  - get
  - list
  - watch
---
# Source: kubeci-engine/templates/cleaner.yaml
apiVersion: batch/v1
kind: Job
metadata:
  name: my-release-cleaner
  labels:
    chart: "kubeci-engine-0.1.0"
    app: "kubeci-engine"
    heritage: "Helm"
    release: "my-release"
  annotations:
    "helm.sh/hook": pre-delete
    "helm.sh/hook-delete-policy": hook-succeeded,hook-failed
spec:
  backoffLimit: 3
  activeDeadlineSeconds: 120
  template:
    spec:
      serviceAccountName: my-release-kubeci-engine
      containers:
      - name: busybox
        image: appscode/kubectl:v1.11
        command:
          - sh
          - -c
          - "sleep 2; kubectl delete validatingwebhookconfigurations validators.engine.kube.ci || true; kubectl delete mutatingwebhookconfigurations mutators.engine.kube.ci || true"
        imagePullPolicy: IfNotPresent
      restartPolicy: Never
---
# Source: kubeci-engine/templates/mutating-webhook.yaml
apiVersion: admissionregistration.k8s.io/v1beta1
kind: MutatingWebhookConfiguration
metadata:
  name: mutators.engine.kube.ci
  labels:
    chart: "kubeci-engine-0.1.0"
    app: "kubeci-engine"
    heritage: "Helm"
    release: "my-release"
  annotations:
    "helm.sh/hook": post-install,post-upgrade
    "helm.sh/hook-delete-policy": before-hook-creation
webhooks:
- name: workflow.mutators.engine.kube.ci
  clientConfig:
    service:
      namespace: default
      name: kubernetes
      path: /apis/mutators.engine.kube.ci/v1alpha1/workflows
    caBundle: bm90LWNhLWNlcnQ=
  rules:
  - operations:
    - CREATE
    - UPDATE
    apiGroups:
    - engine.kube.ci
    apiVersions:
    - "*"
    resources:
    - workflows
  failurePolicy: Fail
---
# Source: kubeci-engine/templates/validating-webhook.yaml
apiVersion: admissionregistration.k8s.io/v1beta1
kind: ValidatingWebhookConfiguration
metadata:
  name: validators.engine.kube.ci
  labels:
    chart: "kubeci-engine-0.1.0"
    app: "kubeci-engine"
    heritage: "Helm"
    release: "my-release"
  annotations:
    "helm.sh/hook": post-install,post-upgrade
    "helm.sh/hook-delete-policy": before-hook-creation
webhooks:
- name: workflow.validators.engine.kube.ci
  clientConfig:
    service:
      namespace: default
      name: kubernetes
      path: /apis/validators.engine.kube.ci/v1alpha1/workflows
    caBundle: bm90LWNhLWNlcnQ=
  rules:
  - operations:
    - CREATE
    - UPDATE
    apiGroups:
    - engine.kube.ci
    apiVersions:
    - "*"
    resources:
    - workflows
  failurePolicy: Fail
- name: workplan.validators.engine.kube.ci
  clientConfig:
    service:
      namespace: default
      name: kubernetes
      path: /apis/validators.engine.kube.ci/v1alpha1/workplans
    caBundle: bm90LWNhLWNlcnQ=
  rules:
  - operations:
    - UPDATE
    apiGroups:
    - engine.kube.ci
    apiVersions:
    - "*"
    resources:
    - workplans
  failurePolicy: Fail
