---
# Source: fargate-sidecar-injector/templates/serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: fargate-sidecar-injector
  labels:
    helm.sh/chart: fargate-sidecar-injector-0.1.5
    app.kubernetes.io/name: fargate-sidecar-injector
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm
---
# Source: fargate-sidecar-injector/templates/mutatingwebhook.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: fargate-sidecar-injector
  labels:
    helm.sh/chart: fargate-sidecar-injector-0.1.5
    app.kubernetes.io/name: fargate-sidecar-injector
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm
data:
  fargatesidecarinjector.conf: |-
    serve:
        port: 8443
        host: ""
        tls:
          enabled: true
          cert: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUR2akNDQXFhZ0F3SUJBZ0lSQU1tT1BIeTZrc0NZaTRCUjJhRld0TzB3RFFZSktvWklodmNOQVFFTEJRQXcKSmpFa01DSUdBMVVFQXhNYlptRnlaMkYwWlMxemFXUmxZMkZ5TFdsdWFtVmpkRzl5TFdOaE1CNFhEVEkwTURZeApOakF4TURJek1sb1hEVE0wTURZeE5EQXhNREl6TWxvd0l6RWhNQjhHQTFVRUF4TVlabUZ5WjJGMFpTMXphV1JsClkyRnlMV2x1YW1WamRHOXlNSUlCSWpBTkJna3Foa2lHOXcwQkFRRUZBQU9DQVE4QU1JSUJDZ0tDQVFFQTZXWXYKOHdKb3RjZnVyVnlHMTRudTE1QnF4YmdNZWRMZGxBYzZpaDdrYS9JUjNOTXJXUWxJNGd0RlJ5MnJQOGRua2RxVwprQXBaUmEzU0JJdlF2am13M25tSzhuMXV0NUVtTkUrTWp6L3MydFhrRWVBN0R0L1EySFdySUJKQUwrZzBHT1gwCklUNERDRG14Nk1NbDZhaitoc2t6dThTRC83UGJ3Ujl2SmY2eFRvT25zSEpEZ0RmN0J4dXU3RDk2alJJbTV3TCsKODNrdk5JQW5OSjBheWwxa2RJSkhvbkJUQW16VHhZQm52bmc3a0x1aGkwRkhCOEpsT0ZjNHdic3R0K3lMNFhRaQo2Y25UanRnSDR4L3kvQUc5MmxieE5XeGlXSUhOa1AwcGxpSWxBS2pDNWR0NVMweUpxRmFESzljUU1pWmpyaXNzCmduWXdWOUdSSGNoYThiQ2phd0lEQVFBQm80SHBNSUhtTUE0R0ExVWREd0VCL3dRRUF3SUZvREFkQmdOVkhTVUUKRmpBVUJnZ3JCZ0VGQlFjREFRWUlLd1lCQlFVSEF3SXdEQVlEVlIwVEFRSC9CQUl3QURBZkJnTlZIU01FR0RBVwpnQlIwYTNKQS9XYko5UmZha0I2dGVLR3R2L2h4dkRDQmhRWURWUjBSQkg0d2ZJSWdabUZ5WjJGMFpTMXphV1JsClkyRnlMV2x1YW1WamRHOXlMbVJsWm1GMWJIU0NKR1poY21kaGRHVXRjMmxrWldOaGNpMXBibXBsWTNSdmNpNWsKWldaaGRXeDBMbk4yWTRJeVptRnlaMkYwWlMxemFXUmxZMkZ5TFdsdWFtVmpkRzl5TG1SbFptRjFiSFF1YzNaagpMbU5zZFhOMFpYSXViRzlqWVd3d0RRWUpLb1pJaHZjTkFRRUxCUUFEZ2dFQkFMcENlNDF3RC9DbnV6UHVyZU0rCm5lRWFJSkUyVUZXTnJJV3pZaHlHZDhkOGZYclVkS3U2eDdxMVZ5c2NhTVFPNnFPdTg5UWFuTHRKZXU5R2sxRk4KY0Fld1VPMWc3ZHB4R2VPYmRJVm5EOXZhVWd5S0sxNE5ZUEhuZzBmWlV0aCtsSXpqdDAza3ZXL0Rya05zNENwNwpUM2ptYTAxZU56MllOQVVIMG16Ujc3aWhCbkIyTDhaaGZhSnJ5WFkxWTI2d0U1cno4NkVWZVJTNjZjSHVVb29LCm5jWEoxSUYxM0lUNWt0TGlJcmVWcDhCMVFaSzFnOCs0TUY1cmxUWERsa3NaMStGTGFQdkFDc25kUG5LUUxXS2MKT0pTYWNrcHptRTlOUjZ1VE9NZmJwSEpBQmlVZ2djaE5lL0svNDNyY0wxREFlUDB6NXlzMUkrUzEvZjF1dHo1bgpzZFU9Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
          certKey: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcEFJQkFBS0NBUUVBNldZdjh3Sm90Y2Z1clZ5RzE0bnUxNUJxeGJnTWVkTGRsQWM2aWg3a2EvSVIzTk1yCldRbEk0Z3RGUnkyclA4ZG5rZHFXa0FwWlJhM1NCSXZRdmptdzNubUs4bjF1dDVFbU5FK01qei9zMnRYa0VlQTcKRHQvUTJIV3JJQkpBTCtnMEdPWDBJVDREQ0RteDZNTWw2YWoraHNrenU4U0QvN1Bid1I5dkpmNnhUb09uc0hKRApnRGY3Qnh1dTdEOTZqUkltNXdMKzgza3ZOSUFuTkowYXlsMWtkSUpIb25CVEFtelR4WUJudm5nN2tMdWhpMEZICkI4SmxPRmM0d2JzdHQreUw0WFFpNmNuVGp0Z0g0eC95L0FHOTJsYnhOV3hpV0lITmtQMHBsaUlsQUtqQzVkdDUKUzB5SnFGYURLOWNRTWlaanJpc3Nnbll3VjlHUkhjaGE4YkNqYXdJREFRQUJBb0lCQUFMSUNmZytaaHNNZCthdQovSmhpOTJxd09PV0VUUG5Dcm90T0RyK0lvTFk4bTBQamJGZlNTWUVRRzFJKzFCU2Rmcmw1UG1RWEMzdE9GL3VmCjR1dnhhZzhzcWFBOEtHNmRselAyWXJsdVRKZExCejNEUzFEaEQrOFViK2FnOFF6aEdvWFZiN1JadGRXS1FubUEKb2RvSC9vaUNxMUFvaGw0c3VZaXlwRE55dHBBMThaMHV0VWI4V1ZzRHB6QzAvSmt1WjJjTWJHWm95VFZLeXAxVgpOTHF6V2VVZFByaU1tV2lHTVlLb3hkdTBRQis5NGRhMTNHdWlLcm8vRmNQc3k3NHdQTVpmcHp2a0RUS0FmRmR6CmdUeGtQQ2t2bmJNcnZZeU5zb25nZy9QQUxqeGdsYm52K2E5VTgxdUlibUd5SzBLWlFWZEs3TU9LYWo0Sk9VbSsKRnNXVjlwa0NnWUVBOUlOTEd3eWc4Zk51QlN4dTJ6TDZ2d0tzdkFFUVN5QTR3cUVjQ1JVanVwK0NFNm1NMmp4VgpXRWRXVXlsbkhSTHlTamxHKzFMSW8xUFY0dERYVTlibUsrbWlRMGluQkFVUzBKczhRTm04SFBjQm9rZ0QvNkFPCmNkWkN2VXhkTkZsdUgvaTMxUmhYZ0E4aHg5MjZDaXlGYlNyWU80MGNpQzdEenoyT3d2MGgwQ1VDZ1lFQTlGMDcKVkhtYzB0K095TVZVU3JwMW5kUUJOOXRuWUp5ak5BWDF2WDl4TVEzOVRwY2FqYllwSytPdlViakNnZEFPK0JHQQpwUWUyY1hNbk1PWGpvZFU3S1FjVjJvakpTK28rT0Vqc1VpQjZqRzFuWDdiWjVCbGs1OVZDMW1jNTlyTENvaGw4CjdEWUcxdllKMGVGdm84TS9UWVl2MlloM2puSC9Pb01DcjFXclNFOENnWUFMalFoSFJ0bHpsS1JsNml0eWYzNEkKOS85aEFrdmF3TEx0dnQ2c0x5dDQ3WUFmbmFyaHhHZmp1N3NBUXJ4MFN5alhDTTJwb2NlSXI3VXkrZHF5UXp5cwpabVViK0pxclBmSWRtTGZIK0lGQ2ZRaSt1ZGcyZzBFcmI0dkhsWXZ4cFNmbXFzRkVkOW5xV3N5bHZIdkZiMFQrCld6L0wwR2JBcURUbjNXaVpIWXd6WVFLQmdRQ25GMzB6UlRrYjVHd1JFd1dSVjdDSExHbHMxV1Q1NWdHZTJCaHgKN0V2cy9DRGlkV1pkMGxxU3ZVeXJkOGZnMWZEMlpabHV2emhjbVI0S1RKZjdsLyt0RFVBL1AxdE53cTJxOVFwTApHaFJTSTVrVkZNWW5OOG9NMElHMGM3OXAxbEJLWVYxUGM1MzNyU09IMVR2dVlkck9XdHdyUmlwaVI4YjdMb3hPCmNpajk5d0tCZ1FDQlRaZ1BTbDh1QXhjSmdvMnBTSUtyc3BQOGhZa3ZEbzUwa1FjdjN1RS9hVERRNmRLYWJ4aUUKYnAzUWJPblErMm56VzFrY3d1b3NJYTJuZWVmajJMM0huVXM0Y0lXNGR3Y2dBUWZxbmd0UWoyemdFd2VXajd3WgoreUJlT3c0dWowckpTa2tpWW9MV0FWclNZSzRMQWZBUFFpbnZhVzhNU0JBcVgyL1BXcFo4M2c9PQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo=
          ca: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURPRENDQWlDZ0F3SUJBZ0lSQU12aG5zeVdxOGs3QlJXWWtZSnZuVnd3RFFZSktvWklodmNOQVFFTEJRQXcKSmpFa01DSUdBMVVFQXhNYlptRnlaMkYwWlMxemFXUmxZMkZ5TFdsdWFtVmpkRzl5TFdOaE1CNFhEVEkwTURZeApOakF4TURJek1sb1hEVE0wTURZeE5EQXhNREl6TWxvd0pqRWtNQ0lHQTFVRUF4TWJabUZ5WjJGMFpTMXphV1JsClkyRnlMV2x1YW1WamRHOXlMV05oTUlJQklqQU5CZ2txaGtpRzl3MEJBUUVGQUFPQ0FROEFNSUlCQ2dLQ0FRRUEKeTZaQzh4TkF0SVBWNnJubUJoTnY5bWEweUlVSXkzVVBlWVcwYWM3OHprSmJoVVZud2VCYmVXVzBlQWxxRHl5RQpjcktVT0NUOUxaY08rUWYrYm1kSGI1c2FwOEhSTUZJdUIrRExhZ2xqamRwdFJsSnVoYlV3aVJTY1NTOGkrTTRqClY0TEZIQllPVk82ckx0aHFhQnVlK0RQSUY3Q1orbmkzTjdZcWxSS3VkZTV4aTNlbEY3cEhHekNCbmlqUjRtTDkKdFphcmcyU3JDNzJFREFla0krUnpmRkQvaklzMHJXeHdpMHE4c2dGRXJkZklxZ201YmJwRTl5N3lpbnY1SkVsTgp1Z2VIdW1WTU9yV1FlUlNqVXM3MUs2dTZBNFkzM3hwaU00a2tSMVZDSjl2aDFEL0tiZFJSRjNUZXJXRm9YZk5BCndsY3lOaWpJeXBpcXFJaWN1M3loT1FJREFRQUJvMkV3WHpBT0JnTlZIUThCQWY4RUJBTUNBcVF3SFFZRFZSMGwKQkJZd0ZBWUlLd1lCQlFVSEF3RUdDQ3NHQVFVRkJ3TUNNQThHQTFVZEV3RUIvd1FGTUFNQkFmOHdIUVlEVlIwTwpCQllFRkhScmNrRDlac24xRjlxUUhxMTRvYTIvK0hHOE1BMEdDU3FHU0liM0RRRUJDd1VBQTRJQkFRQ3FzZWlmClA5L2RHclBwWDVnSlBqK2xZR25oMlhDNDRVS0wzYnlmQ0t2RGNCeHVia203V21Ja3pXRnlLZG4wM3lDbkhJTEgKc2d5Mk5OWXdjSWlJVjB4ZUlMZXBJTzEreDJIZXV0eitiMWErWXB3dTAvZ3JweHJFbnlHOHVBcEk3UGc2RkVXcgp2RjdTaStVUkhYWWwxMmFhaU5Ka3AxZlg4UkI5N0drQ0VXYmh2citXQ2ZSOS9QUlVYVGljVC9zTU9aZmdJNVcwCmY3czBtWU5WaDVXQjlhWFdBM1UwVXV2bkNueEEwVkVqODV3MkEwdWthNVZzMzk2ei9LQXFHZHhYdkR1blZoUWIKcTc5U29NcDkrcVErRUJLeVY5VDRucjlGT2oxMVFNTi9ROGczSWliRzZkUysvOWJ0NldQbGI4ZUNQM3lrOVFVRQp1VE1vZkdEdE15MjFGdG1VCi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
---
# Source: fargate-sidecar-injector/templates/clusterrolebinding.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  annotations:
  labels:
    helm.sh/chart: fargate-sidecar-injector-0.1.5
    app.kubernetes.io/name: fargate-sidecar-injector
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm
  name: fargate-sidecar-injector
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: cluster-admin
subjects:
- kind: ServiceAccount
  name: fargate-sidecar-injector
  namespace: default
---
# Source: fargate-sidecar-injector/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: fargate-sidecar-injector
  labels:
    helm.sh/chart: fargate-sidecar-injector-0.1.5
    app.kubernetes.io/name: fargate-sidecar-injector
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm
spec:
  type: ClusterIP
  ports:
    - port: 8443
      targetPort: 8443
      protocol: TCP
      name: http
    - name: https
      port: 443
      protocol: TCP
      targetPort: 8443
  selector:
    app.kubernetes.io/name: fargate-sidecar-injector
    app.kubernetes.io/instance: my-release
---
# Source: fargate-sidecar-injector/templates/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: fargate-sidecar-injector
  labels:
    helm.sh/chart: fargate-sidecar-injector-0.1.5
    app.kubernetes.io/name: fargate-sidecar-injector
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: fargate-sidecar-injector
      app.kubernetes.io/instance: my-release
  template:
    metadata:
      labels:
        app.kubernetes.io/name: fargate-sidecar-injector
        app.kubernetes.io/instance: my-release
    spec:
      serviceAccountName: fargate-sidecar-injector
      securityContext:
        {}
      containers:
        - name: fargate-sidecar-injector
          securityContext:
            {}
          image: "mziyabo/fargate-eks-sidecar-injector:latest"
          imagePullPolicy: Always
          ports:
            - name: http
              containerPort: 8443
              protocol: TCP
          # livenessProbe:
          #   httpGet:
          #     path: /
          #     port: 8443
          # readinessProbe:
          #   httpGet:
          #     path: /
          #     port: 8443
          resources:
            limits:
              cpu: 1
              memory: 1Gi
            requests:
              cpu: 500m
              memory: 512Mi
          env:
          - name: WEBHOOK_NAMESPACE
            valueFrom:
              fieldRef:
                fieldPath: metadata.namespace
          volumeMounts:
          - name: "config"
            mountPath: "/etc/fargatesidecarinjector/"
      volumes:
      - name: config
        configMap:
          name: fargate-sidecar-injector
---
# Source: fargate-sidecar-injector/templates/tests/test-connection.yaml
apiVersion: v1
kind: Pod
metadata:
  name: "my-release-fargate-sidecar-injector-test-connection"
  labels:
    helm.sh/chart: fargate-sidecar-injector-0.1.5
    app.kubernetes.io/name: fargate-sidecar-injector
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm
  annotations:
    "helm.sh/hook": test
spec:
  containers:
    - name: wget
      image: busybox
      command: ['wget']
      args: ['my-release-fargate-sidecar-injector:8443']
  restartPolicy: Never
---
# Source: fargate-sidecar-injector/templates/mutatingwebhook.yaml
apiVersion: admissionregistration.k8s.io/v1
kind: MutatingWebhookConfiguration
metadata:
  name: fargate-sidecar-injector
  annotations:
    "helm.sh/hook": post-install
    "helm.sh/hook-weight": -5"
  labels:
    helm.sh/chart: fargate-sidecar-injector-0.1.5
    app.kubernetes.io/name: fargate-sidecar-injector
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm
webhooks:
  - name: "fargate-sidecar-injector.default.svc"
    failurePolicy: Fail
    sideEffects: None
    admissionReviewVersions: ["v1","v1beta1"]
    clientConfig:
      service:
        namespace: default
        name: fargate-sidecar-injector
        path: /mutate
      caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURPRENDQWlDZ0F3SUJBZ0lSQU12aG5zeVdxOGs3QlJXWWtZSnZuVnd3RFFZSktvWklodmNOQVFFTEJRQXcKSmpFa01DSUdBMVVFQXhNYlptRnlaMkYwWlMxemFXUmxZMkZ5TFdsdWFtVmpkRzl5TFdOaE1CNFhEVEkwTURZeApOakF4TURJek1sb1hEVE0wTURZeE5EQXhNREl6TWxvd0pqRWtNQ0lHQTFVRUF4TWJabUZ5WjJGMFpTMXphV1JsClkyRnlMV2x1YW1WamRHOXlMV05oTUlJQklqQU5CZ2txaGtpRzl3MEJBUUVGQUFPQ0FROEFNSUlCQ2dLQ0FRRUEKeTZaQzh4TkF0SVBWNnJubUJoTnY5bWEweUlVSXkzVVBlWVcwYWM3OHprSmJoVVZud2VCYmVXVzBlQWxxRHl5RQpjcktVT0NUOUxaY08rUWYrYm1kSGI1c2FwOEhSTUZJdUIrRExhZ2xqamRwdFJsSnVoYlV3aVJTY1NTOGkrTTRqClY0TEZIQllPVk82ckx0aHFhQnVlK0RQSUY3Q1orbmkzTjdZcWxSS3VkZTV4aTNlbEY3cEhHekNCbmlqUjRtTDkKdFphcmcyU3JDNzJFREFla0krUnpmRkQvaklzMHJXeHdpMHE4c2dGRXJkZklxZ201YmJwRTl5N3lpbnY1SkVsTgp1Z2VIdW1WTU9yV1FlUlNqVXM3MUs2dTZBNFkzM3hwaU00a2tSMVZDSjl2aDFEL0tiZFJSRjNUZXJXRm9YZk5BCndsY3lOaWpJeXBpcXFJaWN1M3loT1FJREFRQUJvMkV3WHpBT0JnTlZIUThCQWY4RUJBTUNBcVF3SFFZRFZSMGwKQkJZd0ZBWUlLd1lCQlFVSEF3RUdDQ3NHQVFVRkJ3TUNNQThHQTFVZEV3RUIvd1FGTUFNQkFmOHdIUVlEVlIwTwpCQllFRkhScmNrRDlac24xRjlxUUhxMTRvYTIvK0hHOE1BMEdDU3FHU0liM0RRRUJDd1VBQTRJQkFRQ3FzZWlmClA5L2RHclBwWDVnSlBqK2xZR25oMlhDNDRVS0wzYnlmQ0t2RGNCeHVia203V21Ja3pXRnlLZG4wM3lDbkhJTEgKc2d5Mk5OWXdjSWlJVjB4ZUlMZXBJTzEreDJIZXV0eitiMWErWXB3dTAvZ3JweHJFbnlHOHVBcEk3UGc2RkVXcgp2RjdTaStVUkhYWWwxMmFhaU5Ka3AxZlg4UkI5N0drQ0VXYmh2citXQ2ZSOS9QUlVYVGljVC9zTU9aZmdJNVcwCmY3czBtWU5WaDVXQjlhWFdBM1UwVXV2bkNueEEwVkVqODV3MkEwdWthNVZzMzk2ei9LQXFHZHhYdkR1blZoUWIKcTc5U29NcDkrcVErRUJLeVY5VDRucjlGT2oxMVFNTi9ROGczSWliRzZkUysvOWJ0NldQbGI4ZUNQM3lrOVFVRQp1VE1vZkdEdE15MjFGdG1VCi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
    rules:
      - apiGroups: [""]
        resources:
          - "pods"
        apiVersions:
          - "*"
        operations:
          - CREATE
          - UPDATE
