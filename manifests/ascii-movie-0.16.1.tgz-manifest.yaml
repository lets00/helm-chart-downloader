---
# Source: ascii-movie/templates/common.yaml
apiVersion: v1
kind: Secret
metadata:
  name: my-release-ascii-movie-ssh
  labels:
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: ascii-movie
    app.kubernetes.io/version: 1.9.3
    helm.sh/chart: ascii-movie-0.16.1
stringData:
  ssh_host_ed25519_key: |
    -----BEGIN PRIVATE KEY-----
    MC4CAQAwBQYDK2VwBCIEIGK4TFZnvvoMpbV2qdsKGftAMn+37Z/jD0vG6jXHpSVu
    -----END PRIVATE KEY-----
  ssh_host_rsa_key: |
    -----BEGIN RSA PRIVATE KEY-----
    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
    -----END RSA PRIVATE KEY-----
---
# Source: ascii-movie/templates/common.yaml
apiVersion: v1
kind: Service
metadata:
  name: my-release-ascii-movie-api
  labels:
    app.kubernetes.io/service: my-release-ascii-movie-api
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: ascii-movie
    app.kubernetes.io/version: 1.9.3
    helm.sh/chart: ascii-movie-0.16.1
  annotations:
spec:
  type: ClusterIP
  ports:
    - port: 1977
      targetPort: http
      protocol: TCP
      name: http
  selector:
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/name: ascii-movie
---
# Source: ascii-movie/templates/common.yaml
apiVersion: v1
kind: Service
metadata:
  name: my-release-ascii-movie
  labels:
    app.kubernetes.io/service: my-release-ascii-movie
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: ascii-movie
    app.kubernetes.io/version: 1.9.3
    helm.sh/chart: ascii-movie-0.16.1
  annotations:
spec:
  type: LoadBalancer
  externalTrafficPolicy: Local
  ports:
    - port: 22
      targetPort: ssh
      protocol: TCP
      name: ssh
    - port: 23
      targetPort: telnet
      protocol: TCP
      name: telnet
  selector:
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/name: ascii-movie
---
# Source: ascii-movie/templates/common.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: my-release-ascii-movie
  labels:
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: ascii-movie
    app.kubernetes.io/version: 1.9.3
    helm.sh/chart: ascii-movie-0.16.1
spec:
  revisionHistoryLimit: 3
  replicas: 1
  strategy:
    type: RollingUpdate
  selector:
    matchLabels:
      app.kubernetes.io/name: ascii-movie
      app.kubernetes.io/instance: my-release
  template:
    metadata:
      annotations:
        
        checksum/secrets: c0946295e4094e120cd116e1a04138ea8780410474d7f3095268584661c55e0a
      labels:
        app.kubernetes.io/name: ascii-movie
        app.kubernetes.io/instance: my-release
    spec:
      
      serviceAccountName: default
      automountServiceAccountToken: true
      securityContext:
        runAsNonRoot: true
      dnsPolicy: ClusterFirst
      enableServiceLinks: true
      containers:
        - name: my-release-ascii-movie
          image: ghcr.io/gabe565/ascii-movie:1.9.3
          imagePullPolicy: Always
          securityContext:
            readOnlyRootFilesystem: true
          env:
            - name: ASCII_MOVIE_API_ADDRESS
              value: :1977
            - name: ASCII_MOVIE_CONCURRENT_STREAMS
              value: "10"
            - name: ASCII_MOVIE_SSH_ADDRESS
              value: :22
            - name: ASCII_MOVIE_SSH_ENABLED
              value: "true"
            - name: ASCII_MOVIE_SSH_HOST_KEY
              value: /etc/ssh/ssh_host_rsa_key,/etc/ssh/ssh_host_ed25519_key
            - name: ASCII_MOVIE_TELNET_ADDRESS
              value: :23
            - name: ASCII_MOVIE_TELNET_ENABLED
              value: "true"
          ports:
            - name: http
              containerPort: 1977
              protocol: TCP
            - name: ssh
              containerPort: 22
              protocol: TCP
            - name: telnet
              containerPort: 23
              protocol: TCP
          volumeMounts:
            - name: ssh
              mountPath: /etc/ssh
          livenessProbe:
            failureThreshold: 3
            httpGet:
              path: /health
              port: http
              scheme: HTTP
            initialDelaySeconds: 0
            periodSeconds: 10
            timeoutSeconds: 1
          readinessProbe:
            failureThreshold: 3
            httpGet:
              path: /health
              port: http
              scheme: HTTP
            initialDelaySeconds: 0
            periodSeconds: 10
            timeoutSeconds: 1
          startupProbe:
            failureThreshold: 30
            httpGet:
              path: /health
              port: http
              scheme: HTTP
            initialDelaySeconds: 0
            periodSeconds: 5
            timeoutSeconds: 1
      volumes:
        - name: ssh
          secret:
            secretName: my-release-ascii-movie-ssh
