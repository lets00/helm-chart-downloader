---
# Source: couchbase-operator/templates/admission-deployment.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: my-release-couchbase-admission-controller
  labels:
    app.kubernetes.io/name: couchbase-admission-controller
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: couchbase-operator-2.64.0
---
# Source: couchbase-operator/templates/couchbase-backup.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: couchbase-backup
---
# Source: couchbase-operator/templates/operator-deployment.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: my-release-couchbase-operator
  labels:
    app.kubernetes.io/name: couchbase-operator
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: couchbase-operator-2.64.0
---
# Source: couchbase-operator/templates/admission-deployment.yaml
apiVersion: v1
kind: Secret
metadata:
  name: my-release-couchbase-admission-controller
  labels:
    app.kubernetes.io/name: couchbase-admission-controller
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: couchbase-operator-2.64.0
type: Opaque
data:
  tls-cert-file: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURoVENDQW0yZ0F3SUJBZ0lSQVA0ZzA3N2I1YlRPbmQyaVAxSWJnbGd3RFFZSktvWklodmNOQVFFTEJRQXcKSWpFZ01CNEdBMVVFQXhNWFlXUnRhWE56YVc5dUxXTnZiblJ5YjJ4c1pYSXRZMkV3SGhjTk1qUXdOakUxTWpNMQpNekEyV2hjTk16UXdOakV6TWpNMU16QTJXakEwTVRJd01BWURWUVFERXlsdGVTMXlaV3hsWVhObExXTnZkV05vClltRnpaUzFoWkcxcGMzTnBiMjR0WTI5dWRISnZiR3hsY2pDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVAKQURDQ0FRb0NnZ0VCQU9RcjR1SlByQkJMUjM0QXdDZjN5eG1WMTRpTVllM1hlVk9wcXZ2M3piNGt1MmVGTlp1VApSR25pdDZkeW5VZlVNdEdpaldPOUROK0hTckQ3ZG5kUXV2ZjNxR29KSERJK1F6MHNlZ280enhibTZVOXV0U2toCklDOFBtRnZGME5LaCtUSi9ZY3NETXdONlpNeVdzbWtFVkRLbVU3ZVZYOTdUM0hYVE5JNFQ0WFBSMi9hbllSczEKSld2eHBxNlhINlNXMWpkVXIvcWZXZG0yTTFzd0szU2JUNVpXRlpsZ0VuYkppWmM5S2xzWmNqTFN2NlNzdDJGaQpEYTk3L0taUlVKa1BsempHeisxTnpaeU13VW9zaE02aklJV09sdmRhV3pqV2IzWGorSGx3RTJGZ29CYm5IbytxCnFLc3I4alZoamZDYVJramlLRFZ0VnF6Y2kwZHVBM0h6UHFjQ0F3RUFBYU9Cb3pDQm9EQU9CZ05WSFE4QkFmOEUKQkFNQ0JhQXdIUVlEVlIwbEJCWXdGQVlJS3dZQkJRVUhBd0VHQ0NzR0FRVUZCd01DTUF3R0ExVWRFd0VCL3dRQwpNQUF3SHdZRFZSMGpCQmd3Rm9BVWY0a2tUU0htaW5kT01OWFRuUTRyVjhuVzJNZ3dRQVlEVlIwUkJEa3dONEkxCmJYa3RjbVZzWldGelpTMWpiM1ZqYUdKaGMyVXRZV1J0YVhOemFXOXVMV052Ym5SeWIyeHNaWEl1WkdWbVlYVnMKZEM1emRtTXdEUVlKS29aSWh2Y05BUUVMQlFBRGdnRUJBQ1hIb2ptcjZrWlZXaDZvTzZOVXh0enlzYlZXdXdicgpNQmx0NnQvOGt5cGdNRkJXZmU1eFlEbkFTN0ZJWkk1ZThsL2c5K0xZME5VeU54U2tESVJFMkUrbnVFYUZlVklrCmdsV0F0TXFNakgrV1I3TFpFZFpFNHozYkdqc0E5czFyU3FuODNKOXN2Y2o5SzlCZjducE9pcFJWTlo0V3VTWkMKU2VBajdZVkhKOVcxYVcrazVVZnZVMG8zQmVUdjVlbVZkU0g3cWt3dUNZUTdkUit6Q0VTOCttY1krLzdSQmpDUgptUjRHVjR6S0hZcGttdUxBdVdFQzd4bENoRkNTU3QvZFhIYjV0VndrTkE5bHBCcTRXTWo5dHJwMjdnaUxFeXNDCjc1RE1mYVdWcXdzb2twalIrK1FkWjhjOVR0NjU2eGp2ZXllZEthTm9nS3ZvdjBWTC9BaTE5K0U9Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
  tls-private-key-file: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFb3dJQkFBS0NBUUVBNUN2aTRrK3NFRXRIZmdEQUovZkxHWlhYaUl4aDdkZDVVNm1xKy9mTnZpUzdaNFUxCm01TkVhZUszcDNLZFI5UXkwYUtOWTcwTTM0ZEtzUHQyZDFDNjkvZW9hZ2tjTWo1RFBTeDZDampQRnVicFQyNjEKS1NFZ0x3K1lXOFhRMHFINU1uOWh5d016QTNwa3pKYXlhUVJVTXFaVHQ1VmYzdFBjZGRNMGpoUGhjOUhiOXFkaApHelVsYS9HbXJwY2ZwSmJXTjFTditwOVoyYll6V3pBcmRKdFBsbFlWbVdBU2RzbUpsejBxV3hseU10Sy9wS3kzCllXSU5yM3Y4cGxGUW1RK1hPTWJQN1UzTm5JekJTaXlFenFNZ2hZNlc5MXBiT05admRlUDRlWEFUWVdDZ0Z1Y2UKajZxb3F5dnlOV0dOOEpwR1NPSW9OVzFXck55TFIyNERjZk0rcHdJREFRQUJBb0lCQUVRZXpoZmV6WEgzNTVvNAp3eVdybHhsR1lSakZRSjl2aXl0dEpqMGZtRzlDTENrVjNoRmFnRHhVa1p3T1hlS0orYm9ZbTduQlFVeWk2YXU1CkIzOUx2T1kzTERLc0VaejJkY0NYdkwrOGdpZEdQVFdYeWNKRHY0WU5VK0ZpUjV2Nis1a1Y2cTVmZ0NWenJ4QmQKbFZwQkRwb29paW52RUxaSDdqUEhJSk9pWDliaHFpTStjNks0TjRYOWhsYnB1TVNPbzc5WEJyYk5FOFBrQWY4cQpGRXdodW9BMmxYZnBRU0lLQll5Q2NEQ2M5dnM5dHlEbHRlU0ZZdDFXaE5wZXhoYXZ0dTJTdlJqdG9LbEFRaHdVCjNhd0kvTFl0T1RPQm5ENi96RHY1UkRIb3BFeDFpeklUWGFTb2Q0eU4wM3UrcG9aVkI1WFUyK3Fjd2lib0NtOUIKcE5JdSs0RUNnWUVBL0x5NnlhaHRaTmZGU2RydE5DeE1qcVJvL0tKdDZqb3VtRi85bUVCNVFoSUpVMFZ5Q0tUcgpBQkF3N242RXZVMjhuV0w1MWdYOGhPVG1MS21SeHZaaGM5c21xendPNFB5R3NKYURKVFNzdUZCZFp5dUQxZnFMCmg2M3gydGtpSVhVQ29GTXJxSzllZ3VjanJFaWFvVEJsQ3o3eHJzT0NRWlRGdlFqeU94dWhuV0VDZ1lFQTV4MzQKSHI4MzdqMHRlOGNUZ3QrVkZ1Ym95NVFEK1o2a21kQ0VUZUhjYVhIMzJUNlJRbnVBRTZKclphb0Nid1luUzRxZQpGN3NUWUJkRDJpNWVCNzdRTUFPY3o2MXFjbUkwQmpydnhLWmJnb1IwazdqQVFVRXJwZXRvNDZ6YXBaUEtoWW9oCkp3R0hkNkd1bnlMK3ZMOENraDA0SUJBRCsvT0JBTnlrRkh6a2tRY0NnWUJvWGFzb2tST3plK0t0YitsYURSMEUKSG1KNFNMN281V1BPYW4wM1BSQ1Z0d3NBeHdHakRpODQxSGJRVlpDTTk2ZjJ1aU4vUFBPZEVVVDNsb0pyVGR6SwpVZW95OWRjVEUxU3ZZVWdBdWpMRTNmTGtJclVMVEs0SHRrM1VXS3ZlY3dwRm1ITEQ4cjh0Z1ROYTlwUmNFYmI0CklPTCtqeCtmNDBhUW5Ed2pLbkxmb1FLQmdIMldEMm5GeG9LeXc3QnE4UE5Bd3liNnVxMUU5UlFEWExZb1ZIeHQKcXZPeGRsaWFZeHlaTjNOejRxQVB6ZHErb1VPdlExRHAyeEZ3RXZMUUYxQm1JNEt6czlZMkNZMjJSMGJMWjlhWAovMG5nNStnTmtJcmsrdTdpQ05FTzhKRGd5ai9lV3oxeTIwWHFtWlRuMHp5RkhzUi9GQ3g0QjNJMVUzaEFiUGlsCkZSNnBBb0dCQUxQZktEdlR2SU02b0xJbDBiRzk1SU4rRmQxY1lUUE9UR3VNMHQzNitGQUtyZWlQbTRXcnpYZUoKaEJHKzZjdDNtR3lTQ1R5ZlIrRmt6ZTIzZllLalZQTER2U1pPaUkyRWloV2lIQVdFYkY2L2YwV2tqWmdCL1EyMgpWVU42TlZpN1huYlVTSVJVMm5xamlTcDlpRStKdU5XOGwwNWptejBDRTJ5YlpIQ0llT3JzCi0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0tCg==
---
# Source: couchbase-operator/templates/couchbase-cluster.yaml
apiVersion: v1
kind: Secret
metadata:
  name: auth-my-release-couchbase-cluster
type: Opaque
data:
  username: "QWRtaW5pc3RyYXRvcg=="
  password: "VkVGcWMzUkk="
---
# Source: couchbase-operator/templates/admission-deployment.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: my-release-couchbase-admission-controller
  labels:
    app.kubernetes.io/name: couchbase-admission-controller
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: couchbase-operator-2.64.0
rules:
- apiGroups:
  - couchbase.com
  resources:
  - couchbaseclusters
  - couchbasebuckets
  - couchbaseephemeralbuckets
  - couchbasememcachedbuckets
  - couchbasereplications
  - couchbaseusers
  - couchbasegroups
  - couchbaserolebindings
  - couchbasebackups
  - couchbasebackuprestores
  - couchbaseautoscalers
  - couchbasecollections
  - couchbasecollectiongroups
  - couchbasescopes
  - couchbasescopegroups
  - couchbasemigrationreplications
  verbs:
  - get
  - list
- apiGroups:
  - ""
  resources:
  - secrets
  verbs:
  - get
- apiGroups:
  - storage.k8s.io
  resources:
  - storageclasses
  verbs:
  - get
---
# Source: couchbase-operator/templates/admission-deployment.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: my-release-couchbase-admission-controller
  labels:
    app.kubernetes.io/name: couchbase-admission-controller
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: couchbase-operator-2.64.0
subjects:
- kind: ServiceAccount
  name: my-release-couchbase-admission-controller
  namespace: default
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: my-release-couchbase-admission-controller
---
# Source: couchbase-operator/templates/couchbase-backup.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: couchbase-backup
rules:
- apiGroups:
  - batch
  resources:
  - jobs
  - cronjobs
  verbs:
  - get
  - list
- apiGroups:
  - ""
  resources:
  - pods
  verbs:
  - get
  - list
- apiGroups:
  - ""
  resources:
  - events
  verbs:
  - create
- apiGroups:
  - couchbase.com
  resources:
  - couchbasebackups
  - couchbasebackuprestores
  verbs:
  - get
  - list
  - watch
  - patch
  - update
---
# Source: couchbase-operator/templates/operator-deployment.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: my-release-couchbase-operator
  labels:
    app.kubernetes.io/name: couchbase-operator
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: couchbase-operator-2.64.0
rules:
- apiGroups:
  - batch
  resources:
  - jobs
  - cronjobs
  verbs:
  - list
  - watch
  - create
  - update
  - delete
- apiGroups:
  - couchbase.com
  resources:
  - couchbaseclusters
  - couchbaseclusters/finalizers
  verbs:
  - get
  - list
  - watch
  - update
- apiGroups:
  - couchbase.com
  resources:
  - couchbasereplications
  - couchbasemigrationreplications
  - couchbaseusers
  - couchbasegroups
  - couchbaserolebindings
  - couchbasebackups
  verbs:
  - list
  - watch
- apiGroups:
  - couchbase.com
  resources:
  - couchbasebuckets
  - couchbaseephemeralbuckets
  - couchbasememcachedbuckets
  - couchbasescopes
  - couchbasescopegroups
  - couchbasecollections
  - couchbasecollectiongroups
  verbs:
  - list
  - watch
  - create
- apiGroups:
  - couchbase.com
  resources:
  - couchbasebackuprestores
  verbs:
  - list
  - watch
  - delete
- apiGroups:
  - couchbase.com
  resources:
  - couchbaseautoscalers
  verbs:
  - get
  - list
  - watch
  - create
  - update
  - delete
- apiGroups:
  - couchbase.com
  resources:
  - couchbaseautoscalers/status
  verbs:
  - update
- apiGroups:
  - ""
  resources:
  - configmaps
  verbs:
  - get
  - list
  - watch
  - create
  - update
  - delete
- apiGroups:
  - ""
  resources:
  - pods
  - pods/status
  - services
  - persistentvolumeclaims
  verbs:
  - get
  - list
  - watch
  - create
  - update
  - delete
  - patch
- apiGroups:
  - ""
  resources:
  - events
  verbs:
  - list
  - create
  - update
- apiGroups:
  - ""
  resources:
  - secrets
  verbs:
  - get
  - create
  - update
  - list
  - watch
- apiGroups:
  - policy
  resources:
  - poddisruptionbudgets
  verbs:
  - get
  - create
  - delete
  - list
  - watch
- apiGroups:
  - coordination.k8s.io
  resources:
  - leases
  verbs:
  - get
  - create
  - update
---
# Source: couchbase-operator/templates/couchbase-backup.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: couchbase-backup
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: couchbase-backup
subjects:
- kind: ServiceAccount
  name: couchbase-backup
  namespace: default
---
# Source: couchbase-operator/templates/operator-deployment.yaml
kind: RoleBinding
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: my-release-couchbase-operator
  labels:
    app.kubernetes.io/name: couchbase-operator
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: couchbase-operator-2.64.0
subjects:
- kind: ServiceAccount
  name: my-release-couchbase-operator
  namespace: default
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: my-release-couchbase-operator
---
# Source: couchbase-operator/templates/admission-deployment.yaml
apiVersion: v1
kind: Service
metadata:
  name: my-release-couchbase-admission-controller
  labels:
    app.kubernetes.io/name: couchbase-admission-controller
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: couchbase-operator-2.64.0
spec:
  selector:
    app.kubernetes.io/name : couchbase-admission-controller
  ports:
  - protocol: TCP
    port: 443
    targetPort: 8443
---
# Source: couchbase-operator/templates/operator-deployment.yaml
apiVersion: v1
kind: Service
metadata:
  name: my-release-couchbase-operator
  labels:
    app.kubernetes.io/name: couchbase-operator
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: couchbase-operator-2.64.0
spec:
  ports:
  - name: http-pprof
    port: 8080
    protocol: TCP
    targetPort: 8080
  - name: http-prometheus
    port: 8383
    protocol: TCP
    targetPort: 8383
  selector:
    app.kubernetes.io/name: couchbase-operator
---
# Source: couchbase-operator/templates/admission-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: my-release-couchbase-admission-controller
  labels:
    app.kubernetes.io/name: couchbase-admission-controller
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: couchbase-operator-2.64.0
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: couchbase-admission-controller
  template:
    metadata:
      labels:
        app.kubernetes.io/name: couchbase-admission-controller
      annotations:
        checksum/config: fd79a70bd3f73b9e88df181ad877897632f48af3e1ab7290b80e176d59390eb3
    spec:
      imagePullSecrets:
      volumes:
      - name: couchbase-operator-admission
        secret:
          secretName: my-release-couchbase-admission-controller
      securityContext:
        runAsNonRoot: true
      serviceAccountName:  my-release-couchbase-admission-controller
      containers:
      - name: couchbase-operator
        image: "couchbase/admission-controller:2.6.4"
        imagePullPolicy: IfNotPresent
        command:
        - couchbase-admission-controller
        args:
          - "--zap-log-level"
          -  "info" 
          - "--tls-cert-file"
          - "/var/run/secrets/couchbase.com/couchbase-operator-admission/tls-cert-file"
          - "--tls-private-key-file"
          - "/var/run/secrets/couchbase.com/couchbase-operator-admission/tls-private-key-file"
          - "--default-file-system-group=true"
          - "--validate-secrets=true"
          - "--validate-storage-classes=true"
        ports:
        - name: https
          containerPort: 443
        resources:
            {}
        volumeMounts:
        - name: couchbase-operator-admission
          mountPath: "/var/run/secrets/couchbase.com/couchbase-operator-admission"
          readOnly: true
---
# Source: couchbase-operator/templates/operator-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: my-release-couchbase-operator
  labels:
    app.kubernetes.io/name: couchbase-operator
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: couchbase-operator-2.64.0
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: couchbase-operator
  template:
    metadata:
      labels:
        app.kubernetes.io/name: couchbase-operator
    spec:
      serviceAccountName: my-release-couchbase-operator
      imagePullSecrets:
      containers:
      - name: couchbase-operator
        image: "couchbase/operator:2.6.4"
        imagePullPolicy: IfNotPresent
        command:
        - couchbase-operator
        args:
        - "--pod-create-timeout=10m"
        env:
        - name: WATCH_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        - name: POD_NAME
          valueFrom:
            fieldRef:
              fieldPath: metadata.name
        ports:
        - containerPort: 8080
          name: http
        - containerPort: 8383
          name: prometheus
        readinessProbe:
          httpGet:
            path: /readyz
            port: http
            scheme: HTTP
        resources:
            {}
---
# Source: couchbase-operator/templates/couchbase-cluster.yaml
apiVersion: "couchbase.com/v2"
kind: "CouchbaseCluster"
metadata:
  name: my-release
spec:

  antiAffinity: false
  autoResourceAllocation:
    cpuLimits: "4"
    cpuRequests: "2"
    enabled: false
    overheadPercent: 25
  backup:
    image: couchbase/operator-backup:1.3.5
    managed: true
    objectEndpoint:
      useVirtualPath: false
    serviceAccountName: couchbase-backup
    useIAMRole: false
  buckets:
    managed: true
    synchronize: false
  cluster:
    analyticsServiceMemoryQuota: 1Gi
    autoCompaction:
      databaseFragmentationThreshold:
        percent: 30
      parallelCompaction: false
      timeWindow:
        abortCompactionOutsideWindow: false
      tombstonePurgeInterval: 72h
      viewFragmentationThreshold:
        percent: 30
    autoFailoverMaxCount: 1
    autoFailoverOnDataDiskIssues: false
    autoFailoverOnDataDiskIssuesTimePeriod: 120s
    autoFailoverServerGroup: false
    autoFailoverTimeout: 120s
    dataServiceMemoryQuota: 256Mi
    eventingServiceMemoryQuota: 256Mi
    indexServiceMemoryQuota: 256Mi
    indexStorageSetting: memory_optimized
    indexer:
      logLevel: info
      maxRollbackPoints: 2
      memorySnapshotInterval: 200ms
      numReplica: 0
      redistributeIndexes: false
      stableSnapshotInterval: 5s
      storageMode: memory_optimized
    query:
      backfillEnabled: true
      temporarySpace: 5Gi
      temporarySpaceUnlimited: false
    searchServiceMemoryQuota: 256Mi
  enableOnlineVolumeExpansion: false
  enablePreviewScaling: false
  envImagePrecedence: false
  hibernate: false
  image: couchbase/server:7.2.3
  logging:
    audit:
      enabled: false
      garbageCollection:
        sidecar:
          age: 1h
          enabled: false
          image: busybox:1.33.1
          interval: 20m
      rotation:
        interval: 15m
        size: 20Mi
    server:
      configurationName: fluent-bit-config
      enabled: false
      manageConfiguration: true
      sidecar:
        configurationMountPath: /fluent-bit/config/
        image: couchbase/fluent-bit:1.2.1
  monitoring: {}
  networking:
    adminConsoleServiceTemplate:
      spec:
        type: NodePort
    adminConsoleServices:
    - data
    disableUIOverHTTP: false
    disableUIOverHTTPS: false
    exposeAdminConsole: true
    exposedFeatureServiceTemplate:
      spec:
        type: NodePort
    exposedFeatures:
    - client
    - xdcr
    waitForAddressReachable: 10m
    waitForAddressReachableDelay: 2m
  paused: false
  security:
    adminSecret: auth-my-release-couchbase-cluster
    podSecurityContext:
      fsGroup: 1000
      runAsNonRoot: true
      runAsUser: 1000
      windowsOptions:
        hostProcess: false
    rbac:
      managed: true
    securityContext:
      allowPrivilegeEscalation: false
    uiSessionTimeout: 0
  servers:
  - autoscaleEnabled: false
    env: []
    envFrom: []
    name: default
    pod:
      spec: {}
    services:
    - data
    - index
    - query
    - search
    - analytics
    - eventing
    size: 3
  softwareUpdateNotifications: false
  xdcr:
    managed: false
---
# Source: couchbase-operator/templates/couchbase-bucket.yaml
apiVersion: v1
kind: List
metadata:
  name: my-release-buckets
items:
- apiVersion: couchbase.com/v2
  kind: CouchbaseBucket
  metadata:
    name: default
    labels:
      cluster: my-release
  spec:
    compressionMode: passive
    conflictResolution: seqno
    enableFlush: false
    enableIndexReplica: false
    evictionPolicy: valueOnly
    ioPriority: low
    memoryQuota: 100Mi
    replicas: 1
    scopes:
      managed: false
      resources: []
    storageBackend: couchstore
---
# Source: couchbase-operator/templates/admission-deployment.yaml
apiVersion: admissionregistration.k8s.io/v1
kind: ValidatingWebhookConfiguration
metadata:
  name: my-release-couchbase-admission-controller
webhooks:
- name: my-release-couchbase-admission-controller.default.svc
  admissionReviewVersions:
  - v1
  rules:
  - apiGroups:
    - couchbase.com
    apiVersions:
    - v1
    - v2
    operations:
    - CREATE
    - UPDATE
    resources:
    - couchbaseclusters
    - couchbasebuckets
    - couchbaseephemeralbuckets
    - couchbasememcachedbuckets
    - couchbasereplications
    - couchbaseusers
    - couchbasegroups
    - couchbaserolebindings
    - couchbasebackups
    - couchbasebackuprestores
    - couchbaseautoscalers
    - couchbasecollections
    - couchbasecollectiongroups
    - couchbasescopes
    - couchbasescopegroups
    - couchbasemigrationreplications
  sideEffects: None
  failurePolicy: Fail
  clientConfig:
    service:
      namespace: default
      name: my-release-couchbase-admission-controller
      path: "/couchbaseclusters/validate"
    caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURMekNDQWhlZ0F3SUJBZ0lRRjVGclU4VGZjdmpqV3ZtL0l5c25vakFOQmdrcWhraUc5dzBCQVFzRkFEQWkKTVNBd0hnWURWUVFERXhkaFpHMXBjM05wYjI0dFkyOXVkSEp2Ykd4bGNpMWpZVEFlRncweU5EQTJNVFV5TXpVegpNRFZhRncwek5EQTJNVE15TXpVek1EVmFNQ0l4SURBZUJnTlZCQU1URjJGa2JXbHpjMmx2YmkxamIyNTBjbTlzCmJHVnlMV05oTUlJQklqQU5CZ2txaGtpRzl3MEJBUUVGQUFPQ0FROEFNSUlCQ2dLQ0FRRUFwdGsvam0rOS9lbFMKU0toZHdROW9XeGdLZld2SkdOMU1NVjl4RXZVaXlpRzF6azUxcXpPSjB2YzFEWmtRQTR3N1BQb0RhekV4Kyt5cwozQ2w4ZVJzTzRIN2dmZDFsd1Vvd216b2FHcVNNZk92d1U5RVd5YmlpT2VveTlkdjFJc0d1SFZneEp3K25nZzN2ClVFRWZMTXlNQTk0ZDdiMDdDYU5mRlA3MG1DTVMxY0hsbEhaN0dNbktwaWlFZjlFeXpQcnI5MVRRUUlsWVN4dTYKUWJzMXVLZzNnQjdBcWVOMFZXeitSdndENytNSGE0c0RXMEtoa0dOUWRRQ2E2aDZ3ZzlEdnppbEp1Y0ZLSlJtMgpmVjFuMXU5UEFGMUJCcDRQWHRLSWJSUlB5NkdlUzBIckloSEE0dHNlQUlIdUY5a3RNUU16czJIdk8yZHRuSzhFCm1ERGtpWS9xNFFJREFRQUJvMkV3WHpBT0JnTlZIUThCQWY4RUJBTUNBcVF3SFFZRFZSMGxCQll3RkFZSUt3WUIKQlFVSEF3RUdDQ3NHQVFVRkJ3TUNNQThHQTFVZEV3RUIvd1FGTUFNQkFmOHdIUVlEVlIwT0JCWUVGSCtKSkUwaAo1b3AzVGpEVjA1ME9LMWZKMXRqSU1BMEdDU3FHU0liM0RRRUJDd1VBQTRJQkFRQjlxOGFvYnAxYVgxWDM1blNxCmFVTXVkMlBJUjJCaThDbnlXRHpiM0UvaTN2SWdjeGtMcys3T2ZiRGNVK2N6SENIYnlyMTZHcGo1di93ZVRyQW0KZG0rUVdJbW5yNGt5K2JWcW5VaE5pYXMrWFFEakhTc3BvUkV4MUIzM1d2bkJBdW9iSkxSUkNLV2tKRnBydlRzaAp0RUppZ3J6MTlNZDJDaEU1Y1dyR0VrNkdIeTNqcjE4Rmg2cWU4cUlQNjhSajNyd0doWDZpYW8wbk90MytidHJCCjNXNi9Pd2ZTMHM1Tnp2djA0ejB4VFVWR28zcXMzZ1JoK29CQ3Myb3hQZ1lPbnhycVMvczdKLzM1a3NpUEFpc2wKbTZGcUhBZXJqUUREUXcyK3BYUEszMjducXVjcHl5YnFxdVJaSkFCd3RYK2tNOUladW1mUkZObkZzMHc3dnpZbQpNVEhrCi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
