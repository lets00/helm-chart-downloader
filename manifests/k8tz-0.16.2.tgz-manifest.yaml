---
# Source: k8tz/templates/namespace.yaml
apiVersion: v1
kind: Namespace
metadata:
  name: k8tz
  labels:
    k8tz.io/controller-namespace: "true"
    helm.sh/chart: k8tz-0.16.2
    app.kubernetes.io/name: k8tz
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "0.16.2"
    app.kubernetes.io/managed-by: Helm
---
# Source: k8tz/templates/serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: my-release-k8tz
  namespace: k8tz
  labels:
    helm.sh/chart: k8tz-0.16.2
    app.kubernetes.io/name: k8tz
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "0.16.2"
    app.kubernetes.io/managed-by: Helm
---
# Source: k8tz/templates/admission-webhook.yaml
apiVersion: v1
data:
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURKVENDQWcyZ0F3SUJBZ0lRWVU0UWY2MTJCZ2lZQmVIQ1NKZlJuREFOQmdrcWhraUc5dzBCQVFzRkFEQWUKTVJ3d0dnWURWUVFERXhOdGVTMXlaV3hsWVhObExtczRkSG91YzNaak1CNFhEVEkwTURZeE5USXpNemcwTVZvWApEVE00TURZeE5qSXpNemcwTVZvd0hqRWNNQm9HQTFVRUF4TVRiWGt0Y21Wc1pXRnpaUzVyT0hSNkxuTjJZekNDCkFTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBTG5JUXFjTGJjRExkNnBVU2JrbzhFa0EKdXJTUTBKWkdHMmxMMTJWNG5USmV0b01hVEIyTzczdFBtRnZncm9ZdFJHeFIwd3ViQUVMUWdCNU9HZE8zOWYzVgoxc1dXSE8wUFU3OHkzdnlPK0xJYjVjckc5VnZUQ2RCaW5Ncit4UmpkaFdQYkpIN0NOWncwR1E2bWtOTUIvR05WCmRJTnlNelRVVy96c1k1eXExVUJsQVAxTmhCUWN0WTMvdXVZQ1VmRkJHVUVyYTdSQVhzRjlTZDBvOGMvd1BYcDkKdVdEVS9ibDd5ZmFwcWRtUGtYMjA2YnBkLzNwVGE2SzV5b2QzTmpTaDAyOVdXTEdQRUhRckpIUlM1UytpbzhvUwowREdUcVBITmRlL2hSVVFwcXdPcEVtdmlCejhkV29xb0xiWnVyUHRpYUFQVkhtL2NpL0NxeGtPZWs4RmVFaTBDCkF3RUFBYU5mTUYwd0RnWURWUjBQQVFIL0JBUURBZ1dnTUIwR0ExVWRKUVFXTUJRR0NDc0dBUVVGQndNQkJnZ3IKQmdFRkJRY0RBakFNQmdOVkhSTUJBZjhFQWpBQU1CNEdBMVVkRVFRWE1CV0NFMjE1TFhKbGJHVmhjMlV1YXpoMAplaTV6ZG1Nd0RRWUpLb1pJaHZjTkFRRUxCUUFEZ2dFQkFJZHhxaUJyK3BRSTIrU1kwdE9nT1NPNkZ4M2xVcWVkClpmajBhTkVpQWlOcVRnMkJsMUJHMHJ4Umw1UlNzQ09JT3hmZW5zOG05Z0tVSHlibzJod1RRWWRiRi9LZmFpUXIKMC9DNFlDWHVrNmQ0TDR0b2hwb0hZNGZYSitLdU00OEVpWFBVZU1VMkw3NUQ3VUxVcHIyYVZqcktHRFhzbnBxbApVQ2Zjd2tkeE1sQWt6NGl4b04zaVNrcDJ2WkZyS3lCVTJ0bi92bTEzSnZzNEU5Y0NxS3pzN1k1MlcvTEFEcUo2CkdhZ3IwUktMVEx1VUx4NnNBMFg3NnZaS0R1a1hEK1pNZXBISGRRdGhRajFObndLMmdxTnBTOFZpWUtaN2pEeFcKMkxaMnRTTmh5b1BPQ2dCQzlXVXZyc2ZtRGQ4b1N1cXJaR0tFd1ZjemtTbnBlbTdSZmdGdXdWdz0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQ==
  tls.key: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFb2dJQkFBS0NBUUVBdWNoQ3B3dHR3TXQzcWxSSnVTandTUUM2dEpEUWxrWWJhVXZYWlhpZE1sNjJneHBNCkhZN3ZlMCtZVytDdWhpMUViRkhUQzVzQVF0Q0FIazRaMDdmMS9kWFd4WlljN1E5VHZ6TGUvSTc0c2h2bHlzYjEKVzlNSjBHS2N5djdGR04yRlk5c2tmc0kxbkRRWkRxYVEwd0g4WTFWMGczSXpOTlJiL094am5LclZRR1VBL1UyRQpGQnkxamYrNjVnSlI4VUVaUVN0cnRFQmV3WDFKM1NqeHovQTllbjI1WU5UOXVYdko5cW1wMlkrUmZiVHB1bDMvCmVsTnJvcm5LaDNjMk5LSFRiMVpZc1k4UWRDc2tkRkxsTDZLanloTFFNWk9vOGMxMTcrRkZSQ21yQTZrU2ErSUgKUHgxYWlxZ3R0bTZzKzJKb0E5VWViOXlMOEtyR1E1NlR3VjRTTFFJREFRQUJBb0lCQUJFWFFESjMxYS92eCtGdQpnWjI4QzJiYjMxRXZKVkU5djlYTytWREhhTWF5ZWQzVHRIN2ZvRjVhc3l4NG5mV1FBb1JvZnA3SnNwdHk3T1pjCnp2bHdLZndoQ1BJQ1hrVGNyUnFneG15N2hsdDBQNDZKQVJkaWNidXU1cmV4K2xYUVF5NHRnY3o3ZHMwWTZkazAKTDR5SjJUc1dLSExUTmF5OWdIempEa0xpWUYzZEJMcmlMZWNCdEw2OWNpWnJmSjFTVFBuY0lMbU9aUERyVTVDNwpZeHlrNWJHTzdDMnZWZXc4REgvS3IzKzBrUHVjK2JjVjVtSVV2OE9hOXlqSTU1dUpMR3pZR2VZNmtTcjVUWVg4Cnd6b003cGZPMWJkcVNlSGVkc0dPb1JCTkFYUHQ5MWw4UGJ4TngreUROTXNhUjZXc2ttR24wT3p0YzYzVWRONkYKcENPSCsyRUNnWUVBMjkvQnBXamIxTXo0VkFhNVdiakRNSjdMem01YWZQeUk5NHFDeWx5clg5aDZuQUlvVjYxago0dWVJTThac1pwZ210WUlxVlJ6Ri93TGVZT0NPOEZoa084S2hpazZEa0xIc2FOZEVOZm16LzVBMkZ2WUs1b2xiCkwyblpxaHBSY1ZyTVF5S3Nja2dJMkd1UXgvZVkxSDY2U200bDd6QkNIcWYzUHJpaHVOdHVaeGtDZ1lFQTJFNk0KKzU2b3RPbzFXWXVHSjdOZyt0ZnB0M0ZVdWtSVHkvanVGeVRNeFQyYmIyRW9aZDBoMlpBcHhYWUcvSVZzc0I2UwpTc2thQlV6NzNQempsZUdrZW1yKy8wblljWTIrSTNZOFIyYUFWNEplUUVxeFZ3UXVKQXRCNFJtMDBxYWpBZ0lhCmtTbTI5TUUvQUQvZlhoMXk2TFhuZHJqUWlocDBmS3gzMW5tUnlqVUNnWUEyek1mb3YvKzZRL1BJalh4NHZqSDMKMWp3WmtTdUFaemlENmNPN1IrbDJrKy9MSGthTHc2MVhpamxLSGpRNlJjV3dDMmNkbTNSRm9LTm9KYys2VzIxdgo3NHh2ZWk0VVRDUU41VWtjNHNWWDlzdGtZYUpKM3dZWkJScTQ2S0pQekQrSXBBV3kzZjFHWTFqTVhndDdPcktYCmhtaHgrdWNmMk9Fb2dyL2I0T1RkVVFLQmdIYkYyeUFuSkpnQ3FyeTZvaldXaDcvMVl2NDVtcjZVMmpaOFA3QXgKb3NjRFp5QW5oMWszcldpYmduUk10TlZnSmlnbkFVbFRWNWhsaHo3M0ZiaXRKL1dZWHVDckdkQndkbUZlZ1Ficgp2N2xOZXBkdTdDWE53OUJDNWkvR1A4WVRmaHFTTVNoWWNYKy94T3BNS0VpemZ1OU5Rd1dyd2NhemRCY3BWTHhPCkVNR3BBb0dBVFBDM29ZV0MrUXY1VGJMc1ZQYXdXNyt2KyszQjBYZHVoMFBkeXBEWVBsbW1OZ0RJeXJjRnZTWDcKNUlHUEtwSmhrSlJLU0htb2FoN2dFeDI3WnZVVVJTM1NMQkpZM0FuOXVvUSsxNVdnZG1xVDY5bm1KcEIrMXVLMApNd0pTb255d0RhM1pRcVB4b0dFNXlIZCtSUk5zUStkR0t2VzBRQzlEQ3N0WDUyb3QyUDA9Ci0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0t
kind: Secret
metadata:
  namespace: k8tz
  creationTimestamp: null
  name: my-release-k8tz-tls
  labels:
    helm.sh/chart: k8tz-0.16.2
    app.kubernetes.io/name: k8tz
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "0.16.2"
    app.kubernetes.io/managed-by: Helm
---
# Source: k8tz/templates/rbac.yaml
kind: ClusterRole
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: my-release-k8tz-role
  labels:
    helm.sh/chart: k8tz-0.16.2
    app.kubernetes.io/name: k8tz
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "0.16.2"
    app.kubernetes.io/managed-by: Helm
rules:
  - apiGroups: [""]
    resources: ["namespaces"]
    verbs: ["get"]
  - apiGroups: [""]
    resources: ["secrets"]
    verbs: ["get", "list", "watch"]
---
# Source: k8tz/templates/rbac.yaml
kind: ClusterRoleBinding
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: my-release-k8tz-role-binding
  labels:
    helm.sh/chart: k8tz-0.16.2
    app.kubernetes.io/name: k8tz
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "0.16.2"
    app.kubernetes.io/managed-by: Helm
subjects:
  - kind: ServiceAccount
    name: my-release-k8tz
    namespace: k8tz
roleRef:
  kind: ClusterRole
  apiGroup: rbac.authorization.k8s.io
  name: my-release-k8tz-role
---
# Source: k8tz/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: my-release
  namespace: k8tz
  labels:
    helm.sh/chart: k8tz-0.16.2
    app.kubernetes.io/name: k8tz
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "0.16.2"
    app.kubernetes.io/managed-by: Helm
spec:
  type: ClusterIP
  ports:
    - port: 443
      targetPort: https
      protocol: TCP
      name: https
  selector:
    app.kubernetes.io/name: k8tz
    app.kubernetes.io/instance: my-release
---
# Source: k8tz/templates/controller.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: my-release-k8tz
  namespace: k8tz
  labels:
    helm.sh/chart: k8tz-0.16.2
    app.kubernetes.io/name: k8tz
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "0.16.2"
    app.kubernetes.io/managed-by: Helm
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: k8tz
      app.kubernetes.io/instance: my-release
  template:
    metadata:
      annotations:
        checksum/config: 929a42e2d287b188d8d3bc9d222ca299875bd97a92e265a904e9b194613480e7
      labels:
        app.kubernetes.io/name: k8tz
        app.kubernetes.io/instance: my-release
    spec:
      volumes:
      - name: tls
        secret:
          secretName: my-release-k8tz-tls
      serviceAccountName: my-release-k8tz
      securityContext:
        runAsNonRoot: true
        seccompProfile:
          type: RuntimeDefault
      containers:
        - name: k8tz
          args:
          - "webhook"
          - "--timezone"
          - "UTC"
          - "--injection-strategy"
          - "initContainer"
          - "--inject=true"
          - "--container-name=k8tz"
          - "--bootstrap-image"
          - "quay.io/k8tz/k8tz:0.16.2"
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            runAsNonRoot: true
            seccompProfile:
              type: RuntimeDefault
          image: "quay.io/k8tz/k8tz:0.16.2"
          imagePullPolicy: IfNotPresent
          volumeMounts:
            - name: tls
              mountPath: /run/secrets/tls
              readOnly: true
          ports:
            - name: https
              containerPort: 8443
              protocol: TCP
          livenessProbe:
            httpGet:
              path: /health
              port: https
              scheme: HTTPS
          readinessProbe:
            httpGet:
              path: /health
              port: https
              scheme: HTTPS
          resources:
            {}
---
# Source: k8tz/templates/admission-webhook.yaml
apiVersion: admissionregistration.k8s.io/v1
kind: MutatingWebhookConfiguration
metadata:
  name: my-release-k8tz
  labels:
    helm.sh/chart: k8tz-0.16.2
    app.kubernetes.io/name: k8tz
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "0.16.2"
    app.kubernetes.io/managed-by: Helm
webhooks:
  - name: admission-controller.k8tz.io
    namespaceSelector:
      matchExpressions:
      - key: k8tz.io/controller-namespace
        operator: NotIn
        values: ["true"]
      - key: kubernetes.io/metadata.name
        operator: NotIn
        values:
        - k8tz
        - kube-system
    sideEffects: None
    failurePolicy: Fail
    admissionReviewVersions: ["v1", "v1beta1"]
    clientConfig:
      service:
        name: my-release
        namespace: k8tz
        path: "/"
        port: 443
      caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURKVENDQWcyZ0F3SUJBZ0lRWVU0UWY2MTJCZ2lZQmVIQ1NKZlJuREFOQmdrcWhraUc5dzBCQVFzRkFEQWUKTVJ3d0dnWURWUVFERXhOdGVTMXlaV3hsWVhObExtczRkSG91YzNaak1CNFhEVEkwTURZeE5USXpNemcwTVZvWApEVE00TURZeE5qSXpNemcwTVZvd0hqRWNNQm9HQTFVRUF4TVRiWGt0Y21Wc1pXRnpaUzVyT0hSNkxuTjJZekNDCkFTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBTG5JUXFjTGJjRExkNnBVU2JrbzhFa0EKdXJTUTBKWkdHMmxMMTJWNG5USmV0b01hVEIyTzczdFBtRnZncm9ZdFJHeFIwd3ViQUVMUWdCNU9HZE8zOWYzVgoxc1dXSE8wUFU3OHkzdnlPK0xJYjVjckc5VnZUQ2RCaW5Ncit4UmpkaFdQYkpIN0NOWncwR1E2bWtOTUIvR05WCmRJTnlNelRVVy96c1k1eXExVUJsQVAxTmhCUWN0WTMvdXVZQ1VmRkJHVUVyYTdSQVhzRjlTZDBvOGMvd1BYcDkKdVdEVS9ibDd5ZmFwcWRtUGtYMjA2YnBkLzNwVGE2SzV5b2QzTmpTaDAyOVdXTEdQRUhRckpIUlM1UytpbzhvUwowREdUcVBITmRlL2hSVVFwcXdPcEVtdmlCejhkV29xb0xiWnVyUHRpYUFQVkhtL2NpL0NxeGtPZWs4RmVFaTBDCkF3RUFBYU5mTUYwd0RnWURWUjBQQVFIL0JBUURBZ1dnTUIwR0ExVWRKUVFXTUJRR0NDc0dBUVVGQndNQkJnZ3IKQmdFRkJRY0RBakFNQmdOVkhSTUJBZjhFQWpBQU1CNEdBMVVkRVFRWE1CV0NFMjE1TFhKbGJHVmhjMlV1YXpoMAplaTV6ZG1Nd0RRWUpLb1pJaHZjTkFRRUxCUUFEZ2dFQkFJZHhxaUJyK3BRSTIrU1kwdE9nT1NPNkZ4M2xVcWVkClpmajBhTkVpQWlOcVRnMkJsMUJHMHJ4Umw1UlNzQ09JT3hmZW5zOG05Z0tVSHlibzJod1RRWWRiRi9LZmFpUXIKMC9DNFlDWHVrNmQ0TDR0b2hwb0hZNGZYSitLdU00OEVpWFBVZU1VMkw3NUQ3VUxVcHIyYVZqcktHRFhzbnBxbApVQ2Zjd2tkeE1sQWt6NGl4b04zaVNrcDJ2WkZyS3lCVTJ0bi92bTEzSnZzNEU5Y0NxS3pzN1k1MlcvTEFEcUo2CkdhZ3IwUktMVEx1VUx4NnNBMFg3NnZaS0R1a1hEK1pNZXBISGRRdGhRajFObndLMmdxTnBTOFZpWUtaN2pEeFcKMkxaMnRTTmh5b1BPQ2dCQzlXVXZyc2ZtRGQ4b1N1cXJaR0tFd1ZjemtTbnBlbTdSZmdGdXdWdz0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQ==
    rules:
      - operations: [ "CREATE" ]
        apiGroups: [""]
        apiVersions: ["v1"]
        resources: ["pods"]
      - operations: [ "CREATE" ]
        apiGroups: ["batch"]
        apiVersions: ["v1"]
        resources: ["cronjobs"]
---
# Source: k8tz/templates/tests/test-connection.yaml
apiVersion: v1
kind: Pod
metadata:
  name: "my-release-k8tz-health-test"
  namespace: k8tz
  labels:
    helm.sh/chart: k8tz-0.16.2
    app.kubernetes.io/name: k8tz
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "0.16.2"
    app.kubernetes.io/managed-by: Helm
  annotations:
    "helm.sh/hook": test
spec:
  containers:
    - name: curl
      image: curlimages/curl:7.78.0
      args: ['--insecure', 'https://my-release:443/health']
  restartPolicy: Never
