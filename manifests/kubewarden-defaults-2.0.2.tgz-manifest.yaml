---
# Source: kubewarden-defaults/templates/policy-server-rbac.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    helm.sh/chart: kubewarden-defaults-2.0.2
    app.kubernetes.io/name: kubewarden-defaults
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "v1.13.0"
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/part-of: kubewarden
    app.kubernetes.io/component: policy-server
  annotations:
    
  name: policy-server
  namespace: default
---
# Source: kubewarden-defaults/templates/policy-server-rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    helm.sh/chart: kubewarden-defaults-2.0.2
    app.kubernetes.io/name: kubewarden-defaults
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "v1.13.0"
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/part-of: kubewarden
    app.kubernetes.io/component: policy-server
  annotations:
    
  name: kubewarden-context-watcher
rules:
- apiGroups:
  - ""
  resources: ["namespaces","pods","services"]
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - "networking.k8s.io"
  resources: ["ingresses"]
  verbs:
  - get
  - list
  - watch
---
# Source: kubewarden-defaults/templates/policy-server-rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    helm.sh/chart: kubewarden-defaults-2.0.2
    app.kubernetes.io/name: kubewarden-defaults
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "v1.13.0"
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/part-of: kubewarden
    app.kubernetes.io/component: policy-server
  annotations:
    
  name: kubewarden-context-watcher
subjects:
- kind: ServiceAccount
  name: policy-server
  namespace: default
roleRef:
  kind: ClusterRole
  name: kubewarden-context-watcher
  apiGroup: rbac.authorization.k8s.io
---
# Source: kubewarden-defaults/templates/policyserver-default.yaml
apiVersion: policies.kubewarden.io/v1
kind: PolicyServer
metadata:
  labels:
    helm.sh/chart: kubewarden-defaults-2.0.2
    app.kubernetes.io/name: kubewarden-defaults
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "v1.13.0"
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/part-of: kubewarden
    app.kubernetes.io/component: policy-server
  annotations:
    
  name: default
  finalizers:
    - kubewarden.io/finalizer
spec:
  image: ghcr.io/kubewarden/policy-server:v1.13.1
  serviceAccountName: policy-server
  replicas: 1
  annotations:
  env:
    - name: "KUBEWARDEN_LOG_LEVEL"
      value: "info"
