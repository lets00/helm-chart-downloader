---
# Source: inbox-agent/templates/rbac/serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: my-release-inbox-agent
  namespace: default
  labels:
    helm.sh/chart: inbox-agent-v2024.5.3
    app.kubernetes.io/name: inbox-agent
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "v0.0.1"
    app.kubernetes.io/managed-by: Helm
---
# Source: inbox-agent/templates/operator/config.yaml
apiVersion: v1
kind: Secret
metadata:
  name: my-release-inbox-agent-config
  namespace: default
  labels:
    helm.sh/chart: inbox-agent-v2024.5.3
    app.kubernetes.io/name: inbox-agent
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "v0.0.1"
    app.kubernetes.io/managed-by: Helm
type: Opaque
stringData:
  endpoint: http://james.appscode.ninja/jmap/session
  token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ0ZXN0dXNlcjEub3JnQG15ZG9tYWluIiwiaWF0IjoxNjE2MjM5MDIyLCJleHAiOjE5NDYyMzkwMjJ9.ZQuDcCFyccpSvAtp0M88TeATePlx4Gvs97_asg75cn46Xkoe-ENVYM-N_ZeWs8G7joxCQS2R2BOQ1LPXY7rFYubEA1Ne8xMMJvS6LW8NktdYrSUZm3J7oyeC6K42cHqYlspK2RaiUl-XKaxy0J38p9MhIKvzOETTEpaABFNp5MplNqkVoAnYnOnF8Ez7AfoCnieBuxmR_qmZpRNdl6XXpoyoihv0azY2RxAyk6uRrnNbzirICuthnkFdllPrbffTcRk9NXkV9PyGlmdAVczxeUADIpd2WMWyoB3yFVe4s1dl9UQp7QsJqpBUUuY3LhE295PwzGDq5WKMWzdII55N2BnVe9LS33GXMU9oGgWqpBmxrTzSwc-jiewhorcc32keXkrxhtxL1uNXuYzg2lqFv7he7aTKWowkI2MJVXLhUN-xpIuaKgAgWY99VBYcf5gfhLfwSYVVZUKIQmYI7Jh0bWNoTHyXoHj0wyFnzNe3SsPECip2WohIDD7_CNLydGDvFmdVp7_aIDAHpiA2BrLysm2Go9GHy-ESdVsma6aG95EeICp1ngLSFHx4IOQ3Oisr4t4DStv7INQQQDkuI6hjhVctbt75rcTa-541a237N3RuBKhOPhEbf3eipUD2t-x28Wi_EHDQpFb0D0nZjvI8Q0AoNm0K9rDzVKvUiyNSIr8
---
# Source: inbox-agent/templates/webhook/cert.yaml
apiVersion: v1
kind: Secret
metadata:
  name: my-release-inbox-agent-webhook-cert
  namespace: default
  labels:
    helm.sh/chart: inbox-agent-v2024.5.3
    app.kubernetes.io/name: inbox-agent
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "v0.0.1"
    app.kubernetes.io/managed-by: Helm
type: Opaque
data:
  ca.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURCakNDQWU2Z0F3SUJBZ0lSQUtyaW5LdEorTnhOcUhQYnpWS0xkV1V3RFFZSktvWklodmNOQVFFTEJRQXcKRFRFTE1Ba0dBMVVFQXhNQ1kyRXdIaGNOTWpRd05qRTJNREV4TVRBMFdoY05NelF3TmpFME1ERXhNVEEwV2pBTgpNUXN3Q1FZRFZRUURFd0pqWVRDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBTjhvCk1tQ1VGMU1FOHhlRjBoMWxrYTB2b3FVSHB3bHNOakFOVjFBcjl5NkZWWkxoZWVsRzVnUEtiM0w3VVNQSk9RRm0KZzJrZHNUOUgvU2x6R01iK0FDS0QvbnFUNlh0QzFKajE3QlM0cUk3Z0JCa3Azc0RiTnZXSmJWekRHT2s0Q3VHbwpaUmxkbXV3ZVNOV2NaMGFqbCtrTDk1SEt5Qzh3KzA0M3Y4NmE5VlMvRjRTeUZ0OWkwaG93TTd3NGZsTnMyZDM2CkhXOXNuMDV0N21ITURhYVJ3azdzZWtubWpNQXFJWG5yZjlicmRmY01NV2htYzRvRzA1VEpmRnRROENVT3E2NkkKdEoyeVl2M3lGQVNSQlBjR3Z6eVoxT0pGQ3F6ZWg4NG52UmRRdWQ1SDFiU2pxS25keHRaOFh0dUhiTXUraXU0SApEQ0g2eE03ZzVoa0FPQ3lBU0RVQ0F3RUFBYU5oTUY4d0RnWURWUjBQQVFIL0JBUURBZ0trTUIwR0ExVWRKUVFXCk1CUUdDQ3NHQVFVRkJ3TUJCZ2dyQmdFRkJRY0RBakFQQmdOVkhSTUJBZjhFQlRBREFRSC9NQjBHQTFVZERnUVcKQkJRN2Q3SDFHL20wd0RzNUtYeW5WTUorUENneEdUQU5CZ2txaGtpRzl3MEJBUXNGQUFPQ0FRRUFqWFhQc0hSSQplZVBlZ1g0ZTNxekx4WStidWFqcm1vZlgzNUNHRFB2emZsYlJlazREOFpvYmQrWUFiK0dNUmhrcEk0azdEaUI1CnBHb21WZ3lXOUJVemthSWMxcnB6bTdiS2N5NS9sQXdCSjVtR2Nqbis5MXBWYi9Zc0xkVXJjaHZteFZwb2VNOWQKeUdOS0RlVVZNWDNHbnUxemZRaW5mamUrdXlrY3lYc0Q0WFk4TU5nV3BEYlFPTytGTXJrUWFmMXVQSHZxVmhqZwpha2lqZWRNL25HYVNNS2VVUllsdkVaVTREeDBrOFptdWRocllwb2FmSWdURC9HdFZIZXF6citNLzdsUDc4M0loCjYxTlpzdG5OSm8zUTNEblFXa1ZoMm9ZM3NtdnpXS2JkRWFXT0N6SFd1R0ZHQlpYb21IdEFzbmJQOU5xcnJrdzUKVzlxWE9ZZWorSTNTdnc9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURnakNDQW1xZ0F3SUJBZ0lSQUw5MmhyWFNKUjFEMFI4TklJRzhPQW93RFFZSktvWklodmNOQVFFTEJRQXcKRFRFTE1Ba0dBMVVFQXhNQ1kyRXdIaGNOTWpRd05qRTJNREV4TVRBMFdoY05NelF3TmpFME1ERXhNVEEwV2pBcApNU2N3SlFZRFZRUURFeDV0ZVMxeVpXeGxZWE5sTFdsdVltOTRMV0ZuWlc1MExYZGxZbWh2YjJzd2dnRWlNQTBHCkNTcUdTSWIzRFFFQkFRVUFBNElCRHdBd2dnRUtBb0lCQVFDMjNqOTRUTFp2Y29HcUo4eis3YS84R0NVRkxVUzMKSSt6am1ZK2ZyV3lYY2dlY0tEUWhydURHNmtuek9RNEU4U2YzS2N1K0tMa0UwN0tuL3Rialo2MGowMDJ5MVUvTwpwNStKUDBQd01QYkQyZjZqTHVTc3lhZ2dsdWJvc2FlSGg0Q2l5Q2VmYkc0cnp3dlgyRktwajVrMUw3QlBsVEVkCjc5SGZiNXF4N25MVUVPWVhEUkFWdU5YZHRqL3lxRzhBNWx2akVRRUtqSXV0QTN0ZDRHQ01BekpzMERvdlpKMFYKQ20vTjE2ZzZ2S1JmYWE0SVJYQXViMjJKR2k4aDNuemEyV3V6d2syY0dIQnVhSS9DbExpYlF5emNkQkF4UlkyVApycXJ2NkNvc2NvZmU0cXMzTjliYytPc1UvWkxVT21iNXM5YmIzTDFpNlEyU1VNZnh2V3NlNEd3M0FnTUJBQUdqCmdjQXdnYjB3RGdZRFZSMFBBUUgvQkFRREFnV2dNQjBHQTFVZEpRUVdNQlFHQ0NzR0FRVUZCd01CQmdnckJnRUYKQlFjREFqQU1CZ05WSFJNQkFmOEVBakFBTUI4R0ExVWRJd1FZTUJhQUZEdDNzZlViK2JUQU96a3BmS2RVd240OApLREVaTUYwR0ExVWRFUVJXTUZTQ0ptMTVMWEpsYkdWaGMyVXRhVzVpYjNndFlXZGxiblF0ZDJWaWFHOXZheTVrClpXWmhkV3gwZ2lwdGVTMXlaV3hsWVhObExXbHVZbTk0TFdGblpXNTBMWGRsWW1odmIyc3VaR1ZtWVhWc2RDNXoKZG1Nd0RRWUpLb1pJaHZjTkFRRUxCUUFEZ2dFQkFKRUlyTDhuaUpmenB4UUUrS0hSQnV1bnVtOXVyYXBNSERTZgpaRUZOd2E4SjFCL1RwbUFQT013dHFXQUo3WkUyMVdKOWQvbWRWWlpGTmlpOFMzbklEK1NiVytVS0lJTksybXd1CjZwcXJsdkNFOThCN1luNkFrVmlVQzZGTEpsWTZ4MGNtYjg1cys5cGtyTFliK0VXVW94ZkRYRU9PbWxTM1Fzei8KdGZCRjlGdEVaY2JURDZDRHBPVk1aTzhrVWdmSXJYd3phQlFUaTEyQ1BGdTVscVl5eWYzVXBBdmJxWTZkeXpKMwpOaVJsbUVFVlZoMTBqY0RGMDRDdmQ1T2JsNCtibHVFMTRIeWcwWGY3RXV1T1NrRjFKVDl4NkZJQlJCQit6aU8zClB6bmJyWGdkSUp1cWZNVFY1U2N5V0dzR29wRnBQNXQvNGRsaWwydGtudERvRjNNaFNqUT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=
  tls.key: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcEFJQkFBS0NBUUVBdHQ0L2VFeTJiM0tCcWlmTS91MnYvQmdsQlMxRXR5UHM0NW1QbjYxc2wzSUhuQ2cwCklhN2d4dXBKOHprT0JQRW45eW5MdmlpNUJOT3lwLzdXNDJldEk5Tk5zdFZQenFlZmlUOUQ4REQydzluK295N2sKck1tb0lKYm02TEduaDRlQW9zZ25uMnh1Szg4TDE5aFNxWStaTlMrd1Q1VXhIZS9SMzIrYXNlNXkxQkRtRncwUQpGYmpWM2JZLzhxaHZBT1piNHhFQkNveUxyUU43WGVCZ2pBTXliTkE2TDJTZEZRcHZ6ZGVvT3J5a1gybXVDRVZ3CkxtOXRpUm92SWQ1ODJ0bHJzOEpObkJod2JtaVB3cFM0bTBNczNIUVFNVVdOazY2cTcrZ3FMSEtIM3VLck56ZlcKM1BqckZQMlMxRHBtK2JQVzI5eTlZdWtOa2xESDhiMXJIdUJzTndJREFRQUJBb0lCQUFNN0xoZnNFeFVwQ3MxOAo0b3htbXNOemtjUGpwdUV0aTFRQ05KMTNyUUdJREVaZ0YzdTQ0VlBpYytnT1RBY2VVN3gwU3B0VGtPRmE5RDh2CnE1QmRGcHdaY2JnRk9PSEg2SE8rWUc3d0Rvd3JYK3AyTzZncDhBU1RaZ1Vham9GQWphOVNwaENWRStWR1JVbE4KRXpqWHhyYy8zbmVwaFRLb09DY2dpN1UxSjJaRDFucGQ4NnJvT29TTFF4Z1BGQ21sOGpJMXYwdWdkemtjalA3LwpqVTdVM1ZKSDNMVjFwTWo2TlRUNTA5UnRtWWxOQ0VUUmZ5Y3BvcjRMSFZOa2N3L054K29lR3IrZ3VpdmQxSnltClo0NUxRU0xnUGt3cnNVcy9nWTBYWEpFSXJzVmhURFFMVzM5TUNSSUhQajc4M2hyS1hjUDNmd2JRRFpWTHVqWjkKc0FMT0FoRUNnWUVBd0xFY21yNFg0UkRSMUk5bkV4YXhzY21yKzltTkF4cWhPbVlWdkk5aXpDMzJyaEthUjcrOApUTmNHc3Q5SmRQNVpmTFZod3lxc2FkR1J1dnJ6elAvTTEwVkZOV1pyc2xFdWxSdnZZK1BuQVNFUE1keWxoSUpnCmVEVWpvWTJUVE91VnBYbyttNlBwbXpKcElkemJvQk1BSVpwTHo4SkdVdEMxNzZzZmY4MjNEczBDZ1lFQTh2TGoKTDd4MXdPWWtuQ3hrUFQ4U3AybHZUSU83UVhzQUV4VzhiS0prTy8wbXRBNGZLNkoxNDNublZGeDEySVV4Y3NzMApKdVpuOUZBYWYvcFBaUlBtTFA0dU02NSt6ZVptaDVhQkI2RVM1cnFsbXBka0JjUEErbklPQVR6aDdSNmRsWlJrCnhla2lyMStpK0tjWXJWVWlIdHExMlRoK1l1bjkva0J5NjZaOW54TUNnWUVBaVk5bS9rbHF2cS9GUEZ2TGwrTUIKcEF4M0RPcDRNcGtXTkp5Z00rYWcvMlpvemtoVmY1Y3ZsQ09Ga3JpNHRoN0dQN00xUWFEN1NPZmxnM2lZQitjdApreGpPbVpxdWs3UkU3d25zVW9GbWJuWHRaUWxCMkdGREFVM2VTL3pJQllmQlkwcnIyeXlmSHI1VU0ycDZGOEs0CnUwUnRqcm9BZmlxbFY1M3dkTXFsUHBrQ2dZRUFtMzM3Qy8xcHZEbFFLeWg2UzN6SDJxQXZuT0FmQkV6T0Fta0IKL09GK2w2cHhrQUlOenlhZW55WFJlZnZuYk5ucWlSY25YTkpRckZ4c2FZWnlORFlsTnB6RVEwMm1XTy9pcFZzZApZQjJtZEVmM1g5Y1BMR1ZhYUxDQTZDZm9UWlF2dGFHUlVkM2gxaTYycHNDRG1jU0lId2xLSkNuMU1pZWk2WXlrClFOQ0JURU1DZ1lBRnExTlFTdFZBLzlMVUNheU1aZ2tKMUpUUXV6UEFEVFBOU24xVndkQ09CQUcyUHRvaVRmNW4KOGVzL2oyOStORWVjcUxPSzNUazB5dzFmUWFrQTNTbHpRN3lKMTJGTldmYWxSbmdQNExhUWU3TTdQWlEwTkU1WQpGamI3aVBmNEtBS2lLeFpRS2QzR0tSM1AwSWpKU0NPRzEzZU9tWHZ1QWdOSks2aDFQUWFWQVE9PQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo=
---
# Source: inbox-agent/templates/rbac/auth_proxy.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: my-release-inbox-agent-auth-proxy
rules:
  - apiGroups:
      - authentication.k8s.io
    resources:
      - tokenreviews
    verbs:
      - create
  - apiGroups:
      - authorization.k8s.io
    resources:
      - subjectaccessreviews
    verbs:
      - create
---
# Source: inbox-agent/templates/rbac/cluster_role.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: my-release-inbox-agent
  labels:
    helm.sh/chart: inbox-agent-v2024.5.3
    app.kubernetes.io/name: inbox-agent
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "v0.0.1"
    app.kubernetes.io/managed-by: Helm
rules:
  - apiGroups:
      - apiextensions.k8s.io
    resources:
      - customresourcedefinitions
    verbs: ["get", "create", "patch", "update"]
  - apiGroups:
      - admissionregistration.k8s.io
    resources:
      - mutatingwebhookconfigurations
      - validatingwebhookconfigurations
    verbs: ["*"]
  - apiGroups:
      - monitoring.appscode.com
    resources:
      - "*"
    verbs: ["*"]
  - apiGroups:
      - ""
    resources:
      - events
    verbs: ["create", "patch"]
  - apiGroups:
    - '*'
    resources:
    - '*'
    verbs: ["get", "list", "watch"]
  - nonResourceURLs:
    - '*'
    verbs: ["get"]
---
# Source: inbox-agent/templates/rbac/auth_proxy.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: my-release-inbox-agent-auth-proxy
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: my-release-inbox-agent-auth-proxy
subjects:
  - kind: ServiceAccount
    name: my-release-inbox-agent
    namespace: default
---
# Source: inbox-agent/templates/rbac/cluster_role_binding.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: my-release-inbox-agent
  labels:
    helm.sh/chart: inbox-agent-v2024.5.3
    app.kubernetes.io/name: inbox-agent
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "v0.0.1"
    app.kubernetes.io/managed-by: Helm
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: my-release-inbox-agent
subjects:
- kind: ServiceAccount
  name: my-release-inbox-agent
  namespace: default
---
# Source: inbox-agent/templates/webhook/monitoring/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: my-release-inbox-agent
  namespace: default
  labels:
    helm.sh/chart: inbox-agent-v2024.5.3
    app.kubernetes.io/name: inbox-agent
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "v0.0.1"
    app.kubernetes.io/managed-by: Helm
spec:
  ports:
  - name: https
    port: 8443
    protocol: TCP
    targetPort: https
  selector:
    app.kubernetes.io/component: webhook-server
    app.kubernetes.io/name: inbox-agent
    app.kubernetes.io/instance: my-release
---
# Source: inbox-agent/templates/webhook/webhook_service.yaml
apiVersion: v1
kind: Service
metadata:
  name: my-release-inbox-agent-webhook
  namespace: default
  labels:
    helm.sh/chart: inbox-agent-v2024.5.3
    app.kubernetes.io/name: inbox-agent
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "v0.0.1"
    app.kubernetes.io/managed-by: Helm
spec:
  selector:
    app.kubernetes.io/component: webhook-server
    app.kubernetes.io/name: inbox-agent
    app.kubernetes.io/instance: my-release
  ports:
  - port: 443
    protocol: TCP
    targetPort: 9443
---
# Source: inbox-agent/templates/operator/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: my-release-inbox-agent-operator
  namespace: default
  labels:
    app.kubernetes.io/component: operator
    helm.sh/chart: inbox-agent-v2024.5.3
    app.kubernetes.io/name: inbox-agent
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "v0.0.1"
    app.kubernetes.io/managed-by: Helm
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/component: operator
      app.kubernetes.io/name: inbox-agent
      app.kubernetes.io/instance: my-release
  template:
    metadata:
      labels:
        app.kubernetes.io/component: operator
        app.kubernetes.io/name: inbox-agent
        app.kubernetes.io/instance: my-release
      annotations:
    spec:
      
      serviceAccountName: my-release-inbox-agent
      containers:
      - name: operator
        image: "ghcr.io/appscode/inbox-agent:v0.0.1"
        imagePullPolicy: IfNotPresent
        securityContext:
          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
          readOnlyRootFilesystem: true
          runAsNonRoot: true
          runAsUser: 65534
          seccompProfile:
            type: RuntimeDefault
        args:
          - operator
        env:
        - name: INBOX_SERVER_JMAP_ENDPOINT
          valueFrom:
            secretKeyRef:
              name: my-release-inbox-agent-config
              key: endpoint
        - name: INBOX_SERVER_TOKEN
          valueFrom:
            secretKeyRef:
              name: my-release-inbox-agent-config
              key: token
        resources:
          requests:
            cpu: 100m
      securityContext:
        fsGroup: 65535
      nodeSelector:
        kubernetes.io/os: linux
---
# Source: inbox-agent/templates/webhook/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: my-release-inbox-agent-webhook-server
  namespace: default
  labels:
    app.kubernetes.io/component: webhook-server
    helm.sh/chart: inbox-agent-v2024.5.3
    app.kubernetes.io/name: inbox-agent
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "v0.0.1"
    app.kubernetes.io/managed-by: Helm
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/component: webhook-server
      app.kubernetes.io/name: inbox-agent
      app.kubernetes.io/instance: my-release
  template:
    metadata:
      labels:
        app.kubernetes.io/component: webhook-server
        app.kubernetes.io/name: inbox-agent
        app.kubernetes.io/instance: my-release
      annotations:
        checksum/apiregistration.yaml: 62615319dcc9c8460a8574c5ef747f120ba94aa16cb6e0f66367784e6486682d
    spec:
      
      serviceAccountName: my-release-inbox-agent
      containers:
      - name: webhook-server
        image: "ghcr.io/appscode/inbox-agent:v0.0.1"
        imagePullPolicy: IfNotPresent
        securityContext:
          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
          readOnlyRootFilesystem: true
          runAsNonRoot: true
          runAsUser: 65534
          seccompProfile:
            type: RuntimeDefault
        args:
          - webhook
          - --webhook-name=my-release-inbox-agent
        env:
        - name: INBOX_SERVER_JMAP_ENDPOINT
          valueFrom:
            secretKeyRef:
              name: my-release-inbox-agent-config
              key: endpoint
        - name: INBOX_SERVER_TOKEN
          valueFrom:
            secretKeyRef:
              name: my-release-inbox-agent-config
              key: token
        ports:
        - name: webhook-server
          containerPort: 9443
          protocol: TCP
        env:
        - name: POD_NAME
          valueFrom:
            fieldRef:
              fieldPath: metadata.name
        - name: POD_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        resources:
          requests:
            cpu: 100m
        volumeMounts:
        - name: serving-cert
          mountPath: /var/serving-cert
          readOnly: true
      - name: kube-rbac-proxy
        image: "ghcr.io/appscode/kube-rbac-proxy:v0.11.0"
        securityContext:
          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
          readOnlyRootFilesystem: true
          runAsNonRoot: true
          runAsUser: 65534
          seccompProfile:
            type: RuntimeDefault
        args:
        - --secure-listen-address=0.0.0.0:8443
        - --upstream=http://127.0.0.1:8080/
        - --logtostderr=true
        - --v=10
        ports:
        - containerPort: 8443
          name: https
          protocol: TCP
        resources:
          requests:
            cpu: 100m
      volumes:
      - name: serving-cert
        secret:
          defaultMode: 420
          secretName: my-release-inbox-agent-webhook-cert
      securityContext:
        fsGroup: 65535
      nodeSelector:
        kubernetes.io/os: linux
---
# Source: inbox-agent/templates/rbac/user_roles.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: appscode:my-release-inbox-agent:edit
  labels:
    rbac.authorization.k8s.io/aggregate-to-admin: "true"
    rbac.authorization.k8s.io/aggregate-to-edit: "true"
  annotations:
    "helm.sh/hook": pre-install,pre-upgrade
    "helm.sh/hook-delete-policy": before-hook-creation
rules:
- apiGroups:
  - monitoring.appscode.com
  resources:
  - "*"
  verbs: ["*"]
---
# Source: inbox-agent/templates/rbac/user_roles.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: appscode:my-release-inbox-agent:view
  labels:
    rbac.authorization.k8s.io/aggregate-to-view: "true"
  annotations:
    "helm.sh/hook": pre-install,pre-upgrade
    "helm.sh/hook-delete-policy": before-hook-creation
rules:
- apiGroups:
  - monitoring.appscode.com
  resources:
  - "*"
  verbs: ["get", "list", "watch"]
