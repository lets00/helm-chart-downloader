---
# Source: glasskube-operator/charts/minio/templates/serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: "minio-sa"
---
# Source: glasskube-operator/templates/service-account.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: my-release-glasskube-operator
---
# Source: glasskube-operator/charts/minio/templates/secrets.yaml
apiVersion: v1
kind: Secret
metadata:
  name: my-release-minio
  labels:
    app: minio
    chart: minio-5.0.14
    release: my-release
    heritage: Helm
type: Opaque
data:
  rootUser: "NDdpQTB2cFNhcWtEQUpyNmgwOTY="
  rootPassword: "MG1jUUp3QXBLMkdHcklvVmhhcFJlTE5FVmNKVHdTcnFid1JJWkg0Yg=="
---
# Source: glasskube-operator/charts/minio/templates/configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: my-release-minio
  labels:
    app: minio
    chart: minio-5.0.14
    release: my-release
    heritage: Helm
data:
  initialize: |-
    #!/bin/sh
    set -e ; # Have script exit in the event of a failed command.
    MC_CONFIG_DIR="/etc/minio/mc/"
    MC="/usr/bin/mc --insecure --config-dir ${MC_CONFIG_DIR}"
    
    # connectToMinio
    # Use a check-sleep-check loop to wait for MinIO service to be available
    connectToMinio() {
      SCHEME=$1
      ATTEMPTS=0 ; LIMIT=29 ; # Allow 30 attempts
      set -e ; # fail if we can't read the keys.
      ACCESS=$(cat /config/rootUser) ; SECRET=$(cat /config/rootPassword) ;
      set +e ; # The connections to minio are allowed to fail.
      echo "Connecting to MinIO server: $SCHEME://$MINIO_ENDPOINT:$MINIO_PORT" ;
      MC_COMMAND="${MC} alias set myminio $SCHEME://$MINIO_ENDPOINT:$MINIO_PORT $ACCESS $SECRET" ;
      $MC_COMMAND ;
      STATUS=$? ;
      until [ $STATUS = 0 ]
      do
        ATTEMPTS=`expr $ATTEMPTS + 1` ;
        echo \"Failed attempts: $ATTEMPTS\" ;
        if [ $ATTEMPTS -gt $LIMIT ]; then
          exit 1 ;
        fi ;
        sleep 2 ; # 1 second intervals between attempts
        $MC_COMMAND ;
        STATUS=$? ;
      done ;
      set -e ; # reset `e` as active
      return 0
    }
    
    # checkBucketExists ($bucket)
    # Check if the bucket exists, by using the exit code of `mc ls`
    checkBucketExists() {
      BUCKET=$1
      CMD=$(${MC} stat myminio/$BUCKET > /dev/null 2>&1)
      return $?
    }
    
    # createBucket ($bucket, $policy, $purge)
    # Ensure bucket exists, purging if asked to
    createBucket() {
      BUCKET=$1
      POLICY=$2
      PURGE=$3
      VERSIONING=$4
      OBJECTLOCKING=$5
    
      # Purge the bucket, if set & exists
      # Since PURGE is user input, check explicitly for `true`
      if [ $PURGE = true ]; then
        if checkBucketExists $BUCKET ; then
          echo "Purging bucket '$BUCKET'."
          set +e ; # don't exit if this fails
          ${MC} rm -r --force myminio/$BUCKET
          set -e ; # reset `e` as active
        else
          echo "Bucket '$BUCKET' does not exist, skipping purge."
        fi
      fi
    
    # Create the bucket if it does not exist and set objectlocking if enabled (NOTE: versioning will be not changed if OBJECTLOCKING is set because it enables versioning to the Buckets created)
    if ! checkBucketExists $BUCKET ; then
        if [ ! -z $OBJECTLOCKING ] ; then
          if [ $OBJECTLOCKING = true ] ; then
              echo "Creating bucket with OBJECTLOCKING '$BUCKET'"
              ${MC} mb --with-lock myminio/$BUCKET
          elif [ $OBJECTLOCKING = false ] ; then
                echo "Creating bucket '$BUCKET'"
                ${MC} mb myminio/$BUCKET
          fi
      elif [ -z $OBJECTLOCKING ] ; then
            echo "Creating bucket '$BUCKET'"
            ${MC} mb myminio/$BUCKET
      else
        echo "Bucket '$BUCKET' already exists."  
      fi
      fi
    
    
      # set versioning for bucket if objectlocking is disabled or not set
      if [ $OBJECTLOCKING = false ] ; then
      if [ ! -z $VERSIONING ] ; then
        if [ $VERSIONING = true ] ; then
            echo "Enabling versioning for '$BUCKET'"
            ${MC} version enable myminio/$BUCKET
        elif [ $VERSIONING = false ] ; then
            echo "Suspending versioning for '$BUCKET'"
            ${MC} version suspend myminio/$BUCKET
        fi
        fi
      else
          echo "Bucket '$BUCKET' versioning unchanged."
      fi
    
    
      # At this point, the bucket should exist, skip checking for existence
      # Set policy on the bucket
      echo "Setting policy of bucket '$BUCKET' to '$POLICY'."
      ${MC} anonymous set $POLICY myminio/$BUCKET
    }
    
    # Try connecting to MinIO instance
    scheme=http
    connectToMinio $scheme
    
    
    
  add-user: |-
    #!/bin/sh
    set -e ; # Have script exit in the event of a failed command.
    MC_CONFIG_DIR="/etc/minio/mc/"
    MC="/usr/bin/mc --insecure --config-dir ${MC_CONFIG_DIR}"
    
    # AccessKey and secretkey credentials file are added to prevent shell execution errors caused by special characters.
    # Special characters for example : ',",<,>,{,}
    MINIO_ACCESSKEY_SECRETKEY_TMP="/tmp/accessKey_and_secretKey_tmp"
    
    # connectToMinio
    # Use a check-sleep-check loop to wait for MinIO service to be available
    connectToMinio() {
      SCHEME=$1
      ATTEMPTS=0 ; LIMIT=29 ; # Allow 30 attempts
      set -e ; # fail if we can't read the keys.
      ACCESS=$(cat /config/rootUser) ; SECRET=$(cat /config/rootPassword) ;
      set +e ; # The connections to minio are allowed to fail.
      echo "Connecting to MinIO server: $SCHEME://$MINIO_ENDPOINT:$MINIO_PORT" ;
      MC_COMMAND="${MC} alias set myminio $SCHEME://$MINIO_ENDPOINT:$MINIO_PORT $ACCESS $SECRET" ;
      $MC_COMMAND ;
      STATUS=$? ;
      until [ $STATUS = 0 ]
      do
        ATTEMPTS=`expr $ATTEMPTS + 1` ;
        echo \"Failed attempts: $ATTEMPTS\" ;
        if [ $ATTEMPTS -gt $LIMIT ]; then
          exit 1 ;
        fi ;
        sleep 2 ; # 1 second intervals between attempts
        $MC_COMMAND ;
        STATUS=$? ;
      done ;
      set -e ; # reset `e` as active
      return 0
    }
    
    # checkUserExists ()
    # Check if the user exists, by using the exit code of `mc admin user info`
    checkUserExists() {
      CMD=$(${MC} admin user info myminio $(head -1 $MINIO_ACCESSKEY_SECRETKEY_TMP) > /dev/null 2>&1)
      return $?
    }
    
    # createUser ($policy)
    createUser() {
      POLICY=$1
      #check accessKey_and_secretKey_tmp file
      if [[ ! -f $MINIO_ACCESSKEY_SECRETKEY_TMP ]];then
        echo "credentials file does not exist"
        return 1
      fi
      if [[ $(cat $MINIO_ACCESSKEY_SECRETKEY_TMP|wc -l) -ne 2 ]];then
        echo "credentials file is invalid"
        rm -f $MINIO_ACCESSKEY_SECRETKEY_TMP
        return 1
      fi
      USER=$(head -1 $MINIO_ACCESSKEY_SECRETKEY_TMP)
      # Create the user if it does not exist
      if ! checkUserExists ; then
        echo "Creating user '$USER'"
        cat $MINIO_ACCESSKEY_SECRETKEY_TMP | ${MC} admin user add myminio
      else
        echo "User '$USER' already exists."
      fi
      #clean up credentials files.
      rm -f $MINIO_ACCESSKEY_SECRETKEY_TMP
    
      # set policy for user
      if [ ! -z $POLICY -a $POLICY != " " ] ; then
          echo "Adding policy '$POLICY' for '$USER'"
          set +e ; # policy already attach errors out, allow it.
          ${MC} admin policy attach myminio $POLICY --user=$USER
          set -e
      else
          echo "User '$USER' has no policy attached."
      fi
    }
    
    # Try connecting to MinIO instance
    scheme=http
    connectToMinio $scheme
    
    
    
    # Create the users
    echo console > $MINIO_ACCESSKEY_SECRETKEY_TMP
    echo console123 >> $MINIO_ACCESSKEY_SECRETKEY_TMP
    createUser consoleAdmin
    
  add-policy: |-
    #!/bin/sh
    set -e ; # Have script exit in the event of a failed command.
    MC_CONFIG_DIR="/etc/minio/mc/"
    MC="/usr/bin/mc --insecure --config-dir ${MC_CONFIG_DIR}"
    
    # connectToMinio
    # Use a check-sleep-check loop to wait for MinIO service to be available
    connectToMinio() {
      SCHEME=$1
      ATTEMPTS=0 ; LIMIT=29 ; # Allow 30 attempts
      set -e ; # fail if we can't read the keys.
      ACCESS=$(cat /config/rootUser) ; SECRET=$(cat /config/rootPassword) ;
      set +e ; # The connections to minio are allowed to fail.
      echo "Connecting to MinIO server: $SCHEME://$MINIO_ENDPOINT:$MINIO_PORT" ;
      MC_COMMAND="${MC} alias set myminio $SCHEME://$MINIO_ENDPOINT:$MINIO_PORT $ACCESS $SECRET" ;
      $MC_COMMAND ;
      STATUS=$? ;
      until [ $STATUS = 0 ]
      do
        ATTEMPTS=`expr $ATTEMPTS + 1` ;
        echo \"Failed attempts: $ATTEMPTS\" ;
        if [ $ATTEMPTS -gt $LIMIT ]; then
          exit 1 ;
        fi ;
        sleep 2 ; # 1 second intervals between attempts
        $MC_COMMAND ;
        STATUS=$? ;
      done ;
      set -e ; # reset `e` as active
      return 0
    }
    
    # checkPolicyExists ($policy)
    # Check if the policy exists, by using the exit code of `mc admin policy info`
    checkPolicyExists() {
      POLICY=$1
      CMD=$(${MC} admin policy info myminio $POLICY > /dev/null 2>&1)
      return $?
    }
    
    # createPolicy($name, $filename)
    createPolicy () {
      NAME=$1
      FILENAME=$2
    
      # Create the name if it does not exist
      echo "Checking policy: $NAME (in /config/$FILENAME.json)"
      if ! checkPolicyExists $NAME ; then
        echo "Creating policy '$NAME'"
      else
        echo "Policy '$NAME' already exists."
      fi
      ${MC} admin policy create myminio $NAME /config/$FILENAME.json
    
    }
    
    # Try connecting to MinIO instance
    scheme=http
    connectToMinio $scheme
    
    
    
  add-svcacct: |-
    #!/bin/sh
    set -e ; # Have script exit in the event of a failed command.
    MC_CONFIG_DIR="/etc/minio/mc/"
    MC="/usr/bin/mc --insecure --config-dir ${MC_CONFIG_DIR}"
    
    # AccessKey and secretkey credentials file are added to prevent shell execution errors caused by special characters.
    # Special characters for example : ',",<,>,{,}
    MINIO_ACCESSKEY_SECRETKEY_TMP="/tmp/accessKey_and_secretKey_svcacct_tmp"
    
    # connectToMinio
    # Use a check-sleep-check loop to wait for MinIO service to be available
    connectToMinio() {
      SCHEME=$1
      ATTEMPTS=0 ; LIMIT=29 ; # Allow 30 attempts
      set -e ; # fail if we can't read the keys.
      ACCESS=$(cat /config/rootUser) ; SECRET=$(cat /config/rootPassword) ;
      set +e ; # The connections to minio are allowed to fail.
      echo "Connecting to MinIO server: $SCHEME://$MINIO_ENDPOINT:$MINIO_PORT" ;
      MC_COMMAND="${MC} alias set myminio $SCHEME://$MINIO_ENDPOINT:$MINIO_PORT $ACCESS $SECRET" ;
      $MC_COMMAND ;
      STATUS=$? ;
      until [ $STATUS = 0 ]
      do
        ATTEMPTS=`expr $ATTEMPTS + 1` ;
        echo \"Failed attempts: $ATTEMPTS\" ;
        if [ $ATTEMPTS -gt $LIMIT ]; then
          exit 1 ;
        fi ;
        sleep 2 ; # 2 second intervals between attempts
        $MC_COMMAND ;
        STATUS=$? ;
      done ;
      set -e ; # reset `e` as active
      return 0
    }
    
    # checkSvcacctExists ()
    # Check if the svcacct exists, by using the exit code of `mc admin user svcacct info`
    checkSvcacctExists() {
      CMD=$(${MC} admin user svcacct info myminio $(head -1 $MINIO_ACCESSKEY_SECRETKEY_TMP) > /dev/null 2>&1)
      return $?
    }
    
    # createSvcacct ($user)
    createSvcacct () {
      USER=$1
      FILENAME=$2
      #check accessKey_and_secretKey_tmp file
      if [[ ! -f $MINIO_ACCESSKEY_SECRETKEY_TMP ]];then
        echo "credentials file does not exist"
        return 1
      fi
      if [[ $(cat $MINIO_ACCESSKEY_SECRETKEY_TMP|wc -l) -ne 2 ]];then
        echo "credentials file is invalid"
        rm -f $MINIO_ACCESSKEY_SECRETKEY_TMP
        return 1
      fi
      SVCACCT=$(head -1 $MINIO_ACCESSKEY_SECRETKEY_TMP)
      # Create the svcacct if it does not exist
      if ! checkSvcacctExists ; then
        echo "Creating svcacct '$SVCACCT'"
        # Check if policy file is define
        if [ -z $FILENAME ]; then
          ${MC} admin user svcacct add --access-key $(head -1 $MINIO_ACCESSKEY_SECRETKEY_TMP) --secret-key $(tail -n1 $MINIO_ACCESSKEY_SECRETKEY_TMP) myminio $USER
        else
          ${MC} admin user svcacct add --access-key $(head -1 $MINIO_ACCESSKEY_SECRETKEY_TMP) --secret-key $(tail -n1 $MINIO_ACCESSKEY_SECRETKEY_TMP) --policy /config/$FILENAME.json myminio $USER
        fi
      else
        echo "Svcacct '$SVCACCT' already exists."
      fi
      #clean up credentials files.
      rm -f $MINIO_ACCESSKEY_SECRETKEY_TMP
    }
    
    # Try connecting to MinIO instance
    scheme=http
    connectToMinio $scheme
    
    
    
  custom-command: |-
    #!/bin/sh
    set -e ; # Have script exit in the event of a failed command.
    MC_CONFIG_DIR="/etc/minio/mc/"
    MC="/usr/bin/mc --insecure --config-dir ${MC_CONFIG_DIR}"
    
    # connectToMinio
    # Use a check-sleep-check loop to wait for MinIO service to be available
    connectToMinio() {
      SCHEME=$1
      ATTEMPTS=0 ; LIMIT=29 ; # Allow 30 attempts
      set -e ; # fail if we can't read the keys.
      ACCESS=$(cat /config/rootUser) ; SECRET=$(cat /config/rootPassword) ;
      set +e ; # The connections to minio are allowed to fail.
      echo "Connecting to MinIO server: $SCHEME://$MINIO_ENDPOINT:$MINIO_PORT" ;
      MC_COMMAND="${MC} alias set myminio $SCHEME://$MINIO_ENDPOINT:$MINIO_PORT $ACCESS $SECRET" ;
      $MC_COMMAND ;
      STATUS=$? ;
      until [ $STATUS = 0 ]
      do
        ATTEMPTS=`expr $ATTEMPTS + 1` ;
        echo \"Failed attempts: $ATTEMPTS\" ;
        if [ $ATTEMPTS -gt $LIMIT ]; then
          exit 1 ;
        fi ;
        sleep 2 ; # 1 second intervals between attempts
        $MC_COMMAND ;
        STATUS=$? ;
      done ;
      set -e ; # reset `e` as active
      return 0
    }
    
    # runCommand ($@)
    # Run custom mc command
    runCommand() {
      ${MC} "$@"
      return $?
    }
    
    # Try connecting to MinIO instance
    scheme=http
    connectToMinio $scheme
---
# Source: glasskube-operator/charts/minio/templates/pvc.yaml
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: my-release-minio
  labels:
    app: minio
    chart: minio-5.0.14
    release: my-release
    heritage: Helm
spec:
  accessModes:
    - "ReadWriteOnce"
  resources:
    requests:
      storage: "20Gi"
---
# Source: glasskube-operator/templates/giteas.glasskube.eu-v1.yml
# Generated by Fabric8 CRDGenerator, manual edits might get overwritten!
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: giteas.glasskube.eu
spec:
  group: glasskube.eu
  names:
    kind: Gitea
    plural: giteas
    singular: gitea
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          spec:
            properties:
              host:
                type: string
              sshEnabled:
                type: boolean
              sshHost:
                type: string
              adminSecret:
                description: "Secret containing data of the admin user to create on\
                  \ pod initialization. Expected keys are GITEA_ADMIN_USER, GITEA_ADMIN_EMAIL\
                  \ and GITEA_ADMIN_PASSWORD"
                properties:
                  name:
                    type: string
                type: object
              registrationEnabled:
                type: boolean
              replicas:
                type: integer
              smtp:
                nullable: true
                properties:
                  host:
                    type: string
                  port:
                    type: integer
                  fromAddress:
                    type: string
                  authSecret:
                    properties:
                      name:
                        type: string
                    type: object
                  tlsEnabled:
                    type: boolean
                required:
                - host
                - fromAddress
                - authSecret
                type: object
              resources:
                properties:
                  claims:
                    items:
                      properties:
                        name:
                          type: string
                      type: object
                    type: array
                  limits:
                    additionalProperties:
                      anyOf:
                      - type: integer
                      - type: string
                      x-kubernetes-int-or-string: true
                    type: object
                  requests:
                    additionalProperties:
                      anyOf:
                      - type: integer
                      - type: string
                      x-kubernetes-int-or-string: true
                    type: object
                type: object
              version:
                pattern: \d+\.\d+\.\d+
                type: string
              database:
                nullable: true
                properties:
                  instances:
                    minimum: 1.0
                    type: integer
                  backups:
                    properties:
                      schedule:
                        type: string
                      retentionPolicy:
                        type: string
                      s3:
                        properties:
                          endpoint:
                            type: string
                          regionSecret:
                            properties:
                              key:
                                type: string
                              name:
                                type: string
                              optional:
                                type: boolean
                            type: object
                          bucket:
                            type: string
                          accessKeySecret:
                            properties:
                              key:
                                type: string
                              name:
                                type: string
                              optional:
                                type: boolean
                            type: object
                          secretKeySecret:
                            properties:
                              key:
                                type: string
                              name:
                                type: string
                              optional:
                                type: boolean
                            type: object
                        required:
                        - bucket
                        - accessKeySecret
                        - secretKeySecret
                        type: object
                    required:
                    - s3
                    type: object
                  storage:
                    properties:
                      size:
                        type: string
                      storageClass:
                        type: string
                    type: object
                type: object
            required:
            - host
            type: object
          status:
            properties:
              readyReplicas:
                type: integer
              redisReady:
                type: boolean
              postgresReady:
                type: boolean
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
# Source: glasskube-operator/templates/gitlabrunners.glasskube.eu-v1.yml
# Generated by Fabric8 CRDGenerator, manual edits might get overwritten!
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: gitlabrunners.glasskube.eu
spec:
  group: glasskube.eu
  names:
    kind: GitlabRunner
    plural: gitlabrunners
    singular: gitlabrunner
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          spec:
            properties:
              token:
                type: string
              gitlab:
                properties:
                  name:
                    type: string
                type: object
              concurrency:
                type: integer
              version:
                pattern: \d+\.\d+\.\d+
                type: string
            required:
            - token
            - gitlab
            type: object
          status:
            properties:
              ready:
                type: boolean
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
# Source: glasskube-operator/templates/gitlabs.glasskube.eu-v1.yml
# Generated by Fabric8 CRDGenerator, manual edits might get overwritten!
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: gitlabs.glasskube.eu
spec:
  group: glasskube.eu
  names:
    kind: Gitlab
    plural: gitlabs
    singular: gitlab
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          spec:
            properties:
              host:
                type: string
              sshHost:
                type: string
              sshEnabled:
                type: boolean
              initialRootPasswordSecret:
                properties:
                  key:
                    type: string
                  name:
                    type: string
                  optional:
                    type: boolean
                type: object
              smtp:
                nullable: true
                properties:
                  host:
                    type: string
                  port:
                    type: integer
                  fromAddress:
                    type: string
                  authSecret:
                    properties:
                      name:
                        type: string
                    type: object
                  tlsEnabled:
                    type: boolean
                required:
                - host
                - fromAddress
                - authSecret
                type: object
              runners:
                items:
                  properties:
                    token:
                      type: string
                    concurrency:
                      type: integer
                    version:
                      pattern: \d+\.\d+\.\d+
                      type: string
                  required:
                  - token
                  type: object
                type: array
              resources:
                properties:
                  claims:
                    items:
                      properties:
                        name:
                          type: string
                      type: object
                    type: array
                  limits:
                    additionalProperties:
                      anyOf:
                      - type: integer
                      - type: string
                      x-kubernetes-int-or-string: true
                    type: object
                  requests:
                    additionalProperties:
                      anyOf:
                      - type: integer
                      - type: string
                      x-kubernetes-int-or-string: true
                    type: object
                type: object
              omnibusConfigOverride:
                nullable: true
                type: string
              registry:
                nullable: true
                properties:
                  host:
                    type: string
                  storage:
                    nullable: true
                    properties:
                      s3:
                        properties:
                          bucket:
                            type: string
                          accessKeySecret:
                            properties:
                              key:
                                type: string
                              name:
                                type: string
                              optional:
                                type: boolean
                            type: object
                          secretKeySecret:
                            properties:
                              key:
                                type: string
                              name:
                                type: string
                              optional:
                                type: boolean
                            type: object
                          region:
                            type: string
                          hostname:
                            type: string
                          usePathStyle:
                            type: boolean
                        required:
                        - bucket
                        - accessKeySecret
                        - secretKeySecret
                        - region
                        - hostname
                        - usePathStyle
                        type: object
                    type: object
                required:
                - host
                type: object
              version:
                pattern: \d+\.\d+\.\d+
                type: string
              database:
                nullable: true
                properties:
                  instances:
                    minimum: 1.0
                    type: integer
                  backups:
                    properties:
                      schedule:
                        type: string
                      retentionPolicy:
                        type: string
                      s3:
                        properties:
                          endpoint:
                            type: string
                          regionSecret:
                            properties:
                              key:
                                type: string
                              name:
                                type: string
                              optional:
                                type: boolean
                            type: object
                          bucket:
                            type: string
                          accessKeySecret:
                            properties:
                              key:
                                type: string
                              name:
                                type: string
                              optional:
                                type: boolean
                            type: object
                          secretKeySecret:
                            properties:
                              key:
                                type: string
                              name:
                                type: string
                              optional:
                                type: boolean
                            type: object
                        required:
                        - bucket
                        - accessKeySecret
                        - secretKeySecret
                        type: object
                    required:
                    - s3
                    type: object
                  storage:
                    properties:
                      size:
                        type: string
                      storageClass:
                        type: string
                    type: object
                type: object
            required:
            - host
            type: object
          status:
            properties:
              readyReplicas:
                type: integer
              postgresReady:
                type: boolean
              runners:
                additionalProperties:
                  properties:
                    ready:
                      type: boolean
                  type: object
                type: object
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
# Source: glasskube-operator/templates/glitchtips.glasskube.eu-v1.yml
# Generated by Fabric8 CRDGenerator, manual edits might get overwritten!
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: glitchtips.glasskube.eu
spec:
  group: glasskube.eu
  names:
    kind: Glitchtip
    plural: glitchtips
    singular: glitchtip
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          spec:
            properties:
              host:
                type: string
              replicas:
                type: integer
              registrationEnabled:
                type: boolean
              organizationCreationEnabled:
                type: boolean
              smtp:
                nullable: true
                properties:
                  host:
                    type: string
                  port:
                    type: integer
                  fromAddress:
                    type: string
                  authSecret:
                    properties:
                      name:
                        type: string
                    type: object
                  tlsEnabled:
                    type: boolean
                required:
                - host
                - fromAddress
                - authSecret
                type: object
              resources:
                properties:
                  claims:
                    items:
                      properties:
                        name:
                          type: string
                      type: object
                    type: array
                  limits:
                    additionalProperties:
                      anyOf:
                      - type: integer
                      - type: string
                      x-kubernetes-int-or-string: true
                    type: object
                  requests:
                    additionalProperties:
                      anyOf:
                      - type: integer
                      - type: string
                      x-kubernetes-int-or-string: true
                    type: object
                type: object
              version:
                pattern: \d+\.\d+\.\d+
                type: string
              database:
                nullable: true
                properties:
                  instances:
                    minimum: 1.0
                    type: integer
                  backups:
                    properties:
                      schedule:
                        type: string
                      retentionPolicy:
                        type: string
                      s3:
                        properties:
                          endpoint:
                            type: string
                          regionSecret:
                            properties:
                              key:
                                type: string
                              name:
                                type: string
                              optional:
                                type: boolean
                            type: object
                          bucket:
                            type: string
                          accessKeySecret:
                            properties:
                              key:
                                type: string
                              name:
                                type: string
                              optional:
                                type: boolean
                            type: object
                          secretKeySecret:
                            properties:
                              key:
                                type: string
                              name:
                                type: string
                              optional:
                                type: boolean
                            type: object
                        required:
                        - bucket
                        - accessKeySecret
                        - secretKeySecret
                        type: object
                    required:
                    - s3
                    type: object
                  storage:
                    properties:
                      size:
                        type: string
                      storageClass:
                        type: string
                    type: object
                type: object
            required:
            - host
            type: object
          status:
            properties:
              readyReplicas:
                type: integer
              workerReadyReplicas:
                type: integer
              redisReady:
                type: boolean
              postgresReady:
                type: boolean
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
# Source: glasskube-operator/templates/keycloaks.glasskube.eu-v1.yml
# Generated by Fabric8 CRDGenerator, manual edits might get overwritten!
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: keycloaks.glasskube.eu
spec:
  group: glasskube.eu
  names:
    kind: Keycloak
    plural: keycloaks
    singular: keycloak
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          spec:
            properties:
              host:
                type: string
              management:
                properties:
                  enabled:
                    type: boolean
                type: object
              resources:
                properties:
                  claims:
                    items:
                      properties:
                        name:
                          type: string
                      type: object
                    type: array
                  limits:
                    additionalProperties:
                      anyOf:
                      - type: integer
                      - type: string
                      x-kubernetes-int-or-string: true
                    type: object
                  requests:
                    additionalProperties:
                      anyOf:
                      - type: integer
                      - type: string
                      x-kubernetes-int-or-string: true
                    type: object
                type: object
              version:
                pattern: \d+\.\d+\.\d+
                type: string
              database:
                nullable: true
                properties:
                  instances:
                    minimum: 1.0
                    type: integer
                  backups:
                    properties:
                      schedule:
                        type: string
                      retentionPolicy:
                        type: string
                      s3:
                        properties:
                          endpoint:
                            type: string
                          regionSecret:
                            properties:
                              key:
                                type: string
                              name:
                                type: string
                              optional:
                                type: boolean
                            type: object
                          bucket:
                            type: string
                          accessKeySecret:
                            properties:
                              key:
                                type: string
                              name:
                                type: string
                              optional:
                                type: boolean
                            type: object
                          secretKeySecret:
                            properties:
                              key:
                                type: string
                              name:
                                type: string
                              optional:
                                type: boolean
                            type: object
                        required:
                        - bucket
                        - accessKeySecret
                        - secretKeySecret
                        type: object
                    required:
                    - s3
                    type: object
                  storage:
                    properties:
                      size:
                        type: string
                      storageClass:
                        type: string
                    type: object
                type: object
            required:
            - host
            type: object
          status:
            properties:
              readyInstances:
                type: integer
              postgresReady:
                type: boolean
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
# Source: glasskube-operator/templates/matomos.glasskube.eu-v1.yml
# Generated by Fabric8 CRDGenerator, manual edits might get overwritten!
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: matomos.glasskube.eu
spec:
  group: glasskube.eu
  names:
    kind: Matomo
    plural: matomos
    singular: matomo
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          spec:
            properties:
              host:
                type: string
              smtp:
                nullable: true
                properties:
                  host:
                    type: string
                  port:
                    type: integer
                  fromAddress:
                    type: string
                  authSecret:
                    properties:
                      name:
                        type: string
                    type: object
                  tlsEnabled:
                    type: boolean
                required:
                - host
                - fromAddress
                - authSecret
                type: object
              resources:
                properties:
                  claims:
                    items:
                      properties:
                        name:
                          type: string
                      type: object
                    type: array
                  limits:
                    additionalProperties:
                      anyOf:
                      - type: integer
                      - type: string
                      x-kubernetes-int-or-string: true
                    type: object
                  requests:
                    additionalProperties:
                      anyOf:
                      - type: integer
                      - type: string
                      x-kubernetes-int-or-string: true
                    type: object
                type: object
              version:
                type: string
              database:
                properties:
                  storage:
                    properties:
                      size:
                        type: string
                      storageClass:
                        type: string
                    type: object
                  backups:
                    type: object
                type: object
            type: object
          status:
            properties:
              readyReplicas:
                type: integer
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
# Source: glasskube-operator/templates/metabases.glasskube.eu-v1.yml
# Generated by Fabric8 CRDGenerator, manual edits might get overwritten!
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: metabases.glasskube.eu
spec:
  group: glasskube.eu
  names:
    kind: Metabase
    plural: metabases
    singular: metabase
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          spec:
            properties:
              host:
                type: string
              replicas:
                type: integer
              smtp:
                nullable: true
                properties:
                  host:
                    type: string
                  port:
                    type: integer
                  fromAddress:
                    type: string
                  authSecret:
                    properties:
                      name:
                        type: string
                    type: object
                  tlsEnabled:
                    type: boolean
                required:
                - host
                - fromAddress
                - authSecret
                type: object
              resources:
                properties:
                  claims:
                    items:
                      properties:
                        name:
                          type: string
                      type: object
                    type: array
                  limits:
                    additionalProperties:
                      anyOf:
                      - type: integer
                      - type: string
                      x-kubernetes-int-or-string: true
                    type: object
                  requests:
                    additionalProperties:
                      anyOf:
                      - type: integer
                      - type: string
                      x-kubernetes-int-or-string: true
                    type: object
                type: object
              version:
                pattern: \d+\.\d+\.\d+
                type: string
              database:
                nullable: true
                properties:
                  instances:
                    minimum: 1.0
                    type: integer
                  backups:
                    properties:
                      schedule:
                        type: string
                      retentionPolicy:
                        type: string
                      s3:
                        properties:
                          endpoint:
                            type: string
                          regionSecret:
                            properties:
                              key:
                                type: string
                              name:
                                type: string
                              optional:
                                type: boolean
                            type: object
                          bucket:
                            type: string
                          accessKeySecret:
                            properties:
                              key:
                                type: string
                              name:
                                type: string
                              optional:
                                type: boolean
                            type: object
                          secretKeySecret:
                            properties:
                              key:
                                type: string
                              name:
                                type: string
                              optional:
                                type: boolean
                            type: object
                        required:
                        - bucket
                        - accessKeySecret
                        - secretKeySecret
                        type: object
                    required:
                    - s3
                    type: object
                  storage:
                    properties:
                      size:
                        type: string
                      storageClass:
                        type: string
                    type: object
                type: object
            required:
            - host
            type: object
          status:
            properties:
              readyReplicas:
                type: integer
              postgresReady:
                type: boolean
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
# Source: glasskube-operator/templates/miniobuckets.glasskube.eu-v1.yml
# Generated by Fabric8 CRDGenerator, manual edits might get overwritten!
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: miniobuckets.glasskube.eu
spec:
  group: glasskube.eu
  names:
    kind: MinioBucket
    plural: miniobuckets
    singular: miniobucket
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          spec:
            properties:
              userSecret:
                nullable: true
                properties:
                  name:
                    type: string
                type: object
              bucketNameOverride:
                nullable: true
                type: string
              policyOverride:
                nullable: true
                type: string
            type: object
          status:
            properties:
              bucketCreated:
                type: boolean
              username:
                type: string
              userCreated:
                type: boolean
              policyCreated:
                type: boolean
              policyLinked:
                type: boolean
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
# Source: glasskube-operator/templates/nextclouds.glasskube.eu-v1.yml
# Generated by Fabric8 CRDGenerator, manual edits might get overwritten!
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: nextclouds.glasskube.eu
spec:
  group: glasskube.eu
  names:
    kind: Nextcloud
    plural: nextclouds
    singular: nextcloud
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          spec:
            properties:
              host:
                type: string
              defaultPhoneRegion:
                type: string
              apps:
                properties:
                  office:
                    nullable: true
                    properties:
                      host:
                        type: string
                      version:
                        type: string
                    type: object
                  oidc:
                    nullable: true
                    properties:
                      name:
                        type: string
                      oidcSecret:
                        properties:
                          name:
                            type: string
                        type: object
                      issuerUrl:
                        type: string
                    required:
                    - name
                    - oidcSecret
                    - issuerUrl
                    type: object
                type: object
              smtp:
                nullable: true
                properties:
                  host:
                    type: string
                  port:
                    type: integer
                  fromAddress:
                    type: string
                  authSecret:
                    properties:
                      name:
                        type: string
                    type: object
                  tlsEnabled:
                    type: boolean
                required:
                - host
                - fromAddress
                - authSecret
                type: object
              storage:
                properties:
                  s3:
                    properties:
                      bucket:
                        type: string
                      accessKeySecret:
                        properties:
                          key:
                            type: string
                          name:
                            type: string
                          optional:
                            type: boolean
                        type: object
                      secretKeySecret:
                        properties:
                          key:
                            type: string
                          name:
                            type: string
                          optional:
                            type: boolean
                        type: object
                      region:
                        nullable: true
                        type: string
                      hostname:
                        nullable: true
                        type: string
                      port:
                        nullable: true
                        type: integer
                      objectPrefix:
                        nullable: true
                        type: string
                      autoCreate:
                        nullable: true
                        type: boolean
                      useSsl:
                        type: boolean
                      usePathStyle:
                        nullable: true
                        type: boolean
                      legacyAuth:
                        nullable: true
                        type: boolean
                    required:
                    - bucket
                    - accessKeySecret
                    - secretKeySecret
                    type: object
                type: object
              version:
                pattern: \d+\.\d+\.\d+
                type: string
              server:
                properties:
                  resources:
                    nullable: true
                    properties:
                      claims:
                        items:
                          properties:
                            name:
                              type: string
                          type: object
                        type: array
                      limits:
                        additionalProperties:
                          anyOf:
                          - type: integer
                          - type: string
                          x-kubernetes-int-or-string: true
                        type: object
                      requests:
                        additionalProperties:
                          anyOf:
                          - type: integer
                          - type: string
                          x-kubernetes-int-or-string: true
                        type: object
                    type: object
                  maxChildren:
                    type: integer
                  startServers:
                    type: integer
                  minSpareServers:
                    type: integer
                  maxSpareServers:
                    type: integer
                type: object
              database:
                nullable: true
                properties:
                  instances:
                    minimum: 1.0
                    type: integer
                  backups:
                    properties:
                      schedule:
                        type: string
                      retentionPolicy:
                        type: string
                      s3:
                        properties:
                          endpoint:
                            type: string
                          regionSecret:
                            properties:
                              key:
                                type: string
                              name:
                                type: string
                              optional:
                                type: boolean
                            type: object
                          bucket:
                            type: string
                          accessKeySecret:
                            properties:
                              key:
                                type: string
                              name:
                                type: string
                              optional:
                                type: boolean
                            type: object
                          secretKeySecret:
                            properties:
                              key:
                                type: string
                              name:
                                type: string
                              optional:
                                type: boolean
                            type: object
                        required:
                        - bucket
                        - accessKeySecret
                        - secretKeySecret
                        type: object
                    required:
                    - s3
                    type: object
                  storage:
                    properties:
                      size:
                        type: string
                      storageClass:
                        type: string
                    type: object
                type: object
            type: object
          status:
            properties:
              readyReplicas:
                type: integer
              redisReady:
                type: boolean
              postgresReady:
                type: boolean
              officeReady:
                type: boolean
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
# Source: glasskube-operator/templates/odoos.glasskube.eu-v1.yml
# Generated by Fabric8 CRDGenerator, manual edits might get overwritten!
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: odoos.glasskube.eu
spec:
  group: glasskube.eu
  names:
    kind: Odoo
    plural: odoos
    singular: odoo
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          spec:
            properties:
              host:
                type: string
              demoEnabled:
                type: boolean
              resources:
                properties:
                  claims:
                    items:
                      properties:
                        name:
                          type: string
                      type: object
                    type: array
                  limits:
                    additionalProperties:
                      anyOf:
                      - type: integer
                      - type: string
                      x-kubernetes-int-or-string: true
                    type: object
                  requests:
                    additionalProperties:
                      anyOf:
                      - type: integer
                      - type: string
                      x-kubernetes-int-or-string: true
                    type: object
                type: object
              version:
                pattern: \d+\.\d+\.\d+
                type: string
              database:
                nullable: true
                properties:
                  instances:
                    minimum: 1.0
                    type: integer
                  backups:
                    properties:
                      schedule:
                        type: string
                      retentionPolicy:
                        type: string
                      s3:
                        properties:
                          endpoint:
                            type: string
                          regionSecret:
                            properties:
                              key:
                                type: string
                              name:
                                type: string
                              optional:
                                type: boolean
                            type: object
                          bucket:
                            type: string
                          accessKeySecret:
                            properties:
                              key:
                                type: string
                              name:
                                type: string
                              optional:
                                type: boolean
                            type: object
                          secretKeySecret:
                            properties:
                              key:
                                type: string
                              name:
                                type: string
                              optional:
                                type: boolean
                            type: object
                        required:
                        - bucket
                        - accessKeySecret
                        - secretKeySecret
                        type: object
                    required:
                    - s3
                    type: object
                  storage:
                    properties:
                      size:
                        type: string
                      storageClass:
                        type: string
                    type: object
                type: object
            type: object
          status:
            properties:
              ready:
                type: boolean
              demoEnabledOnInstall:
                type: boolean
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
# Source: glasskube-operator/templates/planes.glasskube.eu-v1.yml
# Generated by Fabric8 CRDGenerator, manual edits might get overwritten!
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: planes.glasskube.eu
spec:
  group: glasskube.eu
  names:
    kind: Plane
    plural: planes
    singular: plane
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          spec:
            properties:
              host:
                type: string
              registrationEnabled:
                type: boolean
              defaultUser:
                properties:
                  email:
                    type: string
                  password:
                    type: string
                required:
                - email
                - password
                type: object
              frontend:
                properties:
                  resources:
                    nullable: true
                    properties:
                      claims:
                        items:
                          properties:
                            name:
                              type: string
                          type: object
                        type: array
                      limits:
                        additionalProperties:
                          anyOf:
                          - type: integer
                          - type: string
                          x-kubernetes-int-or-string: true
                        type: object
                      requests:
                        additionalProperties:
                          anyOf:
                          - type: integer
                          - type: string
                          x-kubernetes-int-or-string: true
                        type: object
                    type: object
                type: object
              space:
                properties:
                  resources:
                    nullable: true
                    properties:
                      claims:
                        items:
                          properties:
                            name:
                              type: string
                          type: object
                        type: array
                      limits:
                        additionalProperties:
                          anyOf:
                          - type: integer
                          - type: string
                          x-kubernetes-int-or-string: true
                        type: object
                      requests:
                        additionalProperties:
                          anyOf:
                          - type: integer
                          - type: string
                          x-kubernetes-int-or-string: true
                        type: object
                    type: object
                type: object
              api:
                properties:
                  concurrency:
                    type: integer
                  resources:
                    nullable: true
                    properties:
                      claims:
                        items:
                          properties:
                            name:
                              type: string
                          type: object
                        type: array
                      limits:
                        additionalProperties:
                          anyOf:
                          - type: integer
                          - type: string
                          x-kubernetes-int-or-string: true
                        type: object
                      requests:
                        additionalProperties:
                          anyOf:
                          - type: integer
                          - type: string
                          x-kubernetes-int-or-string: true
                        type: object
                    type: object
                type: object
              beatWorker:
                properties:
                  resources:
                    nullable: true
                    properties:
                      claims:
                        items:
                          properties:
                            name:
                              type: string
                          type: object
                        type: array
                      limits:
                        additionalProperties:
                          anyOf:
                          - type: integer
                          - type: string
                          x-kubernetes-int-or-string: true
                        type: object
                      requests:
                        additionalProperties:
                          anyOf:
                          - type: integer
                          - type: string
                          x-kubernetes-int-or-string: true
                        type: object
                    type: object
                type: object
              worker:
                properties:
                  concurrency:
                    type: integer
                  resources:
                    nullable: true
                    properties:
                      claims:
                        items:
                          properties:
                            name:
                              type: string
                          type: object
                        type: array
                      limits:
                        additionalProperties:
                          anyOf:
                          - type: integer
                          - type: string
                          x-kubernetes-int-or-string: true
                        type: object
                      requests:
                        additionalProperties:
                          anyOf:
                          - type: integer
                          - type: string
                          x-kubernetes-int-or-string: true
                        type: object
                    type: object
                type: object
              smtp:
                properties:
                  host:
                    type: string
                  port:
                    type: integer
                  fromAddress:
                    type: string
                  authSecret:
                    properties:
                      name:
                        type: string
                    type: object
                  tlsEnabled:
                    type: boolean
                  sslEnabled:
                    type: boolean
                required:
                - host
                - fromAddress
                - authSecret
                type: object
              s3:
                properties:
                  bucket:
                    type: string
                  accessKeySecret:
                    properties:
                      key:
                        type: string
                      name:
                        type: string
                      optional:
                        type: boolean
                    type: object
                  secretKeySecret:
                    properties:
                      key:
                        type: string
                      name:
                        type: string
                      optional:
                        type: boolean
                    type: object
                  region:
                    type: string
                  endpoint:
                    nullable: true
                    type: string
                  usePathStyle:
                    nullable: true
                    type: boolean
                required:
                - bucket
                - accessKeySecret
                - secretKeySecret
                - region
                type: object
              version:
                type: string
              database:
                nullable: true
                properties:
                  instances:
                    minimum: 1.0
                    type: integer
                  backups:
                    properties:
                      schedule:
                        type: string
                      retentionPolicy:
                        type: string
                      s3:
                        properties:
                          endpoint:
                            type: string
                          regionSecret:
                            properties:
                              key:
                                type: string
                              name:
                                type: string
                              optional:
                                type: boolean
                            type: object
                          bucket:
                            type: string
                          accessKeySecret:
                            properties:
                              key:
                                type: string
                              name:
                                type: string
                              optional:
                                type: boolean
                            type: object
                          secretKeySecret:
                            properties:
                              key:
                                type: string
                              name:
                                type: string
                              optional:
                                type: boolean
                            type: object
                        required:
                        - bucket
                        - accessKeySecret
                        - secretKeySecret
                        type: object
                    required:
                    - s3
                    type: object
                  storage:
                    properties:
                      size:
                        type: string
                      storageClass:
                        type: string
                    type: object
                type: object
            required:
            - host
            type: object
          status:
            properties:
              frontend:
                properties:
                  ready:
                    type: boolean
                type: object
              space:
                properties:
                  ready:
                    type: boolean
                type: object
              api:
                properties:
                  ready:
                    type: boolean
                type: object
              beatWorker:
                properties:
                  ready:
                    type: boolean
                type: object
              worker:
                properties:
                  ready:
                    type: boolean
                type: object
              database:
                properties:
                  ready:
                    type: boolean
                type: object
              redis:
                properties:
                  ready:
                    type: boolean
                type: object
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
# Source: glasskube-operator/templates/vaults.glasskube.eu-v1.yml
# Generated by Fabric8 CRDGenerator, manual edits might get overwritten!
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: vaults.glasskube.eu
spec:
  group: glasskube.eu
  names:
    kind: Vault
    plural: vaults
    singular: vault
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          spec:
            properties:
              host:
                type: string
              replicas:
                type: integer
              ui:
                properties:
                  enabled:
                    type: boolean
                required:
                - enabled
                type: object
              resources:
                properties:
                  claims:
                    items:
                      properties:
                        name:
                          type: string
                      type: object
                    type: array
                  limits:
                    additionalProperties:
                      anyOf:
                      - type: integer
                      - type: string
                      x-kubernetes-int-or-string: true
                    type: object
                  requests:
                    additionalProperties:
                      anyOf:
                      - type: integer
                      - type: string
                      x-kubernetes-int-or-string: true
                    type: object
                type: object
              serviceRegistration:
                properties:
                  enabled:
                    type: boolean
                required:
                - enabled
                type: object
              autoUnseal:
                nullable: true
                properties:
                  address:
                    type: string
                  tlsCaSecret:
                    nullable: true
                    properties:
                      key:
                        type: string
                      name:
                        type: string
                      optional:
                        type: boolean
                    type: object
                  authPath:
                    description: Optional. Default is "kubernetes".
                    type: string
                  roleName:
                    description: Optional. Default is "namespace.name".
                    type: string
                  mountPath:
                    description: Optional. Default is "transit".
                    type: string
                  keyName:
                    description: Optional. Default is "namespace.name".
                    type: string
                required:
                - address
                type: object
              auditStorage:
                nullable: true
                properties:
                  enabled:
                    type: boolean
                  size:
                    anyOf:
                    - type: integer
                    - type: string
                    x-kubernetes-int-or-string: true
                required:
                - enabled
                type: object
              version:
                pattern: \d+\.\d+\.\d+
                type: string
              database:
                nullable: true
                properties:
                  instances:
                    minimum: 1.0
                    type: integer
                  backups:
                    properties:
                      schedule:
                        type: string
                      retentionPolicy:
                        type: string
                      s3:
                        properties:
                          endpoint:
                            type: string
                          regionSecret:
                            properties:
                              key:
                                type: string
                              name:
                                type: string
                              optional:
                                type: boolean
                            type: object
                          bucket:
                            type: string
                          accessKeySecret:
                            properties:
                              key:
                                type: string
                              name:
                                type: string
                              optional:
                                type: boolean
                            type: object
                          secretKeySecret:
                            properties:
                              key:
                                type: string
                              name:
                                type: string
                              optional:
                                type: boolean
                            type: object
                        required:
                        - bucket
                        - accessKeySecret
                        - secretKeySecret
                        type: object
                    required:
                    - s3
                    type: object
                  storage:
                    properties:
                      size:
                        type: string
                      storageClass:
                        type: string
                    type: object
                type: object
            required:
            - host
            type: object
          status:
            properties:
              readyReplicas:
                type: integer
              postgresReady:
                type: boolean
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
# Source: glasskube-operator/templates/cluster-role.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: glasskube-operator
rules:
  - apiGroups:
      - glasskube.eu
    resources:
      - '*'
    verbs:
      - get
      - list
      - watch
      - patch
      - update
  - apiGroups:
      - glasskube.eu
    resources:
      - gitlabrunners
    verbs:
      - create
      - delete
  - apiGroups:
      - glasskube.eu
    resources:
      - miniobuckets
    verbs:
      - create
  - apiGroups:
      - apps
    resources:
      - deployments
      - statefulsets
    verbs:
      - create
      - get
      - list
      - patch
      - update
      - watch
  - apiGroups:
      - ""
    resources:
      - services
      - secrets
      - configmaps
      - serviceaccounts
      - pods
    verbs:
      - create
      - get
      - list
      - patch
      - update
      - watch
  - apiGroups:
      - ""
    resources:
      - persistentvolumeclaims
    verbs:
      - create
      - get
      - list
      - patch
      - update
      - watch
      - delete
  - apiGroups:
      - ""
    resources:
      - nodes
    verbs:
      - get
      - list
      - watch
  - apiGroups:
      - networking.k8s.io
    resources:
      - ingresses
    verbs:
      - create
      - get
      - list
      - patch
      - update
      - watch
  - apiGroups:
      - networking.k8s.io
    resources:
      - ingressclasses
    verbs:
      - get
      - list
  - apiGroups:
      - storage.k8s.io
    resources:
      - storageclasses
    verbs:
      - get
      - list
      - watch
  - apiGroups:
      - mariadb.mmontes.io
      - postgresql.cnpg.io
    resources:
      - '*'
    verbs:
      - create
      - get
      - list
      - patch
      - update
      - watch
  - apiGroups:
      - mariadb.mmontes.io
    resources:
      - mariadbs
    verbs:
      - delete
  - apiGroups:
      - cert-manager.io
    resources:
      - clusterissuers
    verbs:
      - get
      - list
      - watch
  - apiGroups:
      - monitoring.coreos.com
    resources:
      - servicemonitors
    verbs:
      - create
      - get
      - list
      - patch
      - update
      - watch
  - apiGroups:
      - apiextensions.k8s.io
    resources:
      - customresourcedefinitions
    verbs:
      - get
      - list
  - apiGroups:
      - batch
    resources:
      - cronjobs
    verbs:
      - create
      - get
      - list
      - patch
      - update
      - watch
  - apiGroups:
      - rbac.authorization.k8s.io
    resources:
      - roles
      - rolebindings
      - clusterrolebindings
    verbs:
      - create
      - get
      - list
      - patch
      - update
      - watch
  - apiGroups:
      - rbac.authorization.k8s.io
    resources:
      - clusterrolebindings
    verbs:
      - delete
  - apiGroups:
      - rbac.authorization.k8s.io
    resources:
      - clusterroles
    resourceNames:
      - system:auth-delegator
    verbs:
      - bind
---
# Source: glasskube-operator/templates/cluster-role-binding.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: glasskube-operator
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: glasskube-operator
subjects:
  - kind: ServiceAccount
    name: my-release-glasskube-operator
    namespace: default
---
# Source: glasskube-operator/charts/minio/templates/console-service.yaml
apiVersion: v1
kind: Service
metadata:
  name: my-release-minio-console
  labels:
    app: minio
    chart: minio-5.0.14
    release: my-release
    heritage: Helm
spec:
  type: ClusterIP
  ports:
    - name: http
      port: 9001
      protocol: TCP
      targetPort: 9001
  selector:
    app: minio
    release: my-release
---
# Source: glasskube-operator/charts/minio/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: my-release-minio
  labels:
    app: minio
    chart: minio-5.0.14
    release: my-release
    heritage: Helm
    monitoring: "true"
spec:
  type: ClusterIP
  ports:
    - name: http
      port: 9000
      protocol: TCP
      targetPort: 9000
  selector:
    app: minio
    release: my-release
---
# Source: glasskube-operator/charts/minio/templates/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: my-release-minio
  labels:
    app: minio
    chart: minio-5.0.14
    release: my-release
    heritage: Helm
spec:
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxSurge: 100%
      maxUnavailable: 0
  replicas: 1
  selector:
    matchLabels:
      app: minio
      release: my-release
  template:
    metadata:
      name: my-release-minio
      labels:
        app: minio
        release: my-release
      annotations:
        checksum/secrets: dfd5e076fcb0df40360389829c1c62e4f9c1951db22b73434e3400d930940513
        checksum/config: ef21760e50584cb1abf918af503e20c657e2194a0c6dfdd6c779df7ccf4edb11
    spec:
      securityContext:
        runAsUser: 1000
        runAsGroup: 1000
        fsGroup: 1000
        fsGroupChangePolicy: OnRootMismatch
      
      serviceAccountName: minio-sa
      containers:
        - name: minio
          image: "quay.io/minio/minio:RELEASE.2023-09-30T07-02-29Z"
          imagePullPolicy: IfNotPresent
          command:
            - "/bin/sh"
            - "-ce"
            - "/usr/bin/docker-entrypoint.sh minio server /export -S /etc/minio/certs/ --address :9000 --console-address :9001"
          volumeMounts:
            - name: minio-user
              mountPath: "/tmp/credentials"
              readOnly: true
            - name: export
              mountPath: /export            
          ports:
            - name: http
              containerPort: 9000
            - name: http-console
              containerPort: 9001
          env:
            - name: MINIO_ROOT_USER
              valueFrom:
                secretKeyRef:
                  name: my-release-minio
                  key: rootUser
            - name: MINIO_ROOT_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: my-release-minio
                  key: rootPassword
            - name: MINIO_PROMETHEUS_AUTH_TYPE
              value: "public"
          resources:
            requests:
              memory: 256Mi      
      volumes:
        - name: export
          persistentVolumeClaim:
            claimName: my-release-minio
        - name: minio-user
          secret:
            secretName: my-release-minio
---
# Source: glasskube-operator/templates/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: glasskube-operator
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: glasskube-operator
      app.kubernetes.io/instance: my-release
  strategy:
    type: Recreate
  template:
    metadata:
      labels:
        app.kubernetes.io/name: glasskube-operator
        app.kubernetes.io/instance: my-release
    spec:
      containers:
      - env:
        - name: NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        - name: BPL_JVM_THREAD_COUNT
          value: "16"
        - name: MINIO_SECRET_NAME
          value: my-release-minio
        - name: MINIO_HOST_NAME
          value: my-release-minio
        image: glasskube/operator:0.12.2
        imagePullPolicy: IfNotPresent
        name: glasskube-operator
        resources:
          limits:
            cpu: 1000m
            memory: 640Mi
          requests:
            cpu: 100m
            memory: 400Mi
        securityContext:
          runAsNonRoot: true
          readOnlyRootFilesystem: true
          allowPrivilegeEscalation: false
          capabilities: {}
      serviceAccountName: my-release-glasskube-operator
---
# Source: glasskube-operator/charts/minio/templates/post-job.yaml
apiVersion: batch/v1
kind: Job
metadata:
  name: my-release-minio-post-job
  labels:
    app: minio-post-job
    chart: minio-5.0.14
    release: my-release
    heritage: Helm
  annotations:
    "helm.sh/hook": post-install,post-upgrade
    "helm.sh/hook-delete-policy": hook-succeeded,before-hook-creation
spec:
  template:
    metadata:
      labels:
        app: minio-job
        release: my-release
    spec:
      restartPolicy: OnFailure      
      volumes:
        - name: etc-path
          emptyDir: {}
        - name: tmp
          emptyDir: {}
        - name: minio-configuration
          projected:
            sources:
              - configMap:
                  name: my-release-minio
              - secret:
                  name: my-release-minio
      serviceAccountName: minio-sa
      containers:
        - name: minio-make-user
          image: "quay.io/minio/mc:RELEASE.2023-09-29T16-41-22Z"
          imagePullPolicy: IfNotPresent
          command: [ "/bin/sh", "/config/add-user" ]
          env:
            - name: MINIO_ENDPOINT
              value: my-release-minio
            - name: MINIO_PORT
              value: "9000"
          volumeMounts:
            - name: etc-path
              mountPath: /etc/minio/mc
            - name: tmp
              mountPath: /tmp
            - name: minio-configuration
              mountPath: /config
          resources:
            requests:
              memory: 128Mi
