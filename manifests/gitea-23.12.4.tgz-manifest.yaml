---
# Source: gitea/templates/serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: my-release-gitea
  labels:
    helm.sh/chart: gitea-23.12.4
    app.kubernetes.io/name: gitea
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "1.21.6"
    app.kubernetes.io/managed-by: Helm
---
# Source: gitea/templates/secret.yaml
apiVersion: v1
kind: Secret
metadata:
  name: my-release-gitea-config
data:
  app.ini: "IyM9PT09CiMjIGh0dHBzOi8vZG9jcy5naXRlYS5pby9lbi11cy9jb25maWctY2hlYXQtc2hlZXQvCiMjPT09PQoKQVBQX05BTUU6ICJHaXRlYTogR2l0IHdpdGggYSBjdXAgb2YgdGVhIgpSVU5fTU9ERTogcHJvZApSVU5fVVNFUjogZ2l0CgpbcmVwb3NpdG9yeV0KUk9PVCA9IC9kYXRhL2dpdC9yZXBvc2l0b3JpZXMKCltyZXBvc2l0b3J5LmVkaXRvcl0KCltyZXBvc2l0b3J5LnB1bGwtcmVxdWVzdF0KCltyZXBvc2l0b3J5Lmlzc3VlXQoKW3JlcG9zaXRvcnkudXBsb2FkXQpURU1QX1BBVEggPSAvZGF0YS9zY3JhdGNoL3VwbG9hZHMKCltyZXBvc2l0b3J5LnJlbGVhc2VdCgpbcmVwb3NpdG9yeS5zaWduaW5nXQoKW3JlcG9zaXRvcnkubG9jYWxdCkxPQ0FMX0NPUFlfUEFUSCA9IC9kYXRhL3NjcmF0Y2gvbG9jYWwtcmVwbwoKW2NvcnNdCgpbdWldCgpbc2VydmVyXQpBUFBfREFUQV9QQVRIICAgID0gL2RhdGEvZ2l0ZWEKUFJPVE9DT0wgICAgICAgICA9IGh0dHAKRE9NQUlOICAgICAgICAgICA9IGxvY2FsaG9zdApIVFRQX1BPUlQgICAgICAgID0gODA4MApTU0hfTElTVEVOX1BPUlQgID0gMjIyMgpTU0hfUE9SVCAgICAgICAgID0gMjIKUk9PVF9VUkwgICAgICAgICA9IGh0dHA6Ly9sb2NhbGhvc3Q6ODA4MApMT0NBTF9ST09UX1VSTCAgID0gaHR0cDovL2xvY2FsaG9zdDo4MDgwCkxGU19TVEFSVF9TRVJWRVIgPSB0cnVlCgpbZGF0YWJhc2VdCkRCX1RZUEUgID0gc3FsaXRlMwpQQVRIICAgICA9IC9kYXRhL2dpdGVhL2dpdGVhLmRiCkhPU1QgICAgID0gCk5BTUUgICAgID0gClVTRVIgICAgID0gClBBU1NXRCAgID0gCkxPR19TUUwgID0gZmFsc2UKU0NIRU1BICAgPSAKU1NMX01PREUgPSAKQ0hBUlNFVCAgPSB1dGY4CgpbaW5kZXhlcl0KSVNTVUVfSU5ERVhFUl9UWVBFID0gYmxldmUKSVNTVUVfSU5ERVhFUl9QQVRIID0gL2RhdGEvZ2l0ZWEvaW5kZXhlcy9pc3N1ZXMuYmxldmUKSVNTVUVfSU5ERVhFUl9DT05OX1NUUiA9IAoKUkVQT19JTkRFWEVSX0VOQUJMRUQgPSBmYWxzZQpSRVBPX0lOREVYRVJfVFlQRSA9IGJsZXZlClJFUE9fSU5ERVhFUl9QQVRIID0gL2RhdGEvZ2l0ZWEvaW5kZXhlcy9jb2RlLmJsZXZlClJFUE9fSU5ERVhFUl9DT05OX1NUUiA9IAoKW3F1ZXVlLmNvZGVfaW5kZXhlcl0KVFlQRSA9IHBlcnNpc3RhYmxlLWNoYW5uZWwKQ09OTl9TVFIgPSAvMQpEQVRBX0RJUiA9IC9kYXRhL2dpdGVhL3F1ZXVlcy9jb2RlX2luZGV4ZXIKCltxdWV1ZS5pc3N1ZV9pbmRleGVyXQpUWVBFID0gcGVyc2lzdGFibGUtY2hhbm5lbApDT05OX1NUUiA9IC8wCkRBVEFfRElSID0gL2RhdGEvZ2l0ZWEvcXVldWVzL2lzc3VlX2luZGV4ZXIKCltxdWV1ZS5ub3RpZmljYXRpb24tc2VydmljZV0KVFlQRSA9IHBlcnNpc3RhYmxlLWNoYW5uZWwKQ09OTl9TVFIgPSAvMgpEQVRBX0RJUiA9IC9kYXRhL2dpdGVhL3F1ZXVlcy9ub3RpZmljYXRpb24tc2VydmljZQoKW3F1ZXVlLnRhc2tdClRZUEUgPSBwZXJzaXN0YWJsZS1jaGFubmVsCkNPTk5fU1RSID0gLzMKREFUQV9ESVIgPSAvZGF0YS9naXRlYS9xdWV1ZXMvbm90aWZpY2F0aW9uX3NlcnZpY2UKCltxdWV1ZS5tYWlsXQpUWVBFID0gcGVyc2lzdGFibGUtY2hhbm5lbApDT05OX1NUUiA9IC80CkRBVEFfRElSID0gL2RhdGEvZ2l0ZWEvcXVldWVzL21haWwKCltxdWV1ZS5wdXNoX3VwZGF0ZV0KVFlQRSA9IHBlcnNpc3RhYmxlLWNoYW5uZWwKQ09OTl9TVFIgPSAvNQpEQVRBX0RJUiA9IC9kYXRhL2dpdGVhL3F1ZXVlcy9wdXNoX3VwZGF0ZQoKW3F1ZXVlLnJlcG9fc3RhdHNfdXBkYXRlXQpUWVBFID0gcGVyc2lzdGFibGUtY2hhbm5lbApDT05OX1NUUiA9IC82CkRBVEFfRElSID0gL2RhdGEvZ2l0ZWEvcXVldWVzL3JlcG9fc3RhdHNfdXBkYXRlCgpbcXVldWUucmVwby1hcmNoaXZlXQpUWVBFID0gcGVyc2lzdGFibGUtY2hhbm5lbApDT05OX1NUUiA9IC83CkRBVEFfRElSID0gL2RhdGEvZ2l0ZWEvcXVldWVzL3JlcG8tYXJjaGl2ZQoKW3F1ZXVlLm1pcnJvcl0KVFlQRSA9IHBlcnNpc3RhYmxlLWNoYW5uZWwKQ09OTl9TVFIgPSAvOApEQVRBX0RJUiA9IC9kYXRhL2dpdGVhL3F1ZXVlcy9taXJyb3IKCltxdWV1ZS5wcl9wYXRjaF9jaGVja2VyXQpUWVBFID0gcGVyc2lzdGFibGUtY2hhbm5lbApDT05OX1NUUiA9IC85CkRBVEFfRElSID0gL2RhdGEvZ2l0ZWEvcXVldWVzL3ByX3BhdGNoX2NoZWNrZXIKCltzZWN1cml0eV0KSU5TVEFMTF9MT0NLICAgICAgICAgICAgICAgICAgPSBmYWxzZQpTRUNSRVRfS0VZICAgICAgICAgICAgICAgICAgICA9IDJlYjM3MWE3OGMwMzNhOTRhYTJhN2MxNjIxYTMyMjdlOTE0ODRiOTNkOWQ2MzRhYzc3YWZiZWM5MzI3OTQ2ODkKSU5URVJOQUxfVE9LRU4gICAgICAgICAgICAgICAgPSBhYjU2NmQ5YTIzMjgxNDUzNDQ3YjUyZmRlZmMzOWRmOTEyYzAxYmQwZjVjZDg4MDZkYjVjOGU5MThkMmE5YmI4ClBBU1NXT1JEX0hBU0hfQUxHTyAgICAgICAgICAgID0gcGJrZGYyCk1JTl9QQVNTV09SRF9MRU5HVEggICAgICAgICAgID0gOApQQVNTV09SRF9DT01QTEVYSVRZICAgICAgICAgICA9IHNwZWMKCltzZXJ2aWNlXQoKW3NlcnZpY2UuZXhwbG9yZV0KClttYWlsZXJdCkVOQUJMRUQgPSBmYWxzZQpTTVRQX0FERFIgPSA6NDY1CkZST00gPSAKVVNFUiA9IApQQVNTV0QgPSAKCltjYWNoZV0KRU5BQkxFRCA9IHRydWUKQURBUFRFUiA9IG1lbW9yeQpJTlRFUlZBTCA9IDYwCklURU1fVFRMID0gMTZoCkhPU1QgPSByZWRpczovLzEyNy4wLjAuMTo2Mzc5LzAKCltzZXNzaW9uXQpQUk9WSURFUiAgICAgICAgPSBkYgpQUk9WSURFUl9DT05GSUcgPQoKW3BpY3R1cmVdCgpbYXR0YWNobWVudF0KCltsb2ddClJPT1RfUEFUSCA9IC9kYXRhL3NjcmF0Y2gvbG9ncwoKW21ldHJpY3NdCkVOQUJMRUQgPSBmYWxzZQoKW29hdXRoMl0KRU5BQkxFRCA9IHRydWUKQUNDRVNTX1RPS0VOX0VYUElSQVRJT05fVElNRSA9IDM2MDAgIyBzZWNvbmRzClJFRlJFU0hfVE9LRU5fRVhQSVJBVElPTl9USU1FID0gNzMwICMgaG91cnMKSldUX1NJR05JTkdfUFJJVkFURV9LRVlfRklMRSA9IC9kYXRhL2dpdGVhL2p3dC5wZW0KClttaWdyYXRpb25zXQpNQVhfQVRURU1QVFMgPSAzClJFVFJZX0JBQ0tPRkYgPSAzCkFMTE9XRURfRE9NQUlOUyA9CkJMT0NLRURfRE9NQUlOUyA9CkFMTE9XX0xPQ0FMTkVUV09SS1MgPSBmYWxzZQpTS0lQX1RMU19WRVJJRlkgPSBmYWxzZQoKW2ZlZGVyYXRpb25dCkVOQUJMRUQgPSB0cnVlCgpbcGFja2FnZXNdCkVOQUJMRUQgPSB0cnVlCkNIVU5LRURfVVBMT0FEX1BBVEggPSAvZGF0YS9zY3JhdGNoL3BhY2thZ2UtdXBsb2FkCgpbbWlycm9yXQpFTkFCTEVEID0gdHJ1ZQpESVNBQkxFX05FV19QVUxMID0gZmFsc2UKRElTQUJMRV9ORVdfUFVTSCA9IGZhbHNlCkRFRkFVTFRfSU5URVJWQUwgPSA4aApNSU5fSU5URVJWQUwgPSAxMG0KCltsZnNdClBBVEggPSAvZGF0YS9naXQvbGZzCgpbc3RvcmFnZV0KU1RPUkFHRV9UWVBFID0gbG9jYWwKUEFUSCA9IC9kYXRhL2Jsb2JzCk1JTklPX0VORFBPSU5UID0gCk1JTklPX0FDQ0VTU19LRVlfSUQgPSAKTUlOSU9fU0VDUkVUX0FDQ0VTU19LRVkgPSAKTUlOSU9fQlVDS0VUID0gCk1JTklPX0xPQ0FUSU9OID0gCk1JTklPX1VTRV9TU0wgPSB0cnVlCgpbd2ViaG9va10KREVMSVZFUl9USU1FT1VUID0gNQoKW290aGVyXQpTSE9XX0ZPT1RFUl9CUkFORElORyA9IGZhbHNlClNIT1dfRk9PVEVSX1ZFUlNJT04gPSB0cnVlClNIT1dfRk9PVEVSX1RFTVBMQVRFX0xPQURfVElNRSA9IHRydWU="
---
# Source: gitea/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: my-release-gitea
  labels:
    helm.sh/chart: gitea-23.12.4
    app.kubernetes.io/name: gitea
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "1.21.6"
    app.kubernetes.io/managed-by: Helm
  annotations:
    {}
spec:
  type: ClusterIP
  ports:
    - port: 80
      targetPort: http
      protocol: TCP
      name: http
    - port: 22
      targetPort: ssh
      protocol: TCP
      name: ssh
  selector:
    app.kubernetes.io/name: gitea
    app.kubernetes.io/instance: my-release
---
# Source: gitea/templates/statefulset.yaml
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: my-release-gitea
  labels:
    helm.sh/chart: gitea-23.12.4
    app.kubernetes.io/name: gitea
    app.kubernetes.io/instance: my-release
    app.kubernetes.io/version: "1.21.6"
    app.kubernetes.io/managed-by: Helm
spec:
  replicas: 1
  serviceName: my-release-gitea
  selector:
    matchLabels:
      app.kubernetes.io/name: gitea
      app.kubernetes.io/instance: my-release
  volumeClaimTemplates:
    - metadata:
        name: blobs
      spec:
        accessModes:
          - ReadWriteOnce
        resources:
          requests:
            storage: 10Gi
    - metadata:
        name: git
      spec:
        accessModes:
          - ReadWriteOnce
        resources:
          requests:
            storage: 10Gi
    - metadata:
        name: gitea
      spec:
        accessModes:
          - ReadWriteOnce
        resources:
          requests:
            storage: 10Gi
  template:
    metadata:
      annotations:
        checksum/secret: ac07b2b4b7f919fc0bdca02071b9e9e05da9c969dbfb27224082426216e72a3a
      labels:
        helm.sh/chart: gitea-23.12.4
        app.kubernetes.io/name: gitea
        app.kubernetes.io/instance: my-release
        app.kubernetes.io/version: "1.21.6"
        app.kubernetes.io/managed-by: Helm
    spec:
      serviceAccountName: my-release-gitea
      securityContext:
        {}
      containers:
        - name: gitea
          securityContext:
            runAsGroup: 1000
            runAsUser: 1000
          image: "gitea/gitea:1.21.6"
          imagePullPolicy: IfNotPresent
          command:
            - sh
            - -c
            - |
              mkdir -p /data/gitea/conf;
              cp /etc/gitea/app.ini /data/gitea/conf/app.ini;
              gitea
          ports:
            - name: http
              containerPort: 8080
              protocol: TCP
            - name: ssh
              containerPort: 2222
              protocol: TCP
          livenessProbe:
            httpGet:
              path: /
              port: http
            initialDelaySeconds: 30
            timeoutSeconds: 5
            periodSeconds: 10
            successThreshold: 1
            failureThreshold: 10
          resources:
            {}
          volumeMounts:
            - mountPath: /etc/gitea
              name: config
            - mountPath: /data/scratch
              name: scratch
            - mountPath: /data/blobs
              name: blobs
            - mountPath: /data/git
              name: git
            - mountPath: /data/gitea
              name: gitea
      volumes:
        - name: config
          secret:
            secretName: my-release-gitea-config
        - name: scratch
          emptyDir: {}
