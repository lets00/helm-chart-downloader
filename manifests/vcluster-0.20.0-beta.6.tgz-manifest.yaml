---
# Source: vcluster/templates/serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: vc-my-release
  namespace: default
  labels:
    app: vcluster
    chart: "vcluster-0.20.0-beta.6"
    release: "my-release"
    heritage: "Helm"
---
# Source: vcluster/templates/workload-serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: vc-workload-my-release
  namespace: default
  labels:
    app: vcluster
    chart: "vcluster-0.20.0-beta.6"
    release: "my-release"
    heritage: "Helm"
---
# Source: vcluster/templates/config-secret.yaml
apiVersion: v1
kind: Secret
metadata:
  name: "vc-config-my-release"
  namespace: default
  labels:
    app: vcluster
    chart: "vcluster-0.20.0-beta.6"
    release: "my-release"
    heritage: "Helm"
type: Opaque
data:
  config.yaml: "Y29udHJvbFBsYW5lOgogIGFkdmFuY2VkOgogICAgZGVmYXVsdEltYWdlUmVnaXN0cnk6ICIiCiAgICBnbG9iYWxNZXRhZGF0YToKICAgICAgYW5ub3RhdGlvbnM6IHt9CiAgICBoZWFkbGVzc1NlcnZpY2U6CiAgICAgIGFubm90YXRpb25zOiB7fQogICAgICBsYWJlbHM6IHt9CiAgICBzZXJ2aWNlQWNjb3VudDoKICAgICAgYW5ub3RhdGlvbnM6IHt9CiAgICAgIGVuYWJsZWQ6IHRydWUKICAgICAgaW1hZ2VQdWxsU2VjcmV0czogW10KICAgICAgbGFiZWxzOiB7fQogICAgICBuYW1lOiAiIgogICAgdmlydHVhbFNjaGVkdWxlcjoKICAgICAgZW5hYmxlZDogZmFsc2UKICAgIHdvcmtsb2FkU2VydmljZUFjY291bnQ6CiAgICAgIGFubm90YXRpb25zOiB7fQogICAgICBlbmFibGVkOiB0cnVlCiAgICAgIGltYWdlUHVsbFNlY3JldHM6IFtdCiAgICAgIGxhYmVsczoge30KICAgICAgbmFtZTogIiIKICBiYWNraW5nU3RvcmU6CiAgICBkYXRhYmFzZToKICAgICAgZW1iZWRkZWQ6CiAgICAgICAgZW5hYmxlZDogZmFsc2UKICAgICAgZXh0ZXJuYWw6CiAgICAgICAgY2FGaWxlOiAiIgogICAgICAgIGNlcnRGaWxlOiAiIgogICAgICAgIGRhdGFTb3VyY2U6ICIiCiAgICAgICAgZW5hYmxlZDogZmFsc2UKICAgICAgICBrZXlGaWxlOiAiIgogICAgZXRjZDoKICAgICAgZGVwbG95OgogICAgICAgIGVuYWJsZWQ6IGZhbHNlCiAgICAgICAgaGVhZGxlc3NTZXJ2aWNlOgogICAgICAgICAgYW5ub3RhdGlvbnM6IHt9CiAgICAgICAgICBlbmFibGVkOiB0cnVlCiAgICAgICAgc2VydmljZToKICAgICAgICAgIGFubm90YXRpb25zOiB7fQogICAgICAgICAgZW5hYmxlZDogdHJ1ZQogICAgICAgIHN0YXRlZnVsU2V0OgogICAgICAgICAgYW5ub3RhdGlvbnM6IHt9CiAgICAgICAgICBlbmFibGVTZXJ2aWNlTGlua3M6IHRydWUKICAgICAgICAgIGVuYWJsZWQ6IHRydWUKICAgICAgICAgIGVudjogW10KICAgICAgICAgIGV4dHJhQXJnczogW10KICAgICAgICAgIGhpZ2hBdmFpbGFiaWxpdHk6CiAgICAgICAgICAgIHJlcGxpY2FzOiAxCiAgICAgICAgICBpbWFnZToKICAgICAgICAgICAgcmVnaXN0cnk6IHJlZ2lzdHJ5Lms4cy5pbwogICAgICAgICAgICByZXBvc2l0b3J5OiBldGNkCiAgICAgICAgICAgIHRhZzogMy41LjEwLTAKICAgICAgICAgIGltYWdlUHVsbFBvbGljeTogIiIKICAgICAgICAgIGxhYmVsczoge30KICAgICAgICAgIHBlcnNpc3RlbmNlOgogICAgICAgICAgICBhZGRWb2x1bWVNb3VudHM6IFtdCiAgICAgICAgICAgIGFkZFZvbHVtZXM6IFtdCiAgICAgICAgICAgIHZvbHVtZUNsYWltOgogICAgICAgICAgICAgIGFjY2Vzc01vZGVzOgogICAgICAgICAgICAgIC0gUmVhZFdyaXRlT25jZQogICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWUKICAgICAgICAgICAgICByZXRlbnRpb25Qb2xpY3k6IFJldGFpbgogICAgICAgICAgICAgIHNpemU6IDVHaQogICAgICAgICAgICAgIHN0b3JhZ2VDbGFzczogIiIKICAgICAgICAgICAgdm9sdW1lQ2xhaW1UZW1wbGF0ZXM6IFtdCiAgICAgICAgICBwb2RzOgogICAgICAgICAgICBhbm5vdGF0aW9uczoge30KICAgICAgICAgICAgbGFiZWxzOiB7fQogICAgICAgICAgcmVzb3VyY2VzOgogICAgICAgICAgICByZXF1ZXN0czoKICAgICAgICAgICAgICBjcHU6IDIwbQogICAgICAgICAgICAgIG1lbW9yeTogMTUwTWkKICAgICAgICAgIHNjaGVkdWxpbmc6CiAgICAgICAgICAgIGFmZmluaXR5OiB7fQogICAgICAgICAgICBub2RlU2VsZWN0b3I6IHt9CiAgICAgICAgICAgIHBvZE1hbmFnZW1lbnRQb2xpY3k6IFBhcmFsbGVsCiAgICAgICAgICAgIHByaW9yaXR5Q2xhc3NOYW1lOiAiIgogICAgICAgICAgICB0b2xlcmF0aW9uczogW10KICAgICAgICAgICAgdG9wb2xvZ3lTcHJlYWRDb25zdHJhaW50czogW10KICAgICAgICAgIHNlY3VyaXR5OgogICAgICAgICAgICBjb250YWluZXJTZWN1cml0eUNvbnRleHQ6IHt9CiAgICAgICAgICAgIHBvZFNlY3VyaXR5Q29udGV4dDoge30KICAgICAgZW1iZWRkZWQ6CiAgICAgICAgZW5hYmxlZDogZmFsc2UKICAgICAgICBtaWdyYXRlRnJvbURlcGxveWVkRXRjZDogZmFsc2UKICBjb3JlZG5zOgogICAgZGVwbG95bWVudDoKICAgICAgYW5ub3RhdGlvbnM6IHt9CiAgICAgIGltYWdlOiAiIgogICAgICBsYWJlbHM6IHt9CiAgICAgIG5vZGVTZWxlY3Rvcjoge30KICAgICAgcG9kczoKICAgICAgICBhbm5vdGF0aW9uczoge30KICAgICAgICBsYWJlbHM6IHt9CiAgICAgIHJlcGxpY2FzOiAxCiAgICAgIHJlc291cmNlczoKICAgICAgICBsaW1pdHM6CiAgICAgICAgICBjcHU6IDEwMDBtCiAgICAgICAgICBtZW1vcnk6IDE3ME1pCiAgICAgICAgcmVxdWVzdHM6CiAgICAgICAgICBjcHU6IDIwbQogICAgICAgICAgbWVtb3J5OiA2NE1pCiAgICBlbWJlZGRlZDogZmFsc2UKICAgIGVuYWJsZWQ6IHRydWUKICAgIG92ZXJ3cml0ZUNvbmZpZzogIiIKICAgIG92ZXJ3cml0ZU1hbmlmZXN0czogIiIKICAgIHByaW9yaXR5Q2xhc3NOYW1lOiAiIgogICAgc2VydmljZToKICAgICAgYW5ub3RhdGlvbnM6IHt9CiAgICAgIGxhYmVsczoge30KICAgICAgc3BlYzoKICAgICAgICB0eXBlOiBDbHVzdGVySVAKICBkaXN0cm86CiAgICBla3M6CiAgICAgIGFwaVNlcnZlcjoKICAgICAgICBjb21tYW5kOiBbXQogICAgICAgIGVuYWJsZWQ6IHRydWUKICAgICAgICBleHRyYUFyZ3M6IFtdCiAgICAgICAgaW1hZ2U6CiAgICAgICAgICByZWdpc3RyeTogcHVibGljLmVjci5hd3MKICAgICAgICAgIHJlcG9zaXRvcnk6IGVrcy1kaXN0cm8va3ViZXJuZXRlcy9rdWJlLWFwaXNlcnZlcgogICAgICAgICAgdGFnOiB2MS4yOC4yLWVrcy0xLTI4LTYKICAgICAgICBpbWFnZVB1bGxQb2xpY3k6ICIiCiAgICAgIGNvbnRyb2xsZXJNYW5hZ2VyOgogICAgICAgIGNvbW1hbmQ6IFtdCiAgICAgICAgZW5hYmxlZDogdHJ1ZQogICAgICAgIGV4dHJhQXJnczogW10KICAgICAgICBpbWFnZToKICAgICAgICAgIHJlZ2lzdHJ5OiBwdWJsaWMuZWNyLmF3cwogICAgICAgICAgcmVwb3NpdG9yeTogZWtzLWRpc3Ryby9rdWJlcm5ldGVzL2t1YmUtY29udHJvbGxlci1tYW5hZ2VyCiAgICAgICAgICB0YWc6IHYxLjI4LjItZWtzLTEtMjgtNgogICAgICAgIGltYWdlUHVsbFBvbGljeTogIiIKICAgICAgZW5hYmxlZDogZmFsc2UKICAgICAgZW52OiBbXQogICAgICByZXNvdXJjZXM6CiAgICAgICAgbGltaXRzOgogICAgICAgICAgY3B1OiAxMDBtCiAgICAgICAgICBtZW1vcnk6IDI1Nk1pCiAgICAgICAgcmVxdWVzdHM6CiAgICAgICAgICBjcHU6IDQwbQogICAgICAgICAgbWVtb3J5OiA2NE1pCiAgICAgIHNjaGVkdWxlcjoKICAgICAgICBjb21tYW5kOiBbXQogICAgICAgIGV4dHJhQXJnczogW10KICAgICAgICBpbWFnZToKICAgICAgICAgIHJlZ2lzdHJ5OiBwdWJsaWMuZWNyLmF3cwogICAgICAgICAgcmVwb3NpdG9yeTogZWtzLWRpc3Ryby9rdWJlcm5ldGVzL2t1YmUtc2NoZWR1bGVyCiAgICAgICAgICB0YWc6IHYxLjI4LjItZWtzLTEtMjgtNgogICAgICAgIGltYWdlUHVsbFBvbGljeTogIiIKICAgICAgc2VjdXJpdHlDb250ZXh0OiB7fQogICAgazBzOgogICAgICBjb21tYW5kOiBbXQogICAgICBjb25maWc6ICIiCiAgICAgIGVuYWJsZWQ6IGZhbHNlCiAgICAgIGV4dHJhQXJnczogW10KICAgICAgaW1hZ2U6CiAgICAgICAgcmVnaXN0cnk6ICIiCiAgICAgICAgcmVwb3NpdG9yeTogazBzcHJvamVjdC9rMHMKICAgICAgICB0YWc6IHYxLjI5LjEtazBzLjAKICAgICAgaW1hZ2VQdWxsUG9saWN5OiAiIgogICAgICByZXNvdXJjZXM6CiAgICAgICAgbGltaXRzOgogICAgICAgICAgY3B1OiAxMDBtCiAgICAgICAgICBtZW1vcnk6IDI1Nk1pCiAgICAgICAgcmVxdWVzdHM6CiAgICAgICAgICBjcHU6IDQwbQogICAgICAgICAgbWVtb3J5OiA2NE1pCiAgICAgIHNlY3VyaXR5Q29udGV4dDoge30KICAgIGszczoKICAgICAgY29tbWFuZDogW10KICAgICAgZW5hYmxlZDogZmFsc2UKICAgICAgZXh0cmFBcmdzOiBbXQogICAgICBpbWFnZToKICAgICAgICByZWdpc3RyeTogIiIKICAgICAgICByZXBvc2l0b3J5OiByYW5jaGVyL2szcwogICAgICAgIHRhZzogdjEuMjkuMC1rM3MxCiAgICAgIGltYWdlUHVsbFBvbGljeTogIiIKICAgICAgcmVzb3VyY2VzOgogICAgICAgIGxpbWl0czoKICAgICAgICAgIGNwdTogMTAwbQogICAgICAgICAgbWVtb3J5OiAyNTZNaQogICAgICAgIHJlcXVlc3RzOgogICAgICAgICAgY3B1OiA0MG0KICAgICAgICAgIG1lbW9yeTogNjRNaQogICAgICBzZWN1cml0eUNvbnRleHQ6IHt9CiAgICBrOHM6CiAgICAgIGFwaVNlcnZlcjoKICAgICAgICBjb21tYW5kOiBbXQogICAgICAgIGVuYWJsZWQ6IHRydWUKICAgICAgICBleHRyYUFyZ3M6IFtdCiAgICAgICAgaW1hZ2U6CiAgICAgICAgICByZWdpc3RyeTogcmVnaXN0cnkuazhzLmlvCiAgICAgICAgICByZXBvc2l0b3J5OiBrdWJlLWFwaXNlcnZlcgogICAgICAgICAgdGFnOiB2MS4yOS4wCiAgICAgICAgaW1hZ2VQdWxsUG9saWN5OiAiIgogICAgICBjb250cm9sbGVyTWFuYWdlcjoKICAgICAgICBjb21tYW5kOiBbXQogICAgICAgIGVuYWJsZWQ6IHRydWUKICAgICAgICBleHRyYUFyZ3M6IFtdCiAgICAgICAgaW1hZ2U6CiAgICAgICAgICByZWdpc3RyeTogcmVnaXN0cnkuazhzLmlvCiAgICAgICAgICByZXBvc2l0b3J5OiBrdWJlLWNvbnRyb2xsZXItbWFuYWdlcgogICAgICAgICAgdGFnOiB2MS4yOS4wCiAgICAgICAgaW1hZ2VQdWxsUG9saWN5OiAiIgogICAgICBlbmFibGVkOiBmYWxzZQogICAgICBlbnY6IFtdCiAgICAgIHJlc291cmNlczoKICAgICAgICBsaW1pdHM6CiAgICAgICAgICBjcHU6IDEwMG0KICAgICAgICAgIG1lbW9yeTogMjU2TWkKICAgICAgICByZXF1ZXN0czoKICAgICAgICAgIGNwdTogNDBtCiAgICAgICAgICBtZW1vcnk6IDY0TWkKICAgICAgc2NoZWR1bGVyOgogICAgICAgIGNvbW1hbmQ6IFtdCiAgICAgICAgZXh0cmFBcmdzOiBbXQogICAgICAgIGltYWdlOgogICAgICAgICAgcmVnaXN0cnk6IHJlZ2lzdHJ5Lms4cy5pbwogICAgICAgICAgcmVwb3NpdG9yeToga3ViZS1zY2hlZHVsZXIKICAgICAgICAgIHRhZzogdjEuMjkuMAogICAgICAgIGltYWdlUHVsbFBvbGljeTogIiIKICAgICAgc2VjdXJpdHlDb250ZXh0OiB7fQogIGluZ3Jlc3M6CiAgICBhbm5vdGF0aW9uczoKICAgICAgbmdpbnguaW5ncmVzcy5rdWJlcm5ldGVzLmlvL2JhY2tlbmQtcHJvdG9jb2w6IEhUVFBTCiAgICAgIG5naW54LmluZ3Jlc3Mua3ViZXJuZXRlcy5pby9zc2wtcGFzc3Rocm91Z2g6ICJ0cnVlIgogICAgICBuZ2lueC5pbmdyZXNzLmt1YmVybmV0ZXMuaW8vc3NsLXJlZGlyZWN0OiAidHJ1ZSIKICAgIGVuYWJsZWQ6IGZhbHNlCiAgICBob3N0OiBteS1ob3N0LmNvbQogICAgbGFiZWxzOiB7fQogICAgcGF0aFR5cGU6IEltcGxlbWVudGF0aW9uU3BlY2lmaWMKICAgIHNwZWM6CiAgICAgIHRsczogW10KICBwcm94eToKICAgIGJpbmRBZGRyZXNzOiAwLjAuMC4wCiAgICBleHRyYVNBTnM6IFtdCiAgICBwb3J0OiA4NDQzCiAgc2VydmljZToKICAgIGFubm90YXRpb25zOiB7fQogICAgZW5hYmxlZDogdHJ1ZQogICAgaHR0cHNOb2RlUG9ydDogMAogICAga3ViZWxldE5vZGVQb3J0OiAwCiAgICBsYWJlbHM6IHt9CiAgICBzcGVjOgogICAgICB0eXBlOiBDbHVzdGVySVAKICBzZXJ2aWNlTW9uaXRvcjoKICAgIGFubm90YXRpb25zOiB7fQogICAgZW5hYmxlZDogZmFsc2UKICAgIGxhYmVsczoge30KICBzdGF0ZWZ1bFNldDoKICAgIGFubm90YXRpb25zOiB7fQogICAgYXJnczogW10KICAgIGNvbW1hbmQ6IFtdCiAgICBlbmFibGVTZXJ2aWNlTGlua3M6IHRydWUKICAgIGVudjogW10KICAgIGhpZ2hBdmFpbGFiaWxpdHk6CiAgICAgIGxlYXNlRHVyYXRpb246IDYwCiAgICAgIHJlbmV3RGVhZGxpbmU6IDQwCiAgICAgIHJlcGxpY2FzOiAxCiAgICAgIHJldHJ5UGVyaW9kOiAxNQogICAgaW1hZ2U6CiAgICAgIHJlZ2lzdHJ5OiBnaGNyLmlvCiAgICAgIHJlcG9zaXRvcnk6IGxvZnQtc2gvdmNsdXN0ZXItcHJvCiAgICAgIHRhZzogIiIKICAgIGltYWdlUHVsbFBvbGljeTogIiIKICAgIGxhYmVsczoge30KICAgIHBlcnNpc3RlbmNlOgogICAgICBhZGRWb2x1bWVNb3VudHM6IFtdCiAgICAgIGFkZFZvbHVtZXM6IFtdCiAgICAgIHZvbHVtZUNsYWltOgogICAgICAgIGFjY2Vzc01vZGVzOgogICAgICAgIC0gUmVhZFdyaXRlT25jZQogICAgICAgIGVuYWJsZWQ6IGF1dG8KICAgICAgICByZXRlbnRpb25Qb2xpY3k6IFJldGFpbgogICAgICAgIHNpemU6IDVHaQogICAgICAgIHN0b3JhZ2VDbGFzczogIiIKICAgICAgdm9sdW1lQ2xhaW1UZW1wbGF0ZXM6IFtdCiAgICBwb2RzOgogICAgICBhbm5vdGF0aW9uczoge30KICAgICAgbGFiZWxzOiB7fQogICAgcHJvYmVzOgogICAgICBsaXZlbmVzc1Byb2JlOgogICAgICAgIGVuYWJsZWQ6IHRydWUKICAgICAgcmVhZGluZXNzUHJvYmU6CiAgICAgICAgZW5hYmxlZDogdHJ1ZQogICAgICBzdGFydHVwUHJvYmU6CiAgICAgICAgZW5hYmxlZDogdHJ1ZQogICAgcmVzb3VyY2VzOgogICAgICBsaW1pdHM6CiAgICAgICAgZXBoZW1lcmFsLXN0b3JhZ2U6IDhHaQogICAgICAgIG1lbW9yeTogMkdpCiAgICAgIHJlcXVlc3RzOgogICAgICAgIGNwdTogMjAwbQogICAgICAgIGVwaGVtZXJhbC1zdG9yYWdlOiAyMDBNaQogICAgICAgIG1lbW9yeTogMjU2TWkKICAgIHNjaGVkdWxpbmc6CiAgICAgIGFmZmluaXR5OiB7fQogICAgICBub2RlU2VsZWN0b3I6IHt9CiAgICAgIHBvZE1hbmFnZW1lbnRQb2xpY3k6IFBhcmFsbGVsCiAgICAgIHByaW9yaXR5Q2xhc3NOYW1lOiAiIgogICAgICB0b2xlcmF0aW9uczogW10KICAgICAgdG9wb2xvZ3lTcHJlYWRDb25zdHJhaW50czogW10KICAgIHNlY3VyaXR5OgogICAgICBjb250YWluZXJTZWN1cml0eUNvbnRleHQ6CiAgICAgICAgYWxsb3dQcml2aWxlZ2VFc2NhbGF0aW9uOiBmYWxzZQogICAgICAgIHJ1bkFzR3JvdXA6IDAKICAgICAgICBydW5Bc1VzZXI6IDAKICAgICAgcG9kU2VjdXJpdHlDb250ZXh0OiB7fQogICAgd29ya2luZ0RpcjogIiIKZXhwZXJpbWVudGFsOgogIGRlcGxveToKICAgIGhlbG06IFtdCiAgICBtYW5pZmVzdHM6ICIiCiAgICBtYW5pZmVzdHNUZW1wbGF0ZTogIiIKICBnZW5lcmljU3luYzoKICAgIGNsdXN0ZXJSb2xlOgogICAgICBleHRyYVJ1bGVzOiBbXQogICAgcm9sZToKICAgICAgZXh0cmFSdWxlczogW10KICBpc29sYXRlZENvbnRyb2xQbGFuZToKICAgIGhlYWRsZXNzOiBmYWxzZQogIG11bHRpTmFtZXNwYWNlTW9kZToKICAgIGVuYWJsZWQ6IGZhbHNlCiAgc3luY1NldHRpbmdzOgogICAgZGlzYWJsZVN5bmM6IGZhbHNlCiAgICByZXdyaXRlS3ViZXJuZXRlc1NlcnZpY2U6IGZhbHNlCiAgICBzZXRPd25lcjogdHJ1ZQogICAgc3luY0xhYmVsczogW10KICAgIHRhcmdldE5hbWVzcGFjZTogIiIKZXhwb3J0S3ViZUNvbmZpZzoKICBjb250ZXh0OiAiIgogIHNlY3JldDoKICAgIG5hbWU6ICIiCiAgICBuYW1lc3BhY2U6ICIiCiAgc2VydmVyOiAiIgpuZXR3b3JraW5nOgogIGFkdmFuY2VkOgogICAgY2x1c3RlckRvbWFpbjogY2x1c3Rlci5sb2NhbAogICAgZmFsbGJhY2tIb3N0Q2x1c3RlcjogZmFsc2UKICAgIHByb3h5S3ViZWxldHM6CiAgICAgIGJ5SG9zdG5hbWU6IHRydWUKICAgICAgYnlJUDogdHJ1ZQogIHJlcGxpY2F0ZVNlcnZpY2VzOgogICAgZnJvbUhvc3Q6IFtdCiAgICB0b0hvc3Q6IFtdCiAgcmVzb2x2ZUROUzogW10Kb2JzZXJ2YWJpbGl0eToKICBtZXRyaWNzOgogICAgcHJveHk6CiAgICAgIG5vZGVzOiBmYWxzZQogICAgICBwb2RzOiBmYWxzZQpwbGF0Zm9ybToKICBhcGk6CiAgICBhY2Nlc3NLZXk6ICIiCiAgICBob3N0OiAiIgogICAgaW5zZWN1cmU6IGZhbHNlCiAgICBzZWNyZXRSZWY6CiAgICAgIG5hbWU6ICIiCiAgICAgIG5hbWVzcGFjZTogIiIKcGx1Z2luczoge30KcG9saWNpZXM6CiAgY2VudHJhbEFkbWlzc2lvbjoKICAgIG11dGF0aW5nV2ViaG9va3M6IFtdCiAgICB2YWxpZGF0aW5nV2ViaG9va3M6IFtdCiAgbGltaXRSYW5nZToKICAgIGFubm90YXRpb25zOiB7fQogICAgZGVmYXVsdDoKICAgICAgY3B1OiAiMSIKICAgICAgZXBoZW1lcmFsLXN0b3JhZ2U6IDhHaQogICAgICBtZW1vcnk6IDUxMk1pCiAgICBkZWZhdWx0UmVxdWVzdDoKICAgICAgY3B1OiAxMDBtCiAgICAgIGVwaGVtZXJhbC1zdG9yYWdlOiAzR2kKICAgICAgbWVtb3J5OiAxMjhNaQogICAgZW5hYmxlZDogZmFsc2UKICAgIGxhYmVsczoge30KICBuZXR3b3JrUG9saWN5OgogICAgYW5ub3RhdGlvbnM6IHt9CiAgICBlbmFibGVkOiBmYWxzZQogICAgZmFsbGJhY2tEbnM6IDguOC44LjgKICAgIGxhYmVsczoge30KICAgIG91dGdvaW5nQ29ubmVjdGlvbnM6CiAgICAgIGlwQmxvY2s6CiAgICAgICAgY2lkcjogMC4wLjAuMC8wCiAgICAgICAgZXhjZXB0OgogICAgICAgIC0gMTAwLjY0LjAuMC8xMAogICAgICAgIC0gMTI3LjAuMC4wLzgKICAgICAgICAtIDEwLjAuMC4wLzgKICAgICAgICAtIDE3Mi4xNi4wLjAvMTIKICAgICAgICAtIDE5Mi4xNjguMC4wLzE2CiAgcmVzb3VyY2VRdW90YToKICAgIGFubm90YXRpb25zOiB7fQogICAgZW5hYmxlZDogZmFsc2UKICAgIGxhYmVsczoge30KICAgIHF1b3RhOgogICAgICBjb3VudC9jb25maWdtYXBzOiAxMDAKICAgICAgY291bnQvZW5kcG9pbnRzOiA0MAogICAgICBjb3VudC9wZXJzaXN0ZW50dm9sdW1lY2xhaW1zOiAyMAogICAgICBjb3VudC9wb2RzOiAyMAogICAgICBjb3VudC9zZWNyZXRzOiAxMDAKICAgICAgY291bnQvc2VydmljZXM6IDIwCiAgICAgIGxpbWl0cy5jcHU6IDIwCiAgICAgIGxpbWl0cy5lcGhlbWVyYWwtc3RvcmFnZTogMTYwR2kKICAgICAgbGltaXRzLm1lbW9yeTogNDBHaQogICAgICByZXF1ZXN0cy5jcHU6IDEwCiAgICAgIHJlcXVlc3RzLmVwaGVtZXJhbC1zdG9yYWdlOiA2MEdpCiAgICAgIHJlcXVlc3RzLm1lbW9yeTogMjBHaQogICAgICByZXF1ZXN0cy5zdG9yYWdlOiAxMDBHaQogICAgICBzZXJ2aWNlcy5sb2FkYmFsYW5jZXJzOiAxCiAgICAgIHNlcnZpY2VzLm5vZGVwb3J0czogMAogICAgc2NvcGVTZWxlY3RvcjoKICAgICAgbWF0Y2hFeHByZXNzaW9uczogW10KICAgIHNjb3BlczogW10KcmJhYzoKICBjbHVzdGVyUm9sZToKICAgIGVuYWJsZWQ6IGF1dG8KICAgIGV4dHJhUnVsZXM6IFtdCiAgICBvdmVyd3JpdGVSdWxlczogW10KICByb2xlOgogICAgZW5hYmxlZDogdHJ1ZQogICAgZXh0cmFSdWxlczogW10KICAgIG92ZXJ3cml0ZVJ1bGVzOiBbXQpzeW5jOgogIGZyb21Ib3N0OgogICAgY3NpRHJpdmVyczoKICAgICAgZW5hYmxlZDogYXV0bwogICAgY3NpTm9kZXM6CiAgICAgIGVuYWJsZWQ6IGF1dG8KICAgIGNzaVN0b3JhZ2VDYXBhY2l0aWVzOgogICAgICBlbmFibGVkOiBhdXRvCiAgICBldmVudHM6CiAgICAgIGVuYWJsZWQ6IHRydWUKICAgIGluZ3Jlc3NDbGFzc2VzOgogICAgICBlbmFibGVkOiBmYWxzZQogICAgbm9kZXM6CiAgICAgIGNsZWFySW1hZ2VTdGF0dXM6IGZhbHNlCiAgICAgIGVuYWJsZWQ6IGZhbHNlCiAgICAgIHNlbGVjdG9yOgogICAgICAgIGFsbDogZmFsc2UKICAgICAgICBsYWJlbHM6IHt9CiAgICAgIHN5bmNCYWNrQ2hhbmdlczogZmFsc2UKICAgIHN0b3JhZ2VDbGFzc2VzOgogICAgICBlbmFibGVkOiBhdXRvCiAgdG9Ib3N0OgogICAgY29uZmlnTWFwczoKICAgICAgYWxsOiBmYWxzZQogICAgICBlbmFibGVkOiB0cnVlCiAgICBlbmRwb2ludHM6CiAgICAgIGVuYWJsZWQ6IHRydWUKICAgIGluZ3Jlc3NlczoKICAgICAgZW5hYmxlZDogZmFsc2UKICAgIG5ldHdvcmtQb2xpY2llczoKICAgICAgZW5hYmxlZDogZmFsc2UKICAgIHBlcnNpc3RlbnRWb2x1bWVDbGFpbXM6CiAgICAgIGVuYWJsZWQ6IHRydWUKICAgIHBlcnNpc3RlbnRWb2x1bWVzOgogICAgICBlbmFibGVkOiBmYWxzZQogICAgcG9kRGlzcnVwdGlvbkJ1ZGdldHM6CiAgICAgIGVuYWJsZWQ6IGZhbHNlCiAgICBwb2RzOgogICAgICBlbmFibGVkOiB0cnVlCiAgICAgIGVuZm9yY2VUb2xlcmF0aW9uczogW10KICAgICAgcmV3cml0ZUhvc3RzOgogICAgICAgIGVuYWJsZWQ6IHRydWUKICAgICAgICBpbml0Q29udGFpbmVyOgogICAgICAgICAgaW1hZ2U6IGxpYnJhcnkvYWxwaW5lOjMuMTMuMQogICAgICAgICAgcmVzb3VyY2VzOgogICAgICAgICAgICBsaW1pdHM6CiAgICAgICAgICAgICAgY3B1OiAzMG0KICAgICAgICAgICAgICBtZW1vcnk6IDY0TWkKICAgICAgICAgICAgcmVxdWVzdHM6CiAgICAgICAgICAgICAgY3B1OiAzMG0KICAgICAgICAgICAgICBtZW1vcnk6IDY0TWkKICAgICAgdHJhbnNsYXRlSW1hZ2U6IHt9CiAgICAgIHVzZVNlY3JldHNGb3JTQVRva2VuczogZmFsc2UKICAgIHByaW9yaXR5Q2xhc3NlczoKICAgICAgZW5hYmxlZDogZmFsc2UKICAgIHNlY3JldHM6CiAgICAgIGFsbDogZmFsc2UKICAgICAgZW5hYmxlZDogdHJ1ZQogICAgc2VydmljZUFjY291bnRzOgogICAgICBlbmFibGVkOiBmYWxzZQogICAgc2VydmljZXM6CiAgICAgIGVuYWJsZWQ6IHRydWUKICAgIHN0b3JhZ2VDbGFzc2VzOgogICAgICBlbmFibGVkOiBmYWxzZQogICAgdm9sdW1lU25hcHNob3RzOgogICAgICBlbmFibGVkOiBmYWxzZQp0ZWxlbWV0cnk6CiAgZW5hYmxlZDogdHJ1ZQ=="
---
# Source: vcluster/templates/coredns-configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: vc-coredns-my-release
  namespace: default
data:
  coredns.yaml: |-
    apiVersion: v1
    kind: ServiceAccount
    metadata:
      name: coredns
      namespace: kube-system
    ---
    apiVersion: rbac.authorization.k8s.io/v1
    kind: ClusterRole
    metadata:
      labels:
        kubernetes.io/bootstrapping: rbac-defaults
      name: system:coredns
    rules:
      - apiGroups:
          - ""
        resources:
          - endpoints
          - services
          - pods
          - namespaces
        verbs:
          - list
          - watch
      - apiGroups:
          - discovery.k8s.io
        resources:
          - endpointslices
        verbs:
          - list
          - watch
    ---
    apiVersion: rbac.authorization.k8s.io/v1
    kind: ClusterRoleBinding
    metadata:
      annotations:
        rbac.authorization.kubernetes.io/autoupdate: "true"
      labels:
        kubernetes.io/bootstrapping: rbac-defaults
      name: system:coredns
    roleRef:
      apiGroup: rbac.authorization.k8s.io
      kind: ClusterRole
      name: system:coredns
    subjects:
      - kind: ServiceAccount
        name: coredns
        namespace: kube-system
    ---
    apiVersion: v1
    kind: ConfigMap
    metadata:
      name: coredns
      namespace: kube-system
    data:
      Corefile: |-
        .:1053 {
            errors
            health
            ready
            rewrite name regex .*\.nodes\.vcluster\.com kubernetes.default.svc.cluster.local
            kubernetes cluster.local in-addr.arpa ip6.arpa {
                pods insecure
                fallthrough in-addr.arpa ip6.arpa
            }
            hosts /etc/NodeHosts {
                ttl 60
                reload 15s
                fallthrough
            }
            prometheus :9153
            forward . /etc/resolv.conf
            cache 30
            loop
            loadbalance
        }
      
        import /etc/coredns/custom/*.server
      NodeHosts: ""
    ---
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      name: coredns
      namespace: kube-system
      labels:
        k8s-app: kube-dns
        kubernetes.io/name: "CoreDNS"
    spec:
      replicas: 1
      strategy:
        type: RollingUpdate
        rollingUpdate:
          maxUnavailable: 1
      selector:
        matchLabels:
          k8s-app: kube-dns
      template:
        metadata:
          labels:
            k8s-app: kube-dns
        spec:
          priorityClassName: ""
          serviceAccountName: coredns
          nodeSelector:
            kubernetes.io/os: linux
          topologySpreadConstraints:
            - maxSkew: 1
              topologyKey: kubernetes.io/hostname
              whenUnsatisfiable: DoNotSchedule
              labelSelector:
                matchLabels:
                  k8s-app: kube-dns
          containers:
            - name: coredns
              image: {{.IMAGE}}
              imagePullPolicy: IfNotPresent
              resources:
                limits:
                  cpu: 1000m
                  memory: 170Mi
                requests:
                  cpu: 20m
                  memory: 64Mi
              args: [ "-conf", "/etc/coredns/Corefile" ]
              volumeMounts:
                - name: config-volume
                  mountPath: /etc/coredns
                  readOnly: true
                - name: custom-config-volume
                  mountPath: /etc/coredns/custom
                  readOnly: true
              securityContext:
                runAsNonRoot: true
                runAsUser: {{.RUN_AS_USER}}
                runAsGroup: {{.RUN_AS_GROUP}}
                allowPrivilegeEscalation: false
                capabilities:
                  add:
                    - NET_BIND_SERVICE
                  drop:
                    - ALL
                readOnlyRootFilesystem: true
              livenessProbe:
                httpGet:
                  path: /health
                  port: 8080
                  scheme: HTTP
                initialDelaySeconds: 60
                periodSeconds: 10
                timeoutSeconds: 1
                successThreshold: 1
                failureThreshold: 3
              readinessProbe:
                httpGet:
                  path: /ready
                  port: 8181
                  scheme: HTTP
                initialDelaySeconds: 0
                periodSeconds: 2
                timeoutSeconds: 1
                successThreshold: 1
                failureThreshold: 3
          dnsPolicy: Default
          volumes:
            - name: config-volume
              configMap:
                name: coredns
                items:
                  - key: Corefile
                    path: Corefile
                  - key: NodeHosts
                    path: NodeHosts
            - name: custom-config-volume
              configMap:
                name: coredns-custom
                optional: true
    ---
    apiVersion: v1
    kind: Service
    metadata:
      name: kube-dns
      namespace: kube-system
      annotations:
        prometheus.io/port: "9153"
        prometheus.io/scrape: "true"
      labels:
        k8s-app: kube-dns
        kubernetes.io/cluster-service: "true"
        kubernetes.io/name: "CoreDNS"
    spec:
      type: ClusterIP
      selector:
        k8s-app: kube-dns
      ports:
        - name: dns
          port: 53
          targetPort: 1053
          protocol: UDP
        - name: dns-tcp
          port: 53
          targetPort: 1053
          protocol: TCP
        - name: metrics
          port: 9153
          protocol: TCP
---
# Source: vcluster/templates/role.yaml
kind: Role
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: vc-my-release
  namespace: default
  labels:
    app: vcluster
    chart: "vcluster-0.20.0-beta.6"
    release: "my-release"
    heritage: "Helm"
rules:
  - apiGroups: [""]
    resources: ["configmaps", "secrets", "services", "pods", "pods/attach", "pods/portforward", "pods/exec", "persistentvolumeclaims"]
    verbs: ["create", "delete", "patch", "update", "get", "list", "watch"]
  - apiGroups: [""]
    resources: ["pods/status", "pods/ephemeralcontainers"]
    verbs: ["patch", "update"]
  - apiGroups: ["apps"]
    resources: ["statefulsets", "replicasets", "deployments"]
    verbs: ["get", "list", "watch"]
  - apiGroups: [""]
    resources: ["endpoints", "events", "pods/log"]
    verbs: ["get", "list", "watch"]
  - apiGroups: [""]
    resources: ["endpoints"]
    verbs: ["create", "delete", "patch", "update"]
---
# Source: vcluster/templates/rolebinding.yaml
kind: RoleBinding
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: vc-my-release
  namespace: default
  labels:
    app: vcluster
    chart: "vcluster-0.20.0-beta.6"
    release: "my-release"
    heritage: "Helm"
subjects:
  - kind: ServiceAccount
    name: vc-my-release
    namespace: default
roleRef:
  kind: Role
  name: vc-my-release
  apiGroup: rbac.authorization.k8s.io
---
# Source: vcluster/templates/headless-service.yaml
apiVersion: v1
kind: Service
metadata:
  name: my-release-headless
  namespace: default
  labels:
    app: vcluster
    chart: "vcluster-0.20.0-beta.6"
    release: "my-release"
    heritage: "Helm"
spec:
  publishNotReadyAddresses: true
  ports:
    - name: https
      port: 443
      targetPort: 8443
      protocol: TCP
  clusterIP: None
  selector:
    app: vcluster
    release: "my-release"
---
# Source: vcluster/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: my-release
  namespace: default
  labels:
    app: vcluster
    chart: "vcluster-0.20.0-beta.6"
    release: "my-release"
    heritage: "Helm"
spec:
  type: ClusterIP
  ports:
    - name: https
      port: 443
      targetPort: 8443
      nodePort: 0
      protocol: TCP
    - name: kubelet
      port: 10250
      targetPort: 8443
      nodePort: 0
      protocol: TCP
  selector:
    app: vcluster
    release: my-release
---
# Source: vcluster/templates/statefulset.yaml
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: my-release
  namespace: default
  labels:
    app: vcluster
    chart: "vcluster-0.20.0-beta.6"
    release: "my-release"
    heritage: "Helm"
spec:
  selector:
    matchLabels:
      app: vcluster
      release: my-release
  persistentVolumeClaimRetentionPolicy:
    whenDeleted: Retain
  serviceName: my-release-headless
  podManagementPolicy: Parallel
  
  volumeClaimTemplates:
  - metadata:
      name: data
    spec:
      accessModes: [ReadWriteOnce]
      resources:
        requests:
          storage: 5Gi
  replicas: 1
  template:
    metadata:
      annotations:
       vClusterConfigHash: "4185d3e8613c0f32567bff567be4cae7252daeee9864b4c34ba5da8dae75bf39"
      labels:
        app: vcluster
        release: my-release
    spec:
      terminationGracePeriodSeconds: 10
      serviceAccountName: vc-my-release
      volumes:        
        - name: helm-cache
          emptyDir: {}
        - name: binaries
          emptyDir: {}
        - name: tmp
          emptyDir: {}
        - name: certs
          emptyDir: {}
        - name: vcluster-config
          secret:
            secretName: vc-config-my-release
        - name: coredns
          configMap:
            name: vc-coredns-my-release
        # - name: custom-config-volume
        #   configMap:
        #     name: coredns-custom
        #     optional: true
      initContainers:
        
        # this is needed because the k8s containers are distroless and thus we don't have any
        # way of copying the binaries otherwise
        - name: vcluster-copy
          image: "ghcr.io/loft-sh/vcluster-pro:0.20.0-beta.6"
          volumeMounts:
            - mountPath: /binaries
              name: binaries
          command:
            - /bin/sh
          args:
            - -c
            - "cp /vcluster /binaries/vcluster"
          securityContext:
            {}
          resources:
            limits:
              cpu: 100m
              memory: 256Mi
            requests:
              cpu: 40m
              memory: 64Mi
        - name: kube-controller-manager
          image: "registry.k8s.io/kube-controller-manager:v1.29.0"
          volumeMounts:
            - mountPath: /binaries
              name: binaries
          command:
            - /binaries/vcluster
          args:
            - cp
            - /usr/local/bin/kube-controller-manager
            - /binaries/kube-controller-manager
          securityContext:
            {}
          resources:
            limits:
              cpu: 100m
              memory: 256Mi
            requests:
              cpu: 40m
              memory: 64Mi
        - name: kube-apiserver
          image: "registry.k8s.io/kube-apiserver:v1.29.0"
          volumeMounts:
            - mountPath: /binaries
              name: binaries
          command:
            - /binaries/vcluster
          args:
            - cp
            - /usr/local/bin/kube-apiserver
            - /binaries/kube-apiserver
          securityContext:
            {}
          resources:
            limits:
              cpu: 100m
              memory: 256Mi
            requests:
              cpu: 40m
              memory: 64Mi
      enableServiceLinks: true
      containers:
        - name: syncer
          image: "ghcr.io/loft-sh/vcluster-pro:0.20.0-beta.6"
          imagePullPolicy: 
          livenessProbe:
            httpGet:
              path: /healthz
              port: 8443
              scheme: HTTPS
            failureThreshold: 60
            initialDelaySeconds: 60
            periodSeconds: 2
          readinessProbe:
            httpGet:
              path: /readyz
              port: 8443
              scheme: HTTPS
            failureThreshold: 60
            periodSeconds: 2
          startupProbe:
            httpGet:
              path: /readyz
              port: 8443
              scheme: HTTPS
            failureThreshold: 300
            periodSeconds: 6
          securityContext:
            allowPrivilegeEscalation: false
            runAsGroup: 0
            runAsUser: 0
          resources:
            limits:
              ephemeral-storage: 8Gi
              memory: 2Gi
            requests:
              cpu: 200m
              ephemeral-storage: 200Mi
              memory: 256Mi
          env:
            - name: VCLUSTER_NAME
              value: "my-release"
            - name: POD_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.name
            - name: POD_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.podIP
            - name: NODE_NAME
              valueFrom:
                fieldRef:
                  fieldPath: spec.nodeName
            
          volumeMounts:            
            - name: data
              mountPath: /data
            - name: binaries
              mountPath: /binaries
            - name: certs
              mountPath: /pki
            - name: helm-cache
              mountPath: /.cache/helm
            - name: vcluster-config
              mountPath: /var/vcluster
            - name: tmp
              mountPath: /tmp
            - name: coredns
              mountPath: /manifests/coredns
              readOnly: true
